webpackJsonp([0x67ef26645b2a,60335399758886],{461:function(t,e){t.exports={data:{site:{siteMetadata:{title:"Re-lab"}}},layoutContext:{}}},701:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(1),a=r(o),s=n(759),u=r(s),c=n(461),l=r(c);e.default=function(t){return a.default.createElement(u.default,i({},t,l.default))},t.exports=e.default},187:function(t,e,n){"use strict";function r(){function t(t){var e=d[t];f(e,"delete"),delete d[t]}function e(t){return t=t||s,a(d,t)||i("no-app",{name:t}),d[t]}function n(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){var n=e;e={name:n}}var r=e;void 0===r.name&&(r.name=s);var o=r.name;"string"==typeof o&&o||i("bad-app-name",{name:o+""}),a(d,o)&&i("duplicate-app",{name:o});var u=new c(t,r,_);return d[o]=u,f(u,"create"),u}function u(){return Object.keys(d).map(function(t){return d[t]})}function l(t,n,r,a,s){y[t]&&i("duplicate-service",{name:t}),y[t]=n,a&&(v[t]=a,u().forEach(function(t){a("create",t)}));var l=function(n){return void 0===n&&(n=e()),"function"!=typeof n[t]&&i("invalid-app-argument",{name:t}),n[t]()};return void 0!==r&&o.deepExtend(l,r),_[t]=l,c.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,s?e:[])},l}function h(t){o.deepExtend(_,t)}function f(t,e){Object.keys(y).forEach(function(n){var r=p(t,n);null!==r&&v[r]&&v[r](e,t)})}function p(t,e){if("serverAuth"===e)return null;var n=e;t.options;return n}var d={},y={},v={},_={__esModule:!0,initializeApp:n,app:e,apps:null,Promise:Promise,SDK_VERSION:"5.0.4",INTERNAL:{registerService:l,createFirebaseNamespace:r,extendNamespace:h,createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,removeApp:t,factories:y,useAsService:p,Promise:Promise,deepExtend:o.deepExtend}};return o.patchProperty(_,"default",_),Object.defineProperty(_,"apps",{get:u}),o.patchProperty(e,"App",c),_}function i(t,e){throw h.create(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(188),a=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s="[DEFAULT]",u=[],c=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){u.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){u=u.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=s),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==s?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;o.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(u.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),u=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&i("app-deleted",{name:this.name_})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var l={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},h=new o.ErrorFactory("app","Firebase",l),f=r();e.firebase=f,e.default=f},381:function(t,e,n){(function(r){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function o(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}function a(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):q("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}function s(t){y=t}function u(t){_=t}function c(t){g=t}function l(t,e){return G(t.name,e.name)}function h(t,e){return G(t,e)}function f(t,e){if(void 0===e&&(e=null),null===t)return ue.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),b.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t){var n=t;return new Jt(n,f(e))}if(t instanceof Array||!he){var r=ue.EMPTY_NODE,i=t;return b.forEach(i,function(t,e){if(b.contains(i,t)&&"."!==t.substring(0,1)){var n=f(e);!n.isLeafNode()&&n.isEmpty()||(r=r.updateImmediateChild(t,n))}}),r.updatePriority(f(e))}var o=[],a=!1,s=t;if(b.forEach(s,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=f(s[t]);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new Ht(t,n)))}}),0==o.length)return ue.EMPTY_NODE;var u=oe(o,l,function(t){return t.name},h);if(a){var c=oe(o,Zt.getCompare());return new ue(u,f(e),new se({".priority":c},{".priority":Zt}))}return new ue(u,f(e),se.Default)}function p(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return Sr.getInstance().databaseFromApp(t,n)},{Reference:gr,Query:we,Database:Cr,enableLogging:j,INTERNAL:Mr,ServerValue:Hr,TEST_ACCESS:Br},null,!0);b.isNodeSdk()&&(t.exports=n)}Object.defineProperty(e,"__esModule",{value:!0});var d,y,v,_,g,m,E,b=n(188),w=n(382),T=n(184),S=i(n(187)),C=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),b.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:b.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),A=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return b.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),I=function(t){try{if("undefined"!=typeof window&&"undefined"!=typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new C(e)}}catch(t){}return new A},O=I("localStorage"),R=I("sessionStorage"),P=new w.Logger("@firebase/database"),N=function(){var t=1;return function(){return t++}}(),x=function(t){var e=b.stringToByteArray(t),n=new b.Sha1;n.update(e);var r=n.digest();return b.base64.encodeByteArray(r)},D=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)n+=Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?D.apply(null,t[r]):"object"==typeof t[r]?b.stringify(t[r]):t[r],n+=" ";return n},L=null,M=!0,j=function(t,e){b.assert(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(P.logLevel=w.LogLevel.VERBOSE,L=P.log.bind(P),e&&R.set("logging_enabled",!0)):"function"==typeof t?L=t:(L=null,R.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(M===!0&&(M=!1,null===L&&R.get("logging_enabled")===!0&&j(!0)),L){var n=D.apply(null,t);L(n)}},F=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,[t].concat(e))}},U=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+D.apply(void 0,t);P.error(n)},W=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+D.apply(void 0,t);throw P.error(n),new Error(n)},q=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+D.apply(void 0,t);P.warn(n)},z=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&q("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},B=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},H=function(t){if(b.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){return document.body?void(e||(e=!0,t())):void setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},Q="[MIN_NAME]",V="[MAX_NAME]",G=function(t,e){if(t===e)return 0;if(t===Q||e===V)return-1;if(e===Q||t===V)return 1;var n=it(t),r=it(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},K=function(t,e){return t===e?0:t<e?-1:1},Y=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+b.stringify(e))},J=function(t){if("object"!=typeof t||null===t)return b.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=b.stringify(e[i]),r+=":",r+=J(t[e[i]]);return r+="}"},X=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},Z=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else b.forEach(t,function(t,n){return e(n,t)})},$=function(t){b.assert(!B(t),"Invalid JSON number");var e,n,r,i,o,a,s,u=11,c=52,l=(1<<u-1)-1;for(0===t?(n=0,r=0,e=1/t===-(1/0)?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-l)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),l),n=i+l,r=Math.round(t*Math.pow(2,c-i)-Math.pow(2,c))):(n=0,r=Math.round(t/Math.pow(2,1-l-c)))),a=[],o=c;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=u;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join("");var h="";for(o=0;o<64;o+=8){var f=parseInt(s.substr(o,8),2).toString(16);1===f.length&&(f="0"+f),h+=f}return h.toLowerCase()},tt=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},et=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},nt=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},rt=new RegExp("^-?\\d{1,10}$"),it=function(t){if(rt.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},ot=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw q("Exception was thrown by user callback.",e),t},Math.floor(0))}},at=function(){var t="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},st=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},ut=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(var r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=G(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=b.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=b.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=b.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt="5",ht="v",ft="s",pt="r",dt="f",yt="firebaseio.com",vt="ls",_t="websocket",gt="long_polling",mt=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=O.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&O.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){b.assert("string"==typeof t,"typeof type must == string"),b.assert("object"==typeof e,"typeof params must == object");var n;if(t===_t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==gt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return b.forEach(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),Et=function(t){var e=bt(t),n=e.subdomain;"firebase"===e.domain&&W(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||W("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||z();var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new mt(e.host,e.secure,n,r),path:new ut(e.pathString)}},bt=function(t){var e="",n="",r="",i="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");h===-1&&(h=t.length);var f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=o(t.substring(h,f)));var p=a(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=t.length;var d=e.split(".");3===d.length?(n=d[1],r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,l).toLowerCase()&&(n="localhost"),""===r&&"ns"in p&&(r=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i}},wt=/[\[\].#$\/\u0000-\u001F\u007F]/,Tt=/[\[\].#$\u0000-\u001F\u007F]/,St=10485760,Ct=function(t){return"string"==typeof t&&0!==t.length&&!wt.test(t)},At=function(t){return"string"==typeof t&&0!==t.length&&!Tt.test(t)},It=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),At(t)},Ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!B(t)||t&&"object"==typeof t&&b.contains(t,".sv")},Rt=function(t,e,n,r,i){i&&void 0===n||Pt(b.errorPrefix(t,e,i),n,r)},Pt=function(t,e,n){var r=n instanceof ut?new ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(B(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>St/3&&b.stringLength(e)>St)throw new Error(t+"contains a string greater than "+St+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(b.forEach(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Ct(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Pt(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Nt=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=r.slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ct(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(ut.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},xt=function(t,e,n,r,i){if(!i||void 0!==n){var o=b.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];b.forEach(n,function(t,e){var n=new ut(t);if(Pt(o,e,r.child(n)),".priority"===n.getBack()&&!Ot(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),Nt(o,a)}},Dt=function(t,e,n,r){if(!r||void 0!==n){if(B(n))throw new Error(b.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ot(n))throw new Error(b.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(b.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Mt=function(t,e,n,r){if(!(r&&void 0===n||Ct(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jt=function(t,e,n,r){if(!(r&&void 0===n||At(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jt(t,e,n,r)},Ft=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Ut=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ct(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!It(r))throw new Error(b.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Wt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(b.errorPrefix(t,e,r)+"must be a boolean.")},qt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){b.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),b.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){b.validateArgCount("OnDisconnect.remove",0,1,arguments.length),Ft("OnDisconnect.remove",this.path_),b.validateCallback("OnDisconnect.remove",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){b.validateArgCount("OnDisconnect.set",1,2,arguments.length),Ft("OnDisconnect.set",this.path_),Rt("OnDisconnect.set",1,t,this.path_,!1),b.validateCallback("OnDisconnect.set",2,e,!0);var n=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){b.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),Ft("OnDisconnect.setWithPriority",this.path_),Rt("OnDisconnect.setWithPriority",1,t,this.path_,!1),Dt("OnDisconnect.setWithPriority",2,e,!1),b.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new b.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(b.validateArgCount("OnDisconnect.update",1,2,arguments.length),Ft("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,q("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xt("OnDisconnect.update",1,t,this.path_,!1),b.validateCallback("OnDisconnect.update",2,e,!0);var i=new b.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),zt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return b.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Bt=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i=r===e;e=r;var o,a=new Array(8);for(o=7;o>=0;o--)a[o]=t.charAt(r%64),r=Math.floor(r/64);b.assert(0===r,"Cannot push at time == 0");var s=a.join("");if(i){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)s+=t.charAt(n[o]);return b.assert(20===s.length,"nextPushId: Length should be 20."),s}}(),Ht=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Qt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ht(Q,t),r=new Ht(Q,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ht.MIN},t}(),Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return G(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw b.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ht.MIN},e.prototype.maxPost=function(){return new Ht(V,d)},e.prototype.makePost=function(t,e){return b.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ht(t,d)},e.prototype.toString=function(){return".key"},e}(Qt),Gt=new Vt,Kt=function(t){return"number"==typeof t?"number:"+$(t):"string:"+t},Yt=function(t){if(t.isLeafNode()){var e=t.val();b.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&b.contains(e,".sv"),"Priority must be a string or number.")}else b.assert(t===y||t.isEmpty(),"priority of unexpected type.");b.assert(t===y||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Jt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,b.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Yt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return v},set:function(t){v=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(b.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?$(this.value_):this.value_,this.lazyHash_=x(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(b.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return b.assert(i>=0,"Unknown leaf type: "+n),b.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?G(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ht.MIN},e.prototype.maxPost=function(){return new Ht(V,new Jt("[PRIORITY-POST]",g))},e.prototype.makePost=function(t,e){var n=_(t);return new Ht(e,new Jt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Qt),Zt=new Xt,$t=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0;
},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),te=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:ne.EMPTY_NODE,this.right=null!=o?o:ne.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return i=this,r=n(t,i.key),i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return ne.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return ne.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if(t=this.left.check_(),t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),ee=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new te(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),ne=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,te.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,te.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new $t(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new $t(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new $t(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new $t(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new ee,t}(),re=Math.log(2),ie=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/re,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),oe=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new te(a,o.node,te.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new te(a,o.node,te.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new te(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,te.BLACK):(s(h,te.BLACK),s(h,te.RED))}return o},a=new ie(t.length),s=o(a);return new ne(r||e,s)},ae={},se=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return b.assert(ae&&Zt,"ChildrenNode.ts has not been loaded"),m=m||new t({".priority":ae},{".priority":Zt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=b.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===ae?null:e},t.prototype.hasIndex=function(t){return b.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){b.assert(e!==Gt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,o=n.getIterator(Ht.Wrap),a=o.getNext();a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();var s;s=i?oe(r,e.getCompare()):ae;var u=e.toString(),c=b.clone(this.indexSet_);c[u]=e;var l=b.clone(this.indexes_);return l[u]=s,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this,i=b.map(this.indexes_,function(t,i){var o=b.safeGet(r.indexSet_,i);if(b.assert(o,"Missing index implementation for "+i),t===ae){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Ht.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),oe(a,o.getCompare())}return ae}var c=n.get(e.name),l=t;return c&&(l=l.remove(new Ht(e.name,c))),l.insert(e,e.node)});return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=b.map(this.indexes_,function(t){if(t===ae)return t;var r=n.get(e.name);return r?t.remove(new Ht(e.name,r)):t});return new t(r,this.indexSet_)},t}(),ue=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yt(this.priorityNode_),this.children_.isEmpty()&&b.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return E||(E=new t(new ne(h),null,se.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||E},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?E:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(b.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ht(e,n),i=void 0,o=void 0,a=void 0;return n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_)),a=i.isEmpty()?E:this.priorityNode_,new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;b.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Zt,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Kt(this.getPriority().val())+":"),this.forEachChild(Zt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":x(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ht(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ht(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ht(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ht.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ht.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===le?-1:0},t.prototype.withIndex=function(e){if(e===Gt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Gt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Zt),r=e.getIterator(Zt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Gt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ce=function(t){function e(){return t.call(this,new ne(h),ue.EMPTY_NODE,se.Default)||this}return T.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ue.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ue),le=new ce;Object.defineProperties(Ht,{MIN:{value:new Ht(Q,ue.EMPTY_NODE)},MAX:{value:new Ht(V,le)}}),Vt.__EMPTY_NODE=ue.EMPTY_NODE,Jt.__childrenNodeConstructor=ue,s(le),c(le);var he=!0;u(f);var fe,pe,de=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?G(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ht.MIN},e.prototype.maxPost=function(){return Ht.MAX},e.prototype.makePost=function(t,e){var n=f(t);return new Ht(e,n)},e.prototype.toString=function(){return".value"},e}(Qt),ye=new de,ve=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,b.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return T.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?G(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=f(t),r=ue.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ht(e,r)},e.prototype.maxPost=function(){var t=ue.EMPTY_NODE.updateChild(this.indexPath_,le);return new Ht(V,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Qt),_e=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return b.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return b.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return b.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return b.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){b.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),jt("DataSnapshot.child",1,e,!1);var n=new ut(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Zt)},t.prototype.hasChild=function(t){b.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),jt("DataSnapshot.hasChild",1,t,!1);var e=new ut(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return b.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(b.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),b.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Zt))})},t.prototype.hasChildren=function(){return b.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return b.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return b.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),ge=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+b.stringify(this.snapshot.exportVal())},t}(),me=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ee=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ge("value",this,new _e(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new me(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),be=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,b.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new me(this,t,e):null},t.prototype.createEvent=function(t,e){b.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ge(t.type,this,new _e(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=b.getCount(e.callbacks_),r=b.getCount(this.callbacks_);if(n===r){if(1===n){var i=b.getAnyKey(e.callbacks_),o=b.getAnyKey(this.callbacks_);return!(o!==i||e.callbacks_[i]&&this.callbacks_[o]&&e.callbacks_[i]!==this.callbacks_[o])}return b.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),we=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return b.assert(fe,"Reference.ts has not been loaded"),fe},set:function(t){fe=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Gt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){var o=t.getIndexStartName();if(o!=Q)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){var a=t.getIndexEndName();if(a!=V)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Zt){if(null!=e&&!Ot(e)||null!=n&&!Ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(b.assert(t.getIndex()instanceof ve||t.getIndex()===ye,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(this.orderByCalled_===!0)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return b.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){b.validateArgCount("Query.on",2,4,arguments.length),Lt("Query.on",1,e,!1),b.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Ee(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new be(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){b.validateArgCount("Query.off",0,3,arguments.length),Lt("Query.off",1,t,!0),b.validateCallback("Query.off",2,e,!0),b.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Ee(o,null,n||null)}else t&&(e&&(i={},i[t]=e),r=new be(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;b.validateArgCount("Query.once",1,4,arguments.length),Lt("Query.once",1,e,!1),b.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new b.Deferred;u.promise.catch(function(){});var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(b.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(b.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(b.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');jt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new ut(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ve(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){b.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){b.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){b.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(ye);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),b.validateArgCount("Query.startAt",0,2,arguments.length),Rt("Query.startAt",1,e,this.path,!0),Mt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),b.validateArgCount("Query.endAt",0,2,arguments.length),Rt("Query.endAt",1,e,this.path,!0),Mt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(b.validateArgCount("Query.equalTo",1,2,arguments.length),Rt("Query.equalTo",1,t,this.path,!1),Mt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return b.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return b.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=J(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(b.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,b.validateCallback(t,3,r.cancel,!0),r.context=n,b.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(b.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Te=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return b.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return b.isEmpty(this.set)},t.prototype.count=function(){return b.getCount(this.set)},t.prototype.each=function(t){b.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return b.forEach(this.set,function(e){t.push(e)}),t},t}(),Se=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();if(t=t.popFront(),this.children_.contains(e)){var n=this.children_.get(e);return n.find(t)}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new Te);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(Zt,function(t,e){n.remember(new ut(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();if(t=t.popFront(),this.children_.contains(r)){var i=this.children_.get(r).forget(t);i&&this.children_.remove(r)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new ut(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),Ce=function(t){return t=t||{},t.timestamp=t.timestamp||(new Date).getTime(),t},Ae=function(t,e){return t&&"object"==typeof t?(b.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},Ie=function(t,e){var n=new Se;return t.forEachTree(new ut(""),function(t,r){n.remember(t,Oe(r,e))}),n},Oe=function(t,e){var n,r=t.getPriority().val(),i=Ae(r,e);if(t.isLeafNode()){var o=t,a=Ae(o.getValue(),e);return a!==o.getValue()||i!==o.getPriority().val()?new Jt(a,f(i)):t}var s=t;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new Jt(i))),s.forEachChild(Zt,function(t,r){var i=Oe(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pe||(pe={}));var Re,Pe,Ne=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,b.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},
t}(),xe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=pe.ACK_USER_WRITE,this.source=Ne.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return b.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ut(e));return new t(ut.Empty,n,this.revert)}return b.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),De=function(){return Re||(Re=new ne(K)),Re},Le=function(){function t(t,e){void 0===e&&(e=De()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return b.forEach(e,function(t,e){n=n.set(new ut(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ut.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);if(null!=i){var o=new ut(n).child(i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.set(e.popFront(),n),a=this.children.insert(r,o);return new t(this.value,a)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.setTree(e.popFront(),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,a)},t.prototype.fold=function(t){return this.fold_(ut.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ut.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ut.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(ut.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),Me=function(){function t(t,e){this.source=t,this.path=e,this.type=pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,ut.Empty):new t(this.source,this.path.popFront())},t}(),je=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=pe.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,ut.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ke=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=pe.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new ut(e));return n.isEmpty()?null:n.value?new je(this.source,ut.Empty,n.value):new t(this.source,ut.Empty,n)}return b.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Fe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ue=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Fe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Fe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Fe(ue.EMPTY_NODE,!1,!1),new Fe(ue.EMPTY_NODE,!1,!1)),t}(),We=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),qe=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){b.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(We.childRemovedChange(e,a)):b.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(We.childAddedChange(e,n)):o.trackChildChange(We.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Zt,function(t,r){e.hasChild(t)||n.trackChildChange(We.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(Zt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(We.childChangedChange(e,r,i))}else n.trackChildChange(We.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ue.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ze=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;b.assert(e==We.CHILD_ADDED||e==We.CHILD_CHANGED||e==We.CHILD_REMOVED,"Only child changes supported for tracking"),b.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=b.safeGet(this.changeMap_,n);if(r){var i=r.type;if(e==We.CHILD_ADDED&&i==We.CHILD_REMOVED)this.changeMap_[n]=We.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==We.CHILD_REMOVED&&i==We.CHILD_ADDED)delete this.changeMap_[n];else if(e==We.CHILD_REMOVED&&i==We.CHILD_CHANGED)this.changeMap_[n]=We.childRemovedChange(n,r.oldSnap);else if(e==We.CHILD_CHANGED&&i==We.CHILD_ADDED)this.changeMap_[n]=We.childAddedChange(n,t.snapshotNode);else{if(e!=We.CHILD_CHANGED||i!=We.CHILD_CHANGED)throw b.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=We.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return b.getValues(this.changeMap_)},t}(),Be=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),He=new Be,Qe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Fe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ve=function(){function t(t,e){this.viewCache=t,this.changes=e}return t}(),Ge=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){b.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),b.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new ze;if(n.type===pe.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(b.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===pe.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(b.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===pe.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,s):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==pe.LISTEN_COMPLETE)throw b.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,s)}var h=s.getChanges();return t.maybeAddValueEvent_(e,o,h),new Ve(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(We.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(b.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof ue?u:ue.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"==f){b.assert(1==e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var y=e.popFront(),v=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);v=null!=_?o.getNode().getImmediateChild(f).updateChild(y,_):o.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(o.getNode(),f,v,y,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h),d=p.updateChild(f,n);s=".priority"==h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,He,null)}var y=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Qe(r,y,i);return this.generateEventCacheAfterServerEvent_(y,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new Qe(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):ue.EMPTY_NODE}if(f.equals(p))a=t;else{var y=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Le.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new ut(e),h,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new ut(e),f,r,i,o,a)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=Le.Empty;return s.getNode().forEachChild(Gt,function(t,e){u=u.set(new ut(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=Le.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,He,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new Qe(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();b.assert(l instanceof ue,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),u=null!=f?this.filter_.updateChild(s,h,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,ue.EMPTY_NODE,e.popFront(),a,i):s,u.isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap()),o.isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i)))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ut.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Ke=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===We.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(We.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,We.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,We.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,We.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,We.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,We.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw b.assertionError("Should only compare child_ events.");var n=new Ht(t.childName,t.snapshotNode),r=new Ht(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ye=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new qe(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ge(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(ue.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ue.EMPTY_NODE,a.getNode(),null),c=new Fe(s,o.isFullyInitialized(),r.filtersNodes()),l=new Fe(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Ue(l,c),this.eventGenerator_=new Ke(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){b.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===pe.MERGE&&null!==t.source.queryId&&(b.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),b.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),b.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];if(!e.getNode().isLeafNode()){var r=e.getNode();r.forEachChild(Zt,function(t,e){n.push(We.childAddedChange(t,e))})}return e.isFullyInitialized()&&n.push(We.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Je=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return b.assert(Pe,"Reference.ts has not been loaded"),Pe},set:function(t){b.assert(!Pe,"__referenceConstructor has already been defined"),Pe=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return b.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=b.safeGet(this.views_,r);return b.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return b.forEach(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=b.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof ue?(s=n.calcCompleteEventChildren(r),u=!1):(s=ue.EMPTY_NODE,u=!1);var c=new Ue(new Fe(s,u,!1),new Fe(r,i,!1));a=new Ye(t,c),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],s=this.hasCompleteView();if("default"===i){var u=this;b.forEach(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete u.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var c=b.safeGet(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this,e=Object.keys(this.views_).map(function(e){return t.views_[e]});return e.filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return b.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){var e=t.getQueryParams();if(e.loadsAllData())return this.getCompleteView();var n=t.queryIdentifier();return b.safeGet(this.views_,n)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t=b.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()});return t||null},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Le(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=ut.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new Le(n),u=this.writeTree_.setTree(e,s);return new t(u)},t.prototype.addWrites=function(t,e){var n=this;return b.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){if(e.isEmpty())return t.Empty;var n=this.writeTree_.setTree(e,Le.Empty);return new t(n)},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ut.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Zt,function(e,n){t.push(new Ht(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ht(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Le(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(ut.Empty,this.writeTree_,e)},t.Empty=new t(new Le(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(b.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}(),Ze=function(){function t(){this.visibleWrites_=Xe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new $e(t,this)},t.prototype.addOverwrite=function(t,e,n,r){b.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){b.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});b.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;b.forEach(u,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(ut.Empty)){var a=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},s=t.layerTree_(this.allWrites_,a,e),u=n||ue.EMPTY_NODE;return s.apply(u)}return null}var c=this.visibleWrites_.getCompleteNode(e);if(null!=c)return c;var l=this.visibleWrites_.childCompoundWrite(e);if(l.isEmpty())return n;if(null!=n||l.hasCompleteWrite(ut.Empty)){var u=n||ue.EMPTY_NODE;return l.apply(u)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ue.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Zt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Zt,function(t,e){var r=i.childCompoundWrite(new ut(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}var o=this.visibleWrites_.childCompoundWrite(t);return o.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){b.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);if(null!=i)return i;if(n.isCompleteForChild(e)){var o=this.visibleWrites_.childCompoundWrite(r);return o.apply(n.getNode().getImmediateChild(e))}return null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(ut.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!b.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,ut.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Xe.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=ut.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=ut.relativePath(a,n),r=r.addWrite(ut.Empty,o.snap.getChild(s)));else{if(!o.children)throw b.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=ut.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if(s=ut.relativePath(a,n),s.isEmpty())r=r.addWrites(ut.Empty,o.children);else{var u=b.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(ut.Empty,c)}}}}}return r},t}(),$e=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),tn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Le.Empty,this.pendingWriteTree_=new Ze,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new je(Ne.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Le.fromObject(e);return this.applyOperationToSyncPoints_(new ke(Ne.User,t,r))},t.prototype.ackUserWrite=function(t,e){
void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t),r=this.pendingWriteTree_.removeWrite(t);if(r){var i=Le.Empty;return null!=n.snap?i=i.set(ut.Empty,!0):b.forEach(n.children,function(t,e){i=i.set(new ut(t),e)}),this.applyOperationToSyncPoints_(new xe(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new je(Ne.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Le.fromObject(e);return this.applyOperationToSyncPoints_(new ke(Ne.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Me(Ne.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=ut.relativePath(a,e),c=new je(Ne.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=ut.relativePath(a,e),c=Le.fromObject(n),l=new ke(Ne.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=ut.relativePath(o,e),u=new Me(Ne.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=ut.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(ut.Empty)):(a=new Je,this.syncPointTree_=this.syncPointTree_.set(r,a));var s;if(null!=i)s=!0;else{s=!1,i=ue.EMPTY_NODE;var u=this.syncPointTree_.subtree(r);u.foreachChild(function(t,e){var n=e.getCompleteServerCache(ut.Empty);n&&(i=i.updateImmediateChild(t,n))})}var c=a.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);b.assert(!(l in this.queryToTagMap_),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap_[l]=h,this.tagToQueryMap_["_"+h]=l}var f=this.pendingWriteTree_.childWrites(r),p=a.addEventRegistration(e,n,f,i,s);if(!c&&!o){var d=a.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),_=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),_.hashFn,_.onComplete)}}if(!h&&c.length>0&&!r)if(l){var g=null;this.listenProvider_.stopListening(t.queryForListening_(e),g)}else c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)});this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=!0,r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,function(e,n){var r=ut.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return r.calcCompleteEventCache(t,i,e,n)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView()){var r=e.getCompleteView();return[r]}var i=[];return e&&(i=e.getQueryViews()),b.forEach(n,function(t,e){i=i.concat(e)}),i})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)b.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),b.forEach(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){var e=t.getServerCache()||ue.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=nt(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return b.assert(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ut(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return b.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);b.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ut.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ut.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ut.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(ut.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(ut.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),en=function(){function t(){this.rootNode_=ue.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),nn=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',q(t)},t}(),rn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),b.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return b.deepCopy(this.counters_)},t}(),on=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new rn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),an=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=b.clone(t);return this.last_&&b.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),sn=1e4,un=3e4,cn=3e5,ln=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new an(t);var n=sn+(un-sn)*Math.random();st(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;b.forEach(e,function(e,i){i>0&&b.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),st(this.reportStats_.bind(this),Math.floor(2*Math.random()*cn))},t}(),hn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new fn(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){var i=r.getPath();t(i)?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),fn=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();L&&k("event: "+e.toString()),ot(n)}}},t.prototype.getPath=function(){return this.path_},t}(),pn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},b.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){b.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),dn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(n="visibilitychange",e="hidden"):"undefined"!=typeof document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):"undefined"!=typeof document.msHidden?(n="msvisibilitychange",e="msHidden"):"undefined"!=typeof document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return T.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return b.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(pn),yn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||"undefined"==typeof window.addEventListener||b.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return T.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return b.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(pn),vn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&ot(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);return i.currentResponseNum===i.closeAfterResponse?(i.onClose&&(i.onClose(),i.onClose=null),"break"):void i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){var o=r();if("break"===o)break}},t}(),_n="start",gn="close",mn="pLPCommand",En="pRTLPCB",bn="id",wn="pw",Tn="ser",Sn="cb",Cn="seg",An="ts",In="d",On="disconn",Rn="dframe",Pn=1870,Nn=30,xn=Pn-Nn,Dn=25e3,Ln=3e4,Mn=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=F(t),this.stats_=on.getCollection(e),this.urlFn=function(t){return e.connectionURL(gt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new vn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(Ln)),H(function(){if(!n.isClosed_){n.scriptTagHolder=new jn(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r==_n)n.id=i,n.password=o;else{if(r!==gn)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={};t[_n]="t",t[Tn]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Sn]=n.scriptTagHolder.uniqueCallbackIdentifier),t[ht]=lt,n.transportSessionId&&(t[ft]=n.transportSessionId),n.lastSessionId&&(t[vt]=n.lastSessionId),!b.isNodeSdk()&&"undefined"!=typeof location&&location.href&&location.href.indexOf(yt)!==-1&&(t[pt]=dt);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!tt()&&!et()&&!b.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=b.base64Encode(e),r=X(n,xn),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!b.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Rn]="t",n[bn]=t,n[wn]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=b.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),jn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Te,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,b.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=N(),window[mn+this.uniqueCallbackIdentifier]=e,window[En+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var a=document.domain;o='<script>document.domain="'+a+'";</script>'}var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){k("frame writing exception"),t.stack&&k(t.stack),k(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||k("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),b.isNodeSdk()&&this.myID){var n={};n[On]="t",n[bn]=this.myID,n[wn]=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[bn]=this.myID,t[wn]=this.myPW,t[Tn]=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){var i=this.pendingSegs[0];if(!(i.d.length+Nn+n.length<=Pn))break;var o=this.pendingSegs.shift();n=n+"&"+Cn+r+"="+o.seg+"&"+An+r+"="+o.ts+"&"+In+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(Dn)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;b.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}},Math.floor(1))},t}(),kn=16384,Fn=45e3,Un=null;"undefined"!=typeof MozWebSocket?Un=MozWebSocket:"undefined"!=typeof WebSocket&&(Un=WebSocket);var Wn=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=F(this.connId),this.stats_=on.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={};return r[ht]=lt,!b.isNodeSdk()&&"undefined"!=typeof location&&location.href&&location.href.indexOf(yt)!==-1&&(r[pt]=dt),e&&(r[ft]=e),n&&(r[vt]=n),t.connectionURL(_t,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,O.set("previous_websocket_failure",!0);try{if(b.isNodeSdk()){var i=b.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/"+lt+"/"+S.SDK_VERSION+"/"+r.platform+"/"+i}},a=r.env,s=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new Un(this.connURL,[],o)}else this.mySock=new Un(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Un&&!t.forceDisallow_},t.previouslyFailed=function(){return O.isInMemoryStorage||O.get("previous_websocket_failure")===!0},t.prototype.markConnectionHealthy=function(){O.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=b.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(b.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=X(e,kn);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(Fn))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),qn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Mn,Wn]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=Wn&&Wn.isAvailable(),r=n&&!Wn.previouslyFailed();if(e.webSocketOnly&&(n||q("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Wn];else{var i=this.transports_=[];Z(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),zn=6e4,Bn=5e3,Hn=10240,Qn=102400,Vn="t",Gn="d",Kn="s",Yn="r",Jn="e",Xn="o",Zn="a",$n="n",tr="p",er="h",nr=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=F("c:"+this.id+":"),this.transportManager_=new qn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=st(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>Qn?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>Hn?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(Vn in t){var e=t[Vn];e===Zn?this.upgradeIfSecondaryHealthy_():e===Yn?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===Xn&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Y("t",t),n=Y("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tr,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zn,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$n,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Y("t",t),n=Y("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Y(Vn,t);if(Gn in t){var n=t[Gn];if(e===er)this.onHandshake_(n);else if(e===$n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===Kn?this.onConnectionShutdown_(n):e===Yn?this.onReset_(n):e===Jn?U("Server Error: "+n):e===Xn?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):U("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),lt!==n&&q("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),st(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(zn))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):st(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(Bn))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({
t:"c",d:{t:tr,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(O.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),rr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ir=1e3,or=3e5,ar=3e4,sr=1.3,ur=3e4,cr="server_kill",lr=3,hr=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=e.nextPersistentConnectionId_++,u.log_=F("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=ir,u.maxReconnectDelay_=or,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!b.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),dn.getInstance().on("visible",u.onVisible_,u),n.host.indexOf("fblocal")===-1&&yn.getInstance().on("online",u.onOnline_,u),u}return T.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(b.stringify(i)),b.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),b.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest(s,a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r);var c=n.listens_[i]&&n.listens_[i][o];c===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&b.contains(t,"w")){var n=b.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();q("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+r+" at ")+(i+" to your security rules for better performance."))}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||b.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ar)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=b.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i.q=n,i.t=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){var n=t.s;if("ok"!==n){var r=t.d;e.log_("reportStats","Error sending stats: "+r)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+b.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):U("Unrecognized action received from server: "+b.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;b.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>ur&&(this.reconnectDelay_=ir),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sr)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())},l=function(t){b.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)};this.realtime_={close:c,sendRequest:l};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){s?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new nr(i,o.repoInfo_,t,n,r,function(t){q(t+" ("+o.repoInfo_.toString()+")"),o.interrupt(cr)},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(b.CONSTANTS.NODE_ADMIN&&q(t),c())})}},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],b.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=ir,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return J(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ut(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===b.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lr&&(this.reconnectDelay_=ar,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),b.forEach(this.listens_,function(e,n){b.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";b.CONSTANTS.NODE_ADMIN?e="admin_node":b.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+S.SDK_VERSION.replace(/\./g,"-")]=1,b.isMobileCordova()?t["framework.cordova"]=1:b.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=yn.getInstance().currentlyOnline();return b.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(rr),fr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=F("p:rest:"),i.listens_={},i}return T.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(b.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(t,e){var n=e;if(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),b.safeGet(o.listens_,s)===u){var c;c=t?401==t?"permission_denied":"rest_error:"+t:"ok",i(c,null)}})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?"+b.querystring(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=b.jsonEval(s.responseText)}catch(t){q("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&q("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},e}(rr),pr="repo_interrupt",dr=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Se,this.persistentConnection_=null;var i=new nn(n);if(this.stats_=on.getCollection(t),e||at())this.server_=new fr(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if("undefined"!=typeof o&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{b.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new hr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=on.getOrCreateReporter(t,function(){return new ln(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new en,this.infoSyncTree_=new tn({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new tn({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new ut(".info/serverTimeOffset")),e=t.val()||0;return(new Date).getTime()+e},t.prototype.generateServerValues=function(){return Ce({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ut(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=b.map(e,function(t){return f(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=f(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=b.map(e,function(t){return f(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=f(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),t===!1&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;Z(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new ut("/.info/"+t),r=f(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=f(e,n),s=Oe(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||q("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(b.forEach(e,function(t,e){i=!1;var n=f(e);a[t]=Oe(n,o)}),i)k("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||q("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)}),b.forEach(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=Ie(this.onDisconnect_,e),r=[];n.forEachTree(ut.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Se,this.eventQueue_.raiseEventsForChangedPath(ut.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=f(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=f(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;return b.isEmpty(e)?(k("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok")):void this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&b.forEach(e,function(e,n){var i=f(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(pr)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(pr)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new an(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);b.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),k.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&ot(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Cr(this))},enumerable:!0,configurable:!0}),t}(),yr=function(){function t(e){this.indexedFilter_=new qe(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ht(e,n))||(n=ue.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ue.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ue.EMPTY_NODE);var i=this;return e.forEachChild(Zt,function(t,e){i.matches(new Ht(t,e))||(r=r.updateImmediateChild(t,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),vr=function(){function t(t){this.rangedFilter_=new yr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ht(e,n))||(n=ue.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ue.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ue.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(ue.EMPTY_NODE);var u=void 0,c=void 0,l=void 0,i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();for(var o=0,f=!1;i.hasNext();){var a=i.getNext();!f&&l(u,a)<=0&&(f=!0);var s=f&&o<this.limit_&&l(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;b.assert(s.numChildren()==this.limit_,"");var u=new Ht(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u),d=l&&!n.isEmpty()&&p>=0;if(d)return null!=i&&i.trackChildChange(We.childChangedChange(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(We.childRemovedChange(e,h));var y=s.updateImmediateChild(e,ue.EMPTY_NODE),v=null!=f&&this.rangedFilter_.matches(f);return v?(null!=i&&i.trackChildChange(We.childAddedChange(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(We.childRemovedChange(c.name,c.node)),i.trackChildChange(We.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,ue.EMPTY_NODE)):t},t}(),_r=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Q},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:V},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return b.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Zt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Zt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new qe(this.getIndex()):this.hasLimit()?new vr(this):new yr(this)},t.prototype.toRestQueryStringParameters=function(){var e=t.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===Zt?r=e.PRIORITY_INDEX:this.index_===ye?r=e.VALUE_INDEX:this.index_===Gt?r=e.KEY_INDEX:(b.assert(this.index_ instanceof ve,"Unrecognized index type!"),r=this.index_.toString()),n[e.ORDER_BY]=b.stringify(r),this.startSet_&&(n[e.START_AT]=b.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+b.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=b.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+b.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_),n},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",
LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),gr=function(t){function e(e,n){var r=this;if(!(e instanceof dr))throw new Error("new Reference() no longer supported - use app.database().");return r=t.call(this,e,n,_r.DEFAULT,!1)||this}return T.__extends(e,t),e.prototype.getKey=function(){return b.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return b.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ut||(null===this.path.getFront()?kt("Reference.child",1,t,!1):jt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){b.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){b.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){b.validateArgCount("Reference.set",1,2,arguments.length),Ft("Reference.set",this.path),Rt("Reference.set",1,t,this.path,!1),b.validateCallback("Reference.set",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(b.validateArgCount("Reference.update",1,2,arguments.length),Ft("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,q("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xt("Reference.update",1,t,this.path,!1),b.validateCallback("Reference.update",2,e,!0);var i=new b.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(b.validateArgCount("Reference.setWithPriority",2,3,arguments.length),Ft("Reference.setWithPriority",this.path),Rt("Reference.setWithPriority",1,t,this.path,!1),Dt("Reference.setWithPriority",2,e,!1),b.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new b.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return b.validateArgCount("Reference.remove",0,1,arguments.length),Ft("Reference.remove",this.path),b.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(b.validateArgCount("Reference.transaction",1,3,arguments.length),Ft("Reference.transaction",this.path),b.validateCallback("Reference.transaction",1,t,!1),b.validateCallback("Reference.transaction",2,e,!0),Wt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new b.Deferred;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new zt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){b.validateArgCount("Reference.setPriority",1,2,arguments.length),Ft("Reference.setPriority",this.path),Dt("Reference.setPriority",1,t,!1),b.validateCallback("Reference.setPriority",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){b.validateArgCount("Reference.push",0,2,arguments.length),Ft("Reference.push",this.path),Rt("Reference.push",1,t,this.path,!0),b.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Bt(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return Ft("Reference.onDisconnect",this.path),new qt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(we);we.__referenceConstructor=gr,Je.__referenceConstructor=gr;var mr,Er=function(){function t(){this.children={},this.childCount=0,this.value=null}return t}(),br=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Er),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof ut?e:new ut(e),i=this;null!==(n=r.getFront());){var o=b.safeGet(i.node_.children,n)||new Er;i=new t(n,i,o),r=r.popFront()}return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){b.assert("undefined"!=typeof t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;b.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new ut(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=b.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(mr||(mr={})),dr.MAX_TRANSACTION_RETRIES_=25,dr.prototype.transactions_init_=function(){this.transactionQueueTree_=new br},dr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new gr(this,t);o.on("value",i);var a=function(){o.off("value",i)},s={path:t,update:e,onComplete:n,status:null,order:N(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new _e(s.currentInputSnapshot,new gr(this,s.path),Zt);s.onComplete(null,!1,l)}}else{Pt("transaction failed: Data returned ",c,s.path),s.status=mr.RUN;var h=this.transactionQueueTree_.subTree(t),p=h.getValue()||[];p.push(s),h.setValue(p);var d=void 0;if("object"==typeof c&&null!==c&&b.contains(c,".priority"))d=b.safeGet(c,".priority"),b.assert(Ot(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var y=this.serverSyncTree_.calcCompleteEventCache(t)||ue.EMPTY_NODE;d=y.getPriority().val()}d=d;var v=this.generateServerValues(),_=f(c,d),g=Oe(_,v);s.currentOutputSnapshotRaw=_,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},dr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ue.EMPTY_NODE},dr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);b.assert(n.length>0,"Sending zero length transaction queue");var r=n.every(function(t){return t.status===mr.RUN});r&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},dr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];b.assert(u.status===mr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=mr.SENT,u.retryCount++;var c=ut.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=mr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new gr(n,e[a].path),c=new _e(s,u,Zt);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(var a=0;a<o.length;a++)ot(o[a])}else{if("datastale"===r)for(var a=0;a<e.length;a++)e[a].status===mr.SENT_NEEDS_ABORT?e[a].status=mr.NEEDS_ABORT:e[a].status=mr.RUN;else{q("transaction at "+h.toString()+" failed: "+r);for(var a=0;a<e.length;a++)e[a].status=mr.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}},a)},dr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},dr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===mr.RUN}),o=i.map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],u=ut.relativePath(e,s.path),c=!1,l=void 0;if(b.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===mr.NEEDS_ABORT)c=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===mr.RUN)if(s.retryCount>=dr.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var p=t[a].update(h.val());if(void 0!==p){Pt("transaction failed: Data returned ",p,s.path);var d=f(p),y="object"==typeof p&&null!=p&&b.contains(p,".priority");y||(d=d.updatePriority(h.getPriority()));var v=s.currentWriteId,_=this.generateServerValues(),g=Oe(d,_);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(v),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,g,s.currentWriteId,s.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(v,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[a].status=mr.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[a].unwatcher),t[a].onComplete))if("nodata"===l){var m=new gr(this,t[a].path),E=t[a].currentInputSnapshot,w=new _e(E,m,Zt);n.push(t[a].onComplete.bind(null,null,!1,w))}else n.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var a=0;a<n.length;a++)ot(n[a]);this.sendReadyTransactions_()}},dr.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},dr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},dr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},dr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==mr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},dr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},dr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===mr.SENT_NEEDS_ABORT);else if(e[o].status===mr.SENT)b.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=mr.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(b.assert(e[o].status===mr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){var a=null;n.push(e[o].onComplete.bind(null,new Error("set"),!1,a))}i===-1?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(var o=0;o<n.length;o++)ot(n[o])}};var wr,Tr="databaseURL",Sr=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return wr||(wr=new t),wr},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options[Tr];void 0===n&&W("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=Et(n),i=r.repoInfo;Ut("Invalid Firebase Database URL",1,r),r.path.isEmpty()||W("Database URL must point to the root of a Firebase Database (not including a child path).");var o=this.createRepo(i,t);return o.database},t.prototype.deleteRepo=function(t){var e=b.safeGet(this.repos_,t.app.name);e&&b.safeGet(e,t.repoInfo_.toURLString())===t||W("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=b.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=b.safeGet(n,t.toURLString());return r&&W("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new dr(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Cr=function(){function t(t){this.repo_=t,t instanceof dr||W("Don't call new Database() directly - please use firebase.database()."),this.root_=new gr(t,ut.Empty),this.INTERNAL=new Ar(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),b.validateArgCount("database.ref",0,1,arguments.length),t instanceof gr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),b.validateArgCount(e,1,1,arguments.length);var n=Et(t);Ut(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&W(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&W("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){b.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){b.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),Ar=function(){function t(t){this.database=t}return t.prototype.delete=function(){return T.__awaiter(this,void 0,void 0,function(){return T.__generator(this,function(t){return this.database.checkDeleted_("delete"),Sr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),Ir=function(){Wn.forceDisallow(),Mn.forceAllow()},Or=function(){Mn.forceDisallow()},Rr=function(){return Wn.isAvailable()},Pr=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},Nr=function(t,e){t.repo.stats(e)},xr=function(t,e){t.repo.statsIncrementCounter(e)},Dr=function(t){return t.repo.dataUpdateCount},Lr=function(t,e){return t.repo.interceptServerData_(e)},Mr=Object.freeze({forceLongPolling:Ir,forceWebSockets:Or,isWebSocketsAvailable:Rr,setSecurityDebugCallback:Pr,stats:Nr,statsIncrementCounter:xr,dataUpdateCount:Dr,interceptServerData:Lr}),jr=hr;hr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},hr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var kr=nr,Fr=function(t){var e=hr.prototype.put;return hr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){hr.prototype.put=e}},Ur=mt,Wr=function(t){return t.queryIdentifier()},qr=function(t){return t.repo.persistentConnection_.listens_},zr=function(t){Sr.getInstance().forceRestClient(t)},Br=Object.freeze({DataConnection:jr,RealTimeConnection:kr,hijackHash:Fr,ConnectionTarget:Ur,queryIdentifier:Wr,listens:qr,forceRestClient:zr}),Hr=Cr.ServerValue;p(S),e.registerDatabase=p,e.Database=Cr,e.Query=we,e.Reference=gr,e.enableLogging=j,e.ServerValue=Hr,e.DataSnapshot=_e,e.OnDisconnect=qt}).call(e,n(36))},382:function(t,e){"use strict";function n(t){r.forEach(function(e){e.logLevel=t})}Object.defineProperty(e,"__esModule",{value:!0});var r=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(e.LogLevel||(e.LogLevel={}));var i=e.LogLevel.INFO,o=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(n<t.logLevel)){var o=(new Date).toISOString();switch(n){case e.LogLevel.DEBUG:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+n+")")}}},a=function(){function t(t){this.name=t,this._logLevel=i,this._logHandler=o,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in e.LogLevel))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.WARN].concat(t))},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.ERROR].concat(t))},t}();e.setLogLevel=n,e.Logger=a},383:function(t,e,n){(function(t,e){"use strict";function r(){}function i(t,e){return function(){t.apply(e,arguments)}}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?s:u)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void h(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}function f(t,e){return e={exports:{}},t(e,e.exports),e.exports}n(544);var p=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return a(this,new l(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}i[t]=a,0===--o&&e(i)}catch(t){n(t)}}if(!t||"undefined"==typeof t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){p(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var d=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof e)return e;throw new Error("unable to locate global object")}();d.Promise||(d.Promise=o);var y=f(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=f(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),_=(v.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),g=function(t){if(!_(t))throw TypeError(t+" is not an object!");return t},m=function(t){try{return!!t()}catch(t){return!0}},E=!m(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=y.document,w=_(b)&&_(b.createElement),T=function(t){return w?b.createElement(t):{}},S=!E&&!m(function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a}),C=function(t,e){if(!_(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!_(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},A=Object.defineProperty,I=E?Object.defineProperty:function(t,e,n){if(g(t),e=C(e,!0),g(n),S)try{return A(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},O={f:I},R=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},P=E?function(t,e,n){return O.f(t,e,R(1,n))}:function(t,e,n){return t[e]=n,t},N={}.hasOwnProperty,x=function(t,e){return N.call(t,e)},D=0,L=Math.random(),M=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++D+L).toString(36))},j=f(function(t){var e=M("src"),n="toString",r=Function[n],i=(""+r).split(n);v.inspectSource=function(t){return r.call(t)},(t.exports=function(t,n,r,o){var a="function"==typeof r;a&&(x(r,"name")||P(r,"name",n)),t[n]!==r&&(a&&(x(r,e)||P(r,e,t[n]?""+t[n]:i.join(String(n)))),t===y?t[n]=r:o?t[n]?t[n]=r:P(t,n,r):(delete t[n],P(t,n,r)))})(Function.prototype,n,function(){return"function"==typeof this&&this[e]||r.call(this)})}),k=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},F=function(t,e,n){if(k(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},U="prototype",W=function(t,e,n){var r,i,o,a,s=t&W.F,u=t&W.G,c=t&W.S,l=t&W.P,h=t&W.B,f=u?y:c?y[e]||(y[e]={}):(y[e]||{})[U],p=u?v:v[e]||(v[e]={}),d=p[U]||(p[U]={});u&&(n=e);for(r in n)i=!s&&f&&void 0!==f[r],o=(i?f:n)[r],a=h&&i?F(o,y):l&&"function"==typeof o?F(Function.call,o):o,f&&j(f,r,o,t&W.U),p[r]!=o&&P(p,r,a),l&&d[r]!=o&&(d[r]=o)};y.core=v,W.F=1,W.G=2,W.S=4,W.P=8,W.B=16,W.W=32,W.U=64,W.R=128;var q=W,z={}.toString,B=function(t){return z.call(t).slice(8,-1)},H=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},Q=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},V=function(t){return Object(Q(t))},G=Math.ceil,K=Math.floor,Y=function(t){return isNaN(t=+t)?0:(t>0?K:G)(t)},J=Math.min,X=function(t){return t>0?J(Y(t),9007199254740991):0},Z=Array.isArray||function(t){return"Array"==B(t)},$="__core-js_shared__",tt=y[$]||(y[$]={}),et=function(t){return tt[t]||(tt[t]={})},nt=f(function(t){var e=et("wks"),n=y.Symbol,r="function"==typeof n,i=t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:M)("Symbol."+t))};i.store=e}),rt=nt("species"),it=function(t){var e;return Z(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!Z(e.prototype)||(e=void 0),_(e)&&(e=e[rt],null===e&&(e=void 0))),void 0===e?Array:e},ot=function(t,e){return new(it(t))(e)},at=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||ot;return function(e,c,l){for(var h,f,p=V(e),d=H(p),y=F(c,l,3),v=X(d.length),_=0,g=n?u(e,v):r?u(e,0):void 0;v>_;_++)if((s||_ in d)&&(h=d[_],f=y(h,_,p),t))if(n)g[_]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return _;case 2:g.push(h)}else if(o)return!1;return a?-1:i||o?o:g}},st=nt("unscopables"),ut=Array.prototype;void 0==ut[st]&&P(ut,st,{});var ct=function(t){ut[st][t]=!0},lt=at(5),ht="find",ft=!0;ht in[]&&Array(1)[ht](function(){ft=!1}),q(q.P+q.F*ft,"Array",{find:function(t){return lt(this,t,arguments.length>1?arguments[1]:void 0)}}),ct(ht);var pt=(v.Array.find,at(6)),dt="findIndex",yt=!0;dt in[]&&Array(1)[dt](function(){yt=!1}),q(q.P+q.F*yt,"Array",{findIndex:function(t){return pt(this,t,arguments.length>1?arguments[1]:void 0)}}),ct(dt);var vt=(v.Array.findIndex,function(t){return H(Q(t))}),_t=Math.max,gt=Math.min,mt=function(t,e){return t=Y(t),t<0?_t(t+e,0):gt(t,e)},Et=function(t){return function(e,n,r){var i,o=vt(e),a=X(o.length),s=mt(r,a);if(t&&n!=n){for(;a>s;)if(i=o[s++],i!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},bt=et("keys"),wt=function(t){return bt[t]||(bt[t]=M(t))},Tt=Et(!1),St=wt("IE_PROTO"),Ct=function(t,e){var n,r=vt(t),i=0,o=[];for(n in r)n!=St&&x(r,n)&&o.push(n);for(;e.length>i;)x(r,n=e[i++])&&(~Tt(o,n)||o.push(n));return o},At="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),It=Object.keys||function(t){return Ct(t,At)},Ot=Object.getOwnPropertySymbols,Rt={f:Ot},Pt={}.propertyIsEnumerable,Nt={f:Pt},xt=Object.assign,Dt=!xt||m(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=xt({},t)[n]||Object.keys(xt({},e)).join("")!=r})?function(t,e){for(var n=V(t),r=arguments.length,i=1,o=Rt.f,a=Nt.f;r>i;)for(var s,u=H(arguments[i++]),c=o?It(u).concat(o(u)):It(u),l=c.length,h=0;l>h;)a.call(u,s=c[h++])&&(n[s]=u[s]);return n}:xt;q(q.S+q.F,"Object",{assign:Dt});var Lt=(v.Object.assign,nt("match")),Mt=function(t){var e;return _(t)&&(void 0!==(e=t[Lt])?!!e:"RegExp"==B(t))},jt=function(t,e,n){if(Mt(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(Q(t))},kt=nt("match"),Ft=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[kt]=!1,!"/./"[t](e)}catch(t){}}return!0},Ut="startsWith",Wt=""[Ut];q(q.P+q.F*Ft(Ut),"String",{startsWith:function(t){var e=jt(this,t,Ut),n=X(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Wt?Wt.call(e,r,n):e.slice(n,n+r.length)===r}});var qt=(v.String.startsWith,function(t){var e=String(Q(this)),n="",r=Y(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n});q(q.P,"String",{repeat:qt});var zt=(v.String.repeat,f(function(t){var e=M("meta"),n=O.f,r=0,i=Object.isExtensible||function(){return!0},o=!m(function(){return i(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},s=function(t,n){if(!_(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!x(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},u=function(t,n){if(!x(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},c=function(t){return o&&l.NEED&&i(t)&&!x(t,e)&&a(t),t},l=t.exports={KEY:e,NEED:!1,fastKey:s,getWeak:u,onFreeze:c}})),Bt=(zt.KEY,zt.NEED,zt.fastKey,zt.getWeak,zt.onFreeze,O.f),Ht=nt("toStringTag"),Qt=function(t,e,n){t&&!x(t=n?t:t.prototype,Ht)&&Bt(t,Ht,{configurable:!0,value:e})},Vt=nt,Gt={f:Vt},Kt=!1,Yt=O.f,Jt=function(t){var e=v.Symbol||(v.Symbol=Kt?{}:y.Symbol||{});"_"==t.charAt(0)||t in e||Yt(e,t,{value:Gt.f(t)})},Xt=function(t){var e=It(t),n=Rt.f;if(n)for(var r,i=n(t),o=Nt.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e},Zt=E?Object.defineProperties:function(t,e){g(t);for(var n,r=It(e),i=r.length,o=0;i>o;)O.f(t,n=r[o++],e[n]);return t},$t=y.document,te=$t&&$t.documentElement,ee=wt("IE_PROTO"),ne=function(){},re="prototype",ie=function(){
var t,e=T("iframe"),n=At.length,r="<",i=">";for(e.style.display="none",te.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+i+"document.F=Object"+r+"/script"+i),t.close(),ie=t.F;n--;)delete ie[re][At[n]];return ie()},oe=Object.create||function(t,e){var n;return null!==t?(ne[re]=g(t),n=new ne,ne[re]=null,n[ee]=t):n=ie(),void 0===e?n:Zt(n,e)},ae=At.concat("length","prototype"),se=Object.getOwnPropertyNames||function(t){return Ct(t,ae)},ue={f:se},ce=ue.f,le={}.toString,he="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],fe=function(t){try{return ce(t)}catch(t){return he.slice()}},pe=function(t){return he&&"[object Window]"==le.call(t)?fe(t):ce(vt(t))},de={f:pe},ye=Object.getOwnPropertyDescriptor,ve=E?ye:function(t,e){if(t=vt(t),e=C(e,!0),S)try{return ye(t,e)}catch(t){}if(x(t,e))return R(!Nt.f.call(t,e),t[e])},_e={f:ve},ge=zt.KEY,me=_e.f,Ee=O.f,be=de.f,we=y.Symbol,Te=y.JSON,Se=Te&&Te.stringify,Ce="prototype",Ae=nt("_hidden"),Ie=nt("toPrimitive"),Oe={}.propertyIsEnumerable,Re=et("symbol-registry"),Pe=et("symbols"),Ne=et("op-symbols"),xe=Object[Ce],De="function"==typeof we,Le=y.QObject,Me=!Le||!Le[Ce]||!Le[Ce].findChild,je=E&&m(function(){return 7!=oe(Ee({},"a",{get:function(){return Ee(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=me(xe,e);r&&delete xe[e],Ee(t,e,n),r&&t!==xe&&Ee(xe,e,r)}:Ee,ke=function(t){var e=Pe[t]=oe(we[Ce]);return e._k=t,e},Fe=De&&"symbol"==typeof we.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof we},Ue=function(t,e,n){return t===xe&&Ue(Ne,e,n),g(t),e=C(e,!0),g(n),x(Pe,e)?(n.enumerable?(x(t,Ae)&&t[Ae][e]&&(t[Ae][e]=!1),n=oe(n,{enumerable:R(0,!1)})):(x(t,Ae)||Ee(t,Ae,R(1,{})),t[Ae][e]=!0),je(t,e,n)):Ee(t,e,n)},We=function(t,e){g(t);for(var n,r=Xt(e=vt(e)),i=0,o=r.length;o>i;)Ue(t,n=r[i++],e[n]);return t},qe=function(t,e){return void 0===e?oe(t):We(oe(t),e)},ze=function(t){var e=Oe.call(this,t=C(t,!0));return!(this===xe&&x(Pe,t)&&!x(Ne,t))&&(!(e||!x(this,t)||!x(Pe,t)||x(this,Ae)&&this[Ae][t])||e)},Be=function(t,e){if(t=vt(t),e=C(e,!0),t!==xe||!x(Pe,e)||x(Ne,e)){var n=me(t,e);return!n||!x(Pe,e)||x(t,Ae)&&t[Ae][e]||(n.enumerable=!0),n}},He=function(t){for(var e,n=be(vt(t)),r=[],i=0;n.length>i;)x(Pe,e=n[i++])||e==Ae||e==ge||r.push(e);return r},Qe=function(t){for(var e,n=t===xe,r=be(n?Ne:vt(t)),i=[],o=0;r.length>o;)!x(Pe,e=r[o++])||n&&!x(xe,e)||i.push(Pe[e]);return i};De||(we=function(){if(this instanceof we)throw TypeError("Symbol is not a constructor!");var t=M(arguments.length>0?arguments[0]:void 0),e=function(n){this===xe&&e.call(Ne,n),x(this,Ae)&&x(this[Ae],t)&&(this[Ae][t]=!1),je(this,t,R(1,n))};return E&&Me&&je(xe,t,{configurable:!0,set:e}),ke(t)},j(we[Ce],"toString",function(){return this._k}),_e.f=Be,O.f=Ue,ue.f=de.f=He,Nt.f=ze,Rt.f=Qe,E&&!Kt&&j(xe,"propertyIsEnumerable",ze,!0),Gt.f=function(t){return ke(nt(t))}),q(q.G+q.W+q.F*!De,{Symbol:we});for(var Ve="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ge=0;Ve.length>Ge;)nt(Ve[Ge++]);for(var Ke=It(nt.store),Ye=0;Ke.length>Ye;)Jt(Ke[Ye++]);q(q.S+q.F*!De,"Symbol",{for:function(t){return x(Re,t+="")?Re[t]:Re[t]=we(t)},keyFor:function(t){if(!Fe(t))throw TypeError(t+" is not a symbol!");for(var e in Re)if(Re[e]===t)return e},useSetter:function(){Me=!0},useSimple:function(){Me=!1}}),q(q.S+q.F*!De,"Object",{create:qe,defineProperty:Ue,defineProperties:We,getOwnPropertyDescriptor:Be,getOwnPropertyNames:He,getOwnPropertySymbols:Qe}),Te&&q(q.S+q.F*(!De||m(function(){var t=we();return"[null]"!=Se([t])||"{}"!=Se({a:t})||"{}"!=Se(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!Fe(t))return Z(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Fe(e))return e}),r[1]=e,Se.apply(Te,r)}}),we[Ce][Ie]||P(we[Ce],Ie,we[Ce].valueOf),Qt(we,"Symbol"),Qt(Math,"Math",!0),Qt(y.JSON,"JSON",!0);var Je=nt("toStringTag"),Xe="Arguments"==B(function(){return arguments}()),Ze=function(t,e){try{return t[e]}catch(t){}},$e=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=Ze(e=Object(t),Je))?n:Xe?B(e):"Object"==(r=B(e))&&"function"==typeof e.callee?"Arguments":r},tn={};tn[nt("toStringTag")]="z",tn+""!="[object z]"&&j(Object.prototype,"toString",function(){return"[object "+$e(this)+"]"},!0),Jt("asyncIterator"),Jt("observable");var en=(v.Symbol,function(t){return function(e,n){var r,i,o=String(Q(e)),a=Y(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a),r<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):(r-55296<<10)+(i-56320)+65536)}}),nn={},rn={};P(rn,nt("iterator"),function(){return this});var on=function(t,e,n){t.prototype=oe(rn,{next:R(1,n)}),Qt(t,e+" Iterator")},an=wt("IE_PROTO"),sn=Object.prototype,un=Object.getPrototypeOf||function(t){return t=V(t),x(t,an)?t[an]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?sn:null},cn=nt("iterator"),ln=!([].keys&&"next"in[].keys()),hn="@@iterator",fn="keys",pn="values",dn=function(){return this},yn=function(t,e,n,r,i,o,a){on(n,e,r);var s,u,c,l=function(t){if(!ln&&t in d)return d[t];switch(t){case fn:return function(){return new n(this,t)};case pn:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f=i==pn,p=!1,d=t.prototype,y=d[cn]||d[hn]||i&&d[i],v=y||l(i),_=i?f?l("entries"):v:void 0,g="Array"==e?d.entries||y:y;if(g&&(c=un(g.call(new t)),c!==Object.prototype&&c.next&&(Qt(c,h,!0),Kt||"function"==typeof c[cn]||P(c,cn,dn))),f&&y&&y.name!==pn&&(p=!0,v=function(){return y.call(this)}),Kt&&!a||!ln&&!p&&d[cn]||P(d,cn,v),nn[e]=v,nn[h]=dn,i)if(s={values:f?v:l(pn),keys:o?v:l(fn),entries:_},a)for(u in s)u in d||j(d,u,s[u]);else q(q.P+q.F*(ln||p),e,s);return s},vn=en(!0);yn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=vn(e,n),this._i+=t.length,{value:t,done:!1})});var _n=function(t,e){return{value:e,done:!!t}},gn=yn(Array,"Array",function(t,e){this._t=vt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,_n(1)):"keys"==e?_n(0,n):"values"==e?_n(0,t[n]):_n(0,[n,t[n]])},"values");nn.Arguments=nn.Array,ct("keys"),ct("values"),ct("entries");for(var mn=nt("iterator"),En=nt("toStringTag"),bn=nn.Array,wn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Tn=It(wn),Sn=0;Sn<Tn.length;Sn++){var Cn,An=Tn[Sn],In=wn[An],On=y[An],Rn=On&&On.prototype;if(Rn&&(Rn[mn]||P(Rn,mn,bn),Rn[En]||P(Rn,En,An),nn[An]=bn,In))for(Cn in gn)Rn[Cn]||j(Rn,Cn,gn[Cn],!0)}Gt.f("iterator")}).call(e,n(378).setImmediate,function(){return this}())},188:function(t,e,n){"use strict";function r(t){return i(void 0,t)}function i(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=i(t[r],e[r]));return t}function o(t,e,n){t[e]=n}function a(t){var e=x;return x=t,e}function s(t){return JSON.parse(t)}function u(t){return JSON.stringify(t)}function c(t,e){var n=new it(t,e);return n.subscribe.bind(n)}function l(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function h(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}function f(){}function p(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function d(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(p(t,e,r)+"must be a valid firebase namespace.")}function y(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(p(t,e,r)+"must be a valid function.")}function v(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(p(t,e,r)+"must be a valid context object.")}Object.defineProperty(e,"__esModule",{value:!0});var _=n(184),g={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},m=function(t,e){if(!t)throw E(e)},E=function(t){return new Error("Firebase Database ("+g.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},b=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},w=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=t[n++],a=t[n++],s=t[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{var o=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")},T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length,s=a?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var l=i<t.length,h=l?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!=c){var p=s<<4&240|c>>2;if(r.push(p),64!=h){var d=c<<6&192|h;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},S=function(t){var e=b(t);return T.encodeByteArray(e,!0)},C=function(t){try{return T.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},A=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),I=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},O=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())},R=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},P=function(){return g.NODE_CLIENT===!0||g.NODE_ADMIN===!0},N="FirebaseError",x=Error.captureStackTrace,D=function(){function t(t,e){if(this.code=t,this.message=e,x)x(this,L.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=N,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}return t}();D.prototype=Object.create(Error.prototype),D.prototype.constructor=D,D.prototype.name=N;var L=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new D(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}(),M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=s(C(o[0])||""),n=s(C(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e,n,r=M(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},k=function(t){var e=M(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},F=function(t){var e=M(t),n=e.claims;return!!e.signature&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},U=function(t){var e=M(t).claims;return"object"==typeof e&&e.admin===!0},W=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},q=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},z=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},B=function(t,e){return z(e,function(e,n){t[e]=n}),t},H=function(t){return B({},t)},Q=function(t){return"object"==typeof t&&null!==t},V=function(t){for(var e in t)return!1;return!0},G=function(t){var e=0;for(var n in t)e++;return e},K=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},Y=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},J=function(t,e,n){var r=Y(t,e,n);return r&&t[r]},X=function(t){for(var e in t)return e},Z=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},$=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},tt=function(t){var e=[];return z(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},et=function(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},nt=function(){function t(){this.blockSize=-1}return t}(),rt=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return _.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);var i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(nt),it=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=h(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=f),void 0===r.error&&(r.error=f),void 0===r.complete&&(r.complete=f);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),ot=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},at=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");var a=t.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},st=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};e.assert=m,e.assertionError=E,e.base64=T,e.base64Decode=C,e.base64Encode=S,e.CONSTANTS=g,e.deepCopy=r,e.deepExtend=i,e.patchProperty=o,e.Deferred=A,e.getUA=I,e.isMobileCordova=O,e.isNodeSdk=P,e.isReactNative=R,e.ErrorFactory=L,e.FirebaseError=D,e.patchCapture=a,e.jsonEval=s,e.stringify=u,e.decode=M,e.isAdmin=U,e.issuedAtTime=k,e.isValidFormat=F,e.isValidTimestamp=j,e.clone=H,e.contains=W,e.every=$,e.extend=B,e.findKey=Y,e.findValue=J,e.forEach=z,e.getAnyKey=X,e.getCount=G,e.getValues=Z,e.isEmpty=V,e.isNonNullObject=Q,e.map=K,e.safeGet=q,e.querystring=tt,e.querystringDecode=et,e.Sha1=rt,e.async=l,e.createSubscribe=c,e.errorPrefix=p,e.validateArgCount=ot,e.validateCallback=y,e.validateContextObject=v,e.validateNamespace=d,e.stringLength=st,e.stringToByteArray=at},873:function(t,e,n){function r(t){return null===t||void 0===t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function o(t,e,n){var o,l;if(r(t)||r(e))return!1;if(t.prototype!==e.prototype)return!1;if(u(t))return!!u(e)&&(t=a.call(t),e=a.call(e),c(t,e,n));if(i(t)){if(!i(e))return!1;if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}try{var h=s(t),f=s(e)}catch(t){return!1}if(h.length!=f.length)return!1;for(h.sort(),f.sort(),o=h.length-1;o>=0;o--)if(h[o]!=f[o])return!1;for(o=h.length-1;o>=0;o--)if(l=h[o],!c(t[l],e[l],n))return!1;return typeof t==typeof e}var a=Array.prototype.slice,s=n(875),u=n(874),c=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:o(t,e,n))}},874:function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=i?n:r,e.supported=n,e.unsupported=r},875:function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n},429:function(t,e,n){var r;!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};r=function(){return o}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}()},431:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}n(383);var i=r(n(187));t.exports=i},432:function(t,e,n){"use strict";n(381)},103:function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:R(t)}function n(t){return a(t)?t:P(t)}function r(t){return s(t)?t:N(t)}function i(t){return o(t)&&!u(t)?t:x(t)}function o(t){return!(!t||!t[cn])}function a(t){return!(!t||!t[ln])}function s(t){return!(!t||!t[hn])}function u(t){return a(t)||s(t)}function c(t){return!(!t||!t[fn])}function l(t){return t.value=!1,t}function h(t){t&&(t.value=!0)}function f(){}function p(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function d(t){return void 0===t.size&&(t.size=t.__iterate(v)),t.size}function y(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?d(t)+e:e}function v(){return!0}function _(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function g(t,e){return E(t,e,0)}function m(t,e){return E(t,e,e)}function E(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function b(t){this.next=t}function w(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function T(){return{value:void 0,done:!0}}function S(t){return!!I(t)}function C(t){return t&&"function"==typeof t.next}function A(t){var e=I(t);return e&&e.call(t)}function I(t){var e=t&&(Tn&&t[Tn]||t[Sn]);if("function"==typeof e)return e}function O(t){return t&&"number"==typeof t.length}function R(t){return null===t||void 0===t?F():o(t)?t.toSeq():q(t)}function P(t){return null===t||void 0===t?F().toKeyedSeq():o(t)?a(t)?t.toSeq():t.fromEntrySeq():U(t)}function N(t){return null===t||void 0===t?F():o(t)?a(t)?t.entrySeq():t.toIndexedSeq():W(t)}function x(t){return(null===t||void 0===t?F():o(t)?a(t)?t.entrySeq():t:W(t)).toSetSeq()}function D(t){this._array=t,this.size=t.length}function L(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function M(t){this._iterable=t,this.size=t.length||t.size}function j(t){this._iterator=t,this._iteratorCache=[]}function k(t){return!(!t||!t[An])}function F(){return In||(In=new D([]))}function U(t){var e=Array.isArray(t)?new D(t).fromEntrySeq():C(t)?new j(t).fromEntrySeq():S(t)?new M(t).fromEntrySeq():"object"==typeof t?new L(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function W(t){var e=z(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function q(t){var e=z(t)||"object"==typeof t&&new L(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function z(t){return O(t)?new D(t):C(t)?new j(t):S(t)?new M(t):void 0}function B(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var s=i[n?o-a:a];if(e(s[1],r?s[0]:a,t)===!1)return a+1}return a}return t.__iterateUncached(e,n)}function H(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,a=0;return new b(function(){var t=i[n?o-a:a];return a++>o?T():w(e,r?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,n)}function Q(t,e){return e?V(e,t,"",{"":t}):G(t)}function V(t,e,n,r){return Array.isArray(e)?t.call(r,n,N(e).map(function(n,r){return V(t,n,r,e)})):K(e)?t.call(r,n,P(e).map(function(n,r){return V(t,n,r,e)})):e}function G(t){return Array.isArray(t)?N(t).map(G).toList():K(t)?P(t).map(G).toMap():t}function K(t){return t&&(t.constructor===Object||void 0===t.constructor)}function Y(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function J(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||s(t)!==s(e)||c(t)!==c(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(c(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&Y(i[1],t)&&(n||Y(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var l=t;t=e,e=l}var h=!0,f=e.__iterate(function(e,r){if(n?!t.has(e):i?!Y(e,t.get(r,_n)):!Y(t.get(r,_n),e))return h=!1,!1});return h&&t.size===f}function X(t,e){if(!(this instanceof X))return new X(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(On)return On;On=this}}function Z(t,e){if(!t)throw new Error(e)}function $(t,e,n){if(!(this instanceof $))return new $(t,e,n);if(Z(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(Rn)return Rn;Rn=this}}function tt(){throw TypeError("Abstract")}function et(){}function nt(){}function rt(){}function it(t){return t>>>1&1073741824|3221225471&t}function ot(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return it(n)}if("string"===e)return t.length>kn?at(t):st(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return ut(t);if("function"==typeof t.toString)return st(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function at(t){var e=Wn[t];return void 0===e&&(e=st(t),Un===Fn&&(Un=0,Wn={}),Un++,Wn[t]=e),e}function st(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return it(e)}function ut(t){var e;if(Ln&&(e=Pn.get(t),void 0!==e))return e;if(e=t[jn],void 0!==e)return e;if(!Dn){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[jn],void 0!==e)return e;if(e=ct(t),void 0!==e)return e}if(e=++Mn,1073741824&Mn&&(Mn=0),Ln)Pn.set(t,e);else{if(void 0!==xn&&xn(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Dn)Object.defineProperty(t,jn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[jn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[jn]=e}}return e}function ct(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function lt(t){Z(t!==1/0,"Cannot perform this action with an infinite size.")}function ht(t){return null===t||void 0===t?wt():ft(t)&&!c(t)?t:wt().withMutations(function(e){var r=n(t);lt(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function ft(t){return!(!t||!t[qn])}function pt(t,e){this.ownerID=t,this.entries=e}function dt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function yt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function vt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function _t(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function gt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Et(t._root)}function mt(t,e){return w(t,e[0],e[1])}function Et(t,e){return{node:t,index:0,__prev:e}}function bt(t,e,n,r){var i=Object.create(zn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function wt(){return Bn||(Bn=bt(0))}function Tt(t,e,n){var r,i;if(t._root){var o=l(gn),a=l(mn);if(r=St(t._root,t.__ownerID,0,void 0,e,n,o,a),!a.value)return t;i=t.size+(o.value?n===_n?-1:1:0)}else{if(n===_n)return t;i=1,r=new pt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?bt(i,r):wt()}function St(t,e,n,r,i,o,a,s){return t?t.update(e,n,r,i,o,a,s):o===_n?t:(h(s),h(a),new _t(e,r,[i,o]))}function Ct(t){return t.constructor===_t||t.constructor===vt}function At(t,e,n,r,i){if(t.keyHash===r)return new vt(e,r,[t.entry,i]);var o,a=(0===n?t.keyHash:t.keyHash>>>n)&vn,s=(0===n?r:r>>>n)&vn,u=a===s?[At(t,e,n+dn,r,i)]:(o=new _t(e,r,i),a<s?[t,o]:[o,t]);return new dt(e,1<<a|1<<s,u)}function It(t,e,n,r){t||(t=new f);for(var i=new _t(t,ot(n),[n,r]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}function Ot(t,e,n,r){for(var i=0,o=0,a=new Array(n),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];void 0!==l&&s!==r&&(i|=u,a[o++]=l)}return new dt(t,i,a)}function Rt(t,e,n,r,i){for(var o=0,a=new Array(yn),s=0;0!==n;s++,n>>>=1)a[s]=1&n?e[o++]:void 0;return a[r]=i,new yt(t,o+1,a)}function Pt(t,e,r){for(var i=[],a=0;a<r.length;a++){var s=r[a],u=n(s);o(s)||(u=u.map(function(t){return Q(t)})),i.push(u)}return Dt(t,e,i)}function Nt(t,e,n){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):Y(t,e)?t:e}function xt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&o(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return Y(e,i)?e:i}}function Dt(t,e,n){return n=n.filter(function(t){
return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,_n,function(t){return t===_n?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function Lt(t,e,n,r){var i=t===_n,o=e.next();if(o.done){var a=i?n:t,s=r(a);return s===a?t:s}Z(i||t&&t.set,"invalid keyPath");var u=o.value,c=i?_n:t.get(u,_n),l=Lt(c,e,n,r);return l===c?t:l===_n?t.remove(u):(i?wt():t).set(u,l)}function Mt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function jt(t,e,n,r){var i=r?t:p(t);return i[e]=n,i}function kt(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=n,a=-1):o[s]=t[s+a];return o}function Ft(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}function Ut(t){var e=Ht();if(null===t||void 0===t)return e;if(Wt(t))return t;var n=r(t),i=n.size;return 0===i?e:(lt(i),i>0&&i<yn?Bt(0,i,dn,null,new qt(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function Wt(t){return!(!t||!t[Gn])}function qt(t,e){this.array=t,this.ownerID=e}function zt(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===s?u&&u.array:t&&t.array,i=n>o?0:o-n,c=a-n;return c>yn&&(c=yn),function(){if(i===c)return Jn;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var s,u=t&&t.array,c=i>o?0:o-i>>r,l=(a-i>>r)+1;return l>yn&&(l=yn),function(){for(;;){if(s){var t=s();if(t!==Jn)return t;s=null}if(c===l)return Jn;var o=e?--l:c++;s=n(u&&u[o],r-dn,i+(o<<r))}}}var o=t._origin,a=t._capacity,s=Xt(a),u=t._tail;return n(t._root,t._level,0)}function Bt(t,e,n,r,i,o,a){var s=Object.create(Kn);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Ht(){return Yn||(Yn=Bt(0,0,dn))}function Qt(t,e,n){if(e=y(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Yt(t,e).set(0,n):Yt(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o=l(mn);return e>=Xt(t._capacity)?r=Vt(r,t.__ownerID,0,e,n,o):i=Vt(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Bt(t._origin,t._capacity,t._level,i,r):t}function Vt(t,e,n,r,i,o){var a=r>>>n&vn,s=t&&a<t.array.length;if(!s&&void 0===i)return t;var u;if(n>0){var c=t&&t.array[a],l=Vt(c,e,n-dn,r,i,o);return l===c?t:(u=Gt(t,e),u.array[a]=l,u)}return s&&t.array[a]===i?t:(h(o),u=Gt(t,e),void 0===i&&a===u.array.length-1?u.array.pop():u.array[a]=i,u)}function Gt(t,e){return e&&t&&e===t.ownerID?t:new qt(t?t.array.slice():[],e)}function Kt(t,e){if(e>=Xt(t._capacity))return t._tail;if(e<1<<t._level+dn){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&vn],r-=dn;return n}}function Yt(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new f,i=t._origin,o=t._capacity,a=i+e,s=void 0===n?o:n<0?o+n:i+n;if(a===i&&s===o)return t;if(a>=s)return t.clear();for(var u=t._level,c=t._root,l=0;a+l<0;)c=new qt(c&&c.array.length?[void 0,c]:[],r),u+=dn,l+=1<<u;l&&(a+=l,i+=l,s+=l,o+=l);for(var h=Xt(o),p=Xt(s);p>=1<<u+dn;)c=new qt(c&&c.array.length?[c]:[],r),u+=dn;var d=t._tail,y=p<h?Kt(t,s-1):p>h?new qt([],r):d;if(d&&p>h&&a<o&&d.array.length){c=Gt(c,r);for(var v=c,_=u;_>dn;_-=dn){var g=h>>>_&vn;v=v.array[g]=Gt(v.array[g],r)}v.array[h>>>dn&vn]=d}if(s<o&&(y=y&&y.removeAfter(r,0,s)),a>=p)a-=p,s-=p,u=dn,c=null,y=y&&y.removeBefore(r,0,a);else if(a>i||p<h){for(l=0;c;){var m=a>>>u&vn;if(m!==p>>>u&vn)break;m&&(l+=(1<<u)*m),u-=dn,c=c.array[m]}c&&a>i&&(c=c.removeBefore(r,u,a-l)),c&&p<h&&(c=c.removeAfter(r,u,p-l)),l&&(a-=l,s-=l)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=u,t._root=c,t._tail=y,t.__hash=void 0,t.__altered=!0,t):Bt(a,s,u,c,y)}function Jt(t,e,n){for(var i=[],a=0,s=0;s<n.length;s++){var u=n[s],c=r(u);c.size>a&&(a=c.size),o(u)||(c=c.map(function(t){return Q(t)})),i.push(c)}return a>t.size&&(t=t.setSize(a)),Dt(t,e,i)}function Xt(t){return t<yn?0:t-1>>>dn<<dn}function Zt(t){return null===t||void 0===t?ee():$t(t)?t:ee().withMutations(function(e){var r=n(t);lt(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function $t(t){return ft(t)&&c(t)}function te(t,e,n,r){var i=Object.create(Zt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function ee(){return Xn||(Xn=te(wt(),Ht()))}function ne(t,e,n){var r,i,o=t._map,a=t._list,s=o.get(e),u=void 0!==s;if(n===_n){if(!u)return t;a.size>=yn&&a.size>=2*o.size?(i=a.filter(function(t,e){return void 0!==t&&s!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(n===a.get(s)[1])return t;r=o,i=a.set(s,[e,n])}else r=o.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):te(r,i)}function re(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function ae(t){this._iter=t,this.size=t.size}function se(t){var e=Oe(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Re,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return e(n,t,r)!==!1},n)},e.__iteratorUncached=function(e,n){if(e===wn){var r=t.__iterator(e,n);return new b(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===bn?En:bn,n)},e}function ue(t,e,n){var r=Oe(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,_n);return o===_n?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,a){return r(e.call(n,t,i,a),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(wn,i);return new b(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return w(r,s,e.call(n,a[1],s,t),i)})},r}function ce(t,e){var n=Oe(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=se(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Re,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function le(t,e,n,r){var i=Oe(t);return r&&(i.has=function(r){var i=t.get(r,_n);return i!==_n&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,_n);return o!==_n&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate(function(t,o,u){if(e.call(n,t,o,u))return s++,i(t,r?o:s-1,a)},o),s},i.__iteratorUncached=function(i,o){var a=t.__iterator(wn,o),s=0;return new b(function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(n,l,c,t))return w(i,r?c:s++,l,o)}})},i}function he(t,e,n){var r=ht().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function fe(t,e,n){var r=a(t),i=(c(t)?Zt():ht()).asMutable();t.__iterate(function(o,a){i.update(e.call(n,o,a,t),function(t){return t=t||[],t.push(r?[a,o]:o),t})});var o=Ie(t);return i.map(function(e){return Se(t,o(e))})}function pe(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),_(e,n,i))return t;var o=g(e,i),a=m(n,i);if(o!==o||a!==a)return pe(t.toSeq().cacheResult(),e,n,r);var s,u=a-o;u===u&&(s=u<0?0:u);var c=Oe(t);return c.size=0===s?s:t.size&&s||void 0,!r&&k(t)&&s>=0&&(c.get=function(e,n){return e=y(this,e),e>=0&&e<s?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,u=!0,c=0;return t.__iterate(function(t,n){if(!u||!(u=a++<o))return c++,e(t,r?n:c-1,i)!==!1&&c!==s}),c},c.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);var i=0!==s&&t.__iterator(e,n),a=0,u=0;return new b(function(){for(;a++<o;)i.next();if(++u>s)return T();var t=i.next();return r||e===bn?t:e===En?w(e,u-1,void 0,t):w(e,u-1,t.value[1],t)})},c}function de(t,e,n){var r=Oe(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate(function(t,i,s){return e.call(n,t,i,s)&&++a&&r(t,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(wn,i),s=!0;return new b(function(){if(!s)return T();var t=a.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?r===wn?t:w(r,u,c,t):(s=!1,T())})},r}function ye(t,e,n,r){var i=Oe(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return t.__iterate(function(t,o,c){if(!s||!(s=e.call(n,t,o,c)))return u++,i(t,r?o:u-1,a)}),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(wn,o),u=!0,c=0;return new b(function(){var t,o,l;do{if(t=s.next(),t.done)return r||i===bn?t:i===En?w(i,c++,void 0,t):w(i,c++,t.value[1],t);var h=t.value;o=h[0],l=h[1],u&&(u=e.call(n,l,o,a))}while(u);return i===wn?t:w(i,o,l,t)})},i}function ve(t,e){var r=a(t),i=[t].concat(e).map(function(t){return o(t)?r&&(t=n(t)):t=r?U(t):W(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var u=i[0];if(u===t||r&&a(u)||s(t)&&s(u))return u}var c=new D(i);return r?c=c.toKeyedSeq():s(t)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),c}function _e(t,e,n){var r=Oe(t);return r.__iterateUncached=function(r,i){function a(t,c){var l=this;t.__iterate(function(t,i){return(!e||c<e)&&o(t)?a(t,c+1):r(t,n?i:s++,l)===!1&&(u=!0),!u},i)}var s=0,u=!1;return a(t,0),s},r.__iteratorUncached=function(r,i){var a=t.__iterator(r,i),s=[],u=0;return new b(function(){for(;a;){var t=a.next();if(t.done===!1){var c=t.value;if(r===wn&&(c=c[1]),e&&!(s.length<e)||!o(c))return n?t:w(r,u++,c,t);s.push(a),a=c.__iterator(r,i)}else a=s.pop()}return T()})},r}function ge(t,e,n){var r=Ie(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function me(t,e){var n=Oe(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t,r){return(!o||n(e,o++,i)!==!1)&&n(t,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(bn,r),a=0;return new b(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?w(n,a++,e):w(n,a++,i.value,i)})},n}function Ee(t,e,n){e||(e=Pe);var r=a(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?P(o):s(t)?N(o):x(o)}function be(t,e,n){if(e||(e=Pe),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return we(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return we(e,t,n)?n:t})}function we(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function Te(t,n,r){var i=Oe(t);return i.size=new D(r).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(bn,e),i=0;!(n=r.next()).done&&t(n.value,i++,this)!==!1;);return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=e(t),A(i?t.reverse():t)}),a=0,s=!1;return new b(function(){var e;return s||(e=o.map(function(t){return t.next()}),s=e.some(function(t){return t.done})),s?T():w(t,a++,n.apply(null,e.map(function(t){return t.value})))})},i}function Se(t,e){return k(t)?e:t.constructor(e)}function Ce(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ae(t){return lt(t.size),d(t)}function Ie(t){return a(t)?n:s(t)?r:i}function Oe(t){return Object.create((a(t)?P:s(t)?N:x).prototype)}function Re(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):R.prototype.cacheResult.call(this)}function Pe(t,e){return t>e?1:t<e?-1:0}function Ne(t){var n=A(t);if(!n){if(!O(t))throw new TypeError("Expected iterable or array-like: "+t);n=A(e(t))}return n}function xe(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(t);Me(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=ht(o)},i=r.prototype=Object.create(Zn);return i.constructor=r,r}function De(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Le(t){return t._name||t.constructor.name||"Record"}function Me(t,e){try{e.forEach(je.bind(void 0,t))}catch(t){}}function je(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Z(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function ke(t){return null===t||void 0===t?qe():Fe(t)&&!c(t)?t:qe().withMutations(function(e){var n=i(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function Fe(t){return!(!t||!t[$n])}function Ue(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function We(t,e){var n=Object.create(tr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function qe(){return er||(er=We(wt()))}function ze(t){return null===t||void 0===t?Qe():Be(t)?t:Qe().withMutations(function(e){var n=i(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function Be(t){return Fe(t)&&c(t)}function He(t,e){var n=Object.create(nr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Qe(){return rr||(rr=He(ee()))}function Ve(t){return null===t||void 0===t?Ye():Ge(t)?t:Ye().unshiftAll(t)}function Ge(t){return!(!t||!t[ir])}function Ke(t,e,n,r){var i=Object.create(or);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ye(){return ar||(ar=Ke(0))}function Je(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Xe(t,e){return e}function Ze(t,e){return[e,t]}function $e(t){return function(){return!t.apply(this,arguments)}}function tn(t){return function(){return-t.apply(this,arguments)}}function en(t){return"string"==typeof t?JSON.stringify(t):String(t)}function nn(){return p(arguments)}function rn(t,e){return t<e?1:t>e?-1:0}function on(t){if(t.size===1/0)return 0;var e=c(t),n=a(t),r=e?1:0,i=t.__iterate(n?e?function(t,e){r=31*r+sn(ot(t),ot(e))|0}:function(t,e){r=r+sn(ot(t),ot(e))|0}:e?function(t){r=31*r+ot(t)|0}:function(t){r=r+ot(t)|0});return an(i,r)}function an(t,e){return e=Nn(e,3432918353),e=Nn(e<<15|e>>>-15,461845907),e=Nn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Nn(e^e>>>16,2246822507),e=Nn(e^e>>>13,3266489909),e=it(e^e>>>16)}function sn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var un=Array.prototype.slice;t(n,e),t(r,e),t(i,e),e.isIterable=o,e.isKeyed=a,e.isIndexed=s,e.isAssociative=u,e.isOrdered=c,e.Keyed=n,e.Indexed=r,e.Set=i;var cn="@@__IMMUTABLE_ITERABLE__@@",ln="@@__IMMUTABLE_KEYED__@@",hn="@@__IMMUTABLE_INDEXED__@@",fn="@@__IMMUTABLE_ORDERED__@@",pn="delete",dn=5,yn=1<<dn,vn=yn-1,_n={},gn={value:!1},mn={value:!1},En=0,bn=1,wn=2,Tn="function"==typeof Symbol&&Symbol.iterator,Sn="@@iterator",Cn=Tn||Sn;b.prototype.toString=function(){return"[Iterator]"},b.KEYS=En,b.VALUES=bn,b.ENTRIES=wn,b.prototype.inspect=b.prototype.toSource=function(){return this.toString()},b.prototype[Cn]=function(){return this},t(R,e),R.of=function(){return R(arguments)},R.prototype.toSeq=function(){return this},R.prototype.toString=function(){return this.__toString("Seq {","}")},R.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},R.prototype.__iterate=function(t,e){return B(this,t,e,!0)},R.prototype.__iterator=function(t,e){return H(this,t,e,!0)},t(P,R),P.prototype.toKeyedSeq=function(){return this},t(N,R),N.of=function(){return N(arguments)},N.prototype.toIndexedSeq=function(){return this},N.prototype.toString=function(){return this.__toString("Seq [","]")},N.prototype.__iterate=function(t,e){return B(this,t,e,!1)},N.prototype.__iterator=function(t,e){return H(this,t,e,!1)},t(x,R),x.of=function(){return x(arguments)},x.prototype.toSetSeq=function(){return this},R.isSeq=k,R.Keyed=P,R.Set=x,R.Indexed=N;var An="@@__IMMUTABLE_SEQ__@@";R.prototype[An]=!0,t(D,N),D.prototype.get=function(t,e){return this.has(t)?this._array[y(this,t)]:e},D.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(t(n[e?r-i:i],i,this)===!1)return i+1;return i},D.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new b(function(){return i>r?T():w(t,i,n[e?r-i++:i++])})},t(L,P),L.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},L.prototype.has=function(t){return this._object.hasOwnProperty(t)},L.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[e?i-o:o];if(t(n[a],a,this)===!1)return o+1}return o},L.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new b(function(){var a=r[e?i-o:o];return o++>i?T():w(t,a,n[a])})},L.prototype[fn]=!0,t(M,N),M.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=A(n),i=0;if(C(r))for(var o;!(o=r.next()).done&&t(o.value,i++,this)!==!1;);return i},M.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=A(n);if(!C(r))return new b(T);var i=0;return new b(function(){var e=r.next();return e.done?e:w(t,i++,e.value)})},t(j,N),j.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(t(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var a=o.value;if(r[i]=a,t(a,i++,this)===!1)break}return i},j.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new b(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return w(t,i,r[i++])})};var In;t(X,N),X.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},X.prototype.get=function(t,e){return this.has(t)?this._value:e},X.prototype.includes=function(t){return Y(this._value,t)},X.prototype.slice=function(t,e){var n=this.size;return _(t,e,n)?this:new X(this._value,m(e,n)-g(t,n))},X.prototype.reverse=function(){return this},X.prototype.indexOf=function(t){return Y(this._value,t)?0:-1},X.prototype.lastIndexOf=function(t){return Y(this._value,t)?this.size:-1},X.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(t(this._value,n,this)===!1)return n+1;return n},X.prototype.__iterator=function(t,e){var n=this,r=0;return new b(function(){return r<n.size?w(t,r++,n._value):T()})},X.prototype.equals=function(t){return t instanceof X?Y(this._value,t._value):J(t)};var On;t($,N),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(t,e){return this.has(t)?this._start+y(this,t)*this._step:e},$.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},$.prototype.slice=function(t,e){return _(t,e,this.size)?this:(t=g(t,this.size),e=m(e,this.size),e<=t?new $(0,0):new $(this.get(t,this._end),this.get(e,this._end),this._step))},$.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},$.prototype.lastIndexOf=function(t){return this.indexOf(t)},$.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(t(i,o,this)===!1)return o+1;i+=e?-r:r}return o},$.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new b(function(){var a=i;return i+=e?-r:r,o>n?T():w(t,o++,a)})},$.prototype.equals=function(t){return t instanceof $?this._start===t._start&&this._end===t._end&&this._step===t._step:J(this,t)};var Rn;t(tt,e),t(et,tt),t(nt,tt),t(rt,tt),tt.Keyed=et,tt.Indexed=nt,tt.Set=rt;var Pn,Nn="function"==typeof Math.imul&&Math.imul(4294967295,2)===-2?Math.imul:function(t,e){t|=0,e|=0;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},xn=Object.isExtensible,Dn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Ln="function"==typeof WeakMap;Ln&&(Pn=new WeakMap);var Mn=0,jn="__immutablehash__";"function"==typeof Symbol&&(jn=Symbol(jn));var kn=16,Fn=255,Un=0,Wn={};t(ht,et),ht.of=function(){var t=un.call(arguments,0);return wt().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},ht.prototype.toString=function(){return this.__toString("Map {","}")},ht.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ht.prototype.set=function(t,e){return Tt(this,t,e)},ht.prototype.setIn=function(t,e){return this.updateIn(t,_n,function(){return e})},ht.prototype.remove=function(t){return Tt(this,t,_n)},ht.prototype.deleteIn=function(t){return this.updateIn(t,function(){return _n})},ht.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},ht.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=Lt(this,Ne(t),e,n);return r===_n?void 0:r},ht.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):wt()},ht.prototype.merge=function(){return Pt(this,void 0,arguments)},ht.prototype.mergeWith=function(t){var e=un.call(arguments,1);return Pt(this,t,e)},ht.prototype.mergeIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ht.prototype.mergeDeep=function(){return Pt(this,Nt,arguments)},ht.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return Pt(this,xt(t),e)},ht.prototype.mergeDeepIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,wt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ht.prototype.sort=function(t){return Zt(Ee(this,t))},ht.prototype.sortBy=function(t,e){return Zt(Ee(this,e,t))},ht.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ht.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new f)},ht.prototype.asImmutable=function(){return this.__ensureOwner()},ht.prototype.wasAltered=function(){return this.__altered},ht.prototype.__iterator=function(t,e){return new gt(this,t,e)},ht.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},ht.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?bt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ht.isMap=ft;var qn="@@__IMMUTABLE_MAP__@@",zn=ht.prototype;zn[qn]=!0,zn[pn]=zn.remove,zn.removeIn=zn.deleteIn,pt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Y(n,i[o][0]))return i[o][1];return r},pt.prototype.update=function(t,e,n,r,i,o,a){for(var s=i===_n,u=this.entries,c=0,l=u.length;c<l&&!Y(r,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:s)return this;if(h(a),(s||!f)&&h(o),!s||1!==u.length){if(!f&&!s&&u.length>=Hn)return It(t,u,r,i);var d=t&&t===this.ownerID,y=d?u:p(u);return f?s?c===l-1?y.pop():y[c]=y.pop():y[c]=[r,i]:y.push([r,i]),d?(this.entries=y,this):new pt(t,y)}},dt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=1<<((0===t?e:e>>>t)&vn),o=this.bitmap;return 0===(o&i)?r:this.nodes[Mt(o&i-1)].get(t+dn,e,n,r)},dt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var s=(0===e?n:n>>>e)&vn,u=1<<s,c=this.bitmap,l=0!==(c&u);if(!l&&i===_n)return this;var h=Mt(c&u-1),f=this.nodes,p=l?f[h]:void 0,d=St(p,t,e+dn,n,r,i,o,a);if(d===p)return this;if(!l&&d&&f.length>=Qn)return Rt(t,f,c,s,d);if(l&&!d&&2===f.length&&Ct(f[1^h]))return f[1^h];if(l&&d&&1===f.length&&Ct(d))return d;var y=t&&t===this.ownerID,v=l?d?c:c^u:c|u,_=l?d?jt(f,h,d,y):Ft(f,h,y):kt(f,h,d,y);return y?(this.bitmap=v,this.nodes=_,this):new dt(t,v,_)},yt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=(0===t?e:e>>>t)&vn,o=this.nodes[i];return o?o.get(t+dn,e,n,r):r},yt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var s=(0===e?n:n>>>e)&vn,u=i===_n,c=this.nodes,l=c[s];if(u&&!l)return this;var h=St(l,t,e+dn,n,r,i,o,a);if(h===l)return this;var f=this.count;if(l){if(!h&&(f--,f<Vn))return Ot(t,c,f,s)}else f++;var p=t&&t===this.ownerID,d=jt(c,s,h,p);return p?(this.count=f,this.nodes=d,this):new yt(t,f,d)},vt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Y(n,i[o][0]))return i[o][1];return r},vt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var s=i===_n;if(n!==this.keyHash)return s?this:(h(a),h(o),At(this,t,e,n,[r,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!Y(r,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:s)return this;if(h(a),(s||!f)&&h(o),s&&2===l)return new _t(t,this.keyHash,u[1^c]);var d=t&&t===this.ownerID,y=d?u:p(u);return f?s?c===l-1?y.pop():y[c]=y.pop():y[c]=[r,i]:y.push([r,i]),d?(this.entries=y,this):new vt(t,this.keyHash,y)},_t.prototype.get=function(t,e,n,r){return Y(n,this.entry[0])?this.entry[1]:r},_t.prototype.update=function(t,e,n,r,i,o,a){var s=i===_n,u=Y(r,this.entry[0]);return(u?i===this.entry[1]:s)?this:(h(a),s?void h(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new _t(t,this.keyHash,[r,i]):(h(o),At(this,t,e,ot(r),[r,i])))},pt.prototype.iterate=vt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(t(n[e?i-r:r])===!1)return!1},dt.prototype.iterate=yt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&o.iterate(t,e)===!1)return!1}},_t.prototype.iterate=function(t,e){return t(this.entry)},t(gt,b),gt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return mt(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return mt(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return mt(t,o.entry);e=this._stack=Et(o,e)}continue}e=this._stack=this._stack.__prev}return T()};var Bn,Hn=yn/4,Qn=yn/2,Vn=yn/4;t(Ut,nt),Ut.of=function(){return this(arguments)},Ut.prototype.toString=function(){return this.__toString("List [","]")},Ut.prototype.get=function(t,e){if(t=y(this,t),t>=0&&t<this.size){t+=this._origin;var n=Kt(this,t);return n&&n.array[t&vn]}return e},Ut.prototype.set=function(t,e){return Qt(this,t,e)},Ut.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Ut.prototype.insert=function(t,e){return this.splice(t,0,e)},Ut.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=dn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ht()},Ut.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Yt(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},Ut.prototype.pop=function(){return Yt(this,0,-1)},Ut.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Yt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},Ut.prototype.shift=function(){return Yt(this,1)},Ut.prototype.merge=function(){return Jt(this,void 0,arguments)},Ut.prototype.mergeWith=function(t){var e=un.call(arguments,1);return Jt(this,t,e)},Ut.prototype.mergeDeep=function(){return Jt(this,Nt,arguments)},Ut.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return Jt(this,xt(t),e)},Ut.prototype.setSize=function(t){return Yt(this,0,t)},Ut.prototype.slice=function(t,e){var n=this.size;return _(t,e,n)?this:Yt(this,g(t,n),m(e,n))},Ut.prototype.__iterator=function(t,e){var n=0,r=zt(this,e);return new b(function(){var e=r();return e===Jn?T():w(t,n++,e)})},Ut.prototype.__iterate=function(t,e){for(var n,r=0,i=zt(this,e);(n=i())!==Jn&&t(n,r++,this)!==!1;);return r},Ut.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Bt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Ut.isList=Wt;var Gn="@@__IMMUTABLE_LIST__@@",Kn=Ut.prototype;Kn[Gn]=!0,Kn[pn]=Kn.remove,Kn.setIn=zn.setIn,Kn.deleteIn=Kn.removeIn=zn.removeIn,Kn.update=zn.update,Kn.updateIn=zn.updateIn,Kn.mergeIn=zn.mergeIn,Kn.mergeDeepIn=zn.mergeDeepIn,Kn.withMutations=zn.withMutations,Kn.asMutable=zn.asMutable,Kn.asImmutable=zn.asImmutable,Kn.wasAltered=zn.wasAltered,qt.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&vn;if(r>=this.array.length)return new qt([],t);var i,o=0===r;if(e>0){var a=this.array[r];if(i=a&&a.removeBefore(t,e-dn,n),i===a&&o)return this}if(o&&!i)return this;var s=Gt(this,t);if(!o)for(var u=0;u<r;u++)s.array[u]=void 0;return i&&(s.array[r]=i),s},qt.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&vn;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if(i=o&&o.removeAfter(t,e-dn,n),i===o&&r===this.array.length-1)return this}var a=Gt(this,t);return a.array.splice(r+1),i&&(a.array[r]=i),a};var Yn,Jn={};t(Zt,ht),Zt.of=function(){return this(arguments)},Zt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Zt.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Zt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Zt.prototype.set=function(t,e){return ne(this,t,e)},Zt.prototype.remove=function(t){return ne(this,t,_n)},Zt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Zt.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Zt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Zt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?te(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Zt.isOrderedMap=$t,Zt.prototype[fn]=!0,Zt.prototype[pn]=Zt.prototype.remove;var Xn;t(re,P),re.prototype.get=function(t,e){return this._iter.get(t,e)},re.prototype.has=function(t){return this._iter.has(t)},re.prototype.valueSeq=function(){return this._iter.valueSeq()},re.prototype.reverse=function(){var t=this,e=ce(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},re.prototype.map=function(t,e){var n=this,r=ue(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},re.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Ae(this):0,function(i){return t(i,e?--n:n++,r)}),e)},re.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(bn,e),r=e?Ae(this):0;return new b(function(){var i=n.next();return i.done?i:w(t,e?--r:r++,i.value,i);
})},re.prototype[fn]=!0,t(ie,N),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(bn,e),r=0;return new b(function(){var e=n.next();return e.done?e:w(t,r++,e.value,e)})},t(oe,x),oe.prototype.has=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},oe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(bn,e);return new b(function(){var e=n.next();return e.done?e:w(t,e.value,e.value,e)})},t(ae,P),ae.prototype.entrySeq=function(){return this._iter.toSeq()},ae.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Ce(e);var r=o(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},ae.prototype.__iterator=function(t,e){var n=this._iter.__iterator(bn,e);return new b(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Ce(r);var i=o(r);return w(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},ie.prototype.cacheResult=re.prototype.cacheResult=oe.prototype.cacheResult=ae.prototype.cacheResult=Re,t(xe,et),xe.prototype.toString=function(){return this.__toString(Le(this)+" {","}")},xe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},xe.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},xe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=De(this,wt()))},xe.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Le(this));if(this._map&&!this._map.has(t)){var n=this._defaultValues[t];if(e===n)return this}var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:De(this,r)},xe.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:De(this,e)},xe.prototype.wasAltered=function(){return this._map.wasAltered()},xe.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},xe.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},xe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?De(this,e,t):(this.__ownerID=t,this._map=e,this)};var Zn=xe.prototype;Zn[pn]=Zn.remove,Zn.deleteIn=Zn.removeIn=zn.removeIn,Zn.merge=zn.merge,Zn.mergeWith=zn.mergeWith,Zn.mergeIn=zn.mergeIn,Zn.mergeDeep=zn.mergeDeep,Zn.mergeDeepWith=zn.mergeDeepWith,Zn.mergeDeepIn=zn.mergeDeepIn,Zn.setIn=zn.setIn,Zn.update=zn.update,Zn.updateIn=zn.updateIn,Zn.withMutations=zn.withMutations,Zn.asMutable=zn.asMutable,Zn.asImmutable=zn.asImmutable,t(ke,rt),ke.of=function(){return this(arguments)},ke.fromKeys=function(t){return this(n(t).keySeq())},ke.prototype.toString=function(){return this.__toString("Set {","}")},ke.prototype.has=function(t){return this._map.has(t)},ke.prototype.add=function(t){return Ue(this,this._map.set(t,!0))},ke.prototype.remove=function(t){return Ue(this,this._map.remove(t))},ke.prototype.clear=function(){return Ue(this,this._map.clear())},ke.prototype.union=function(){var t=un.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},ke.prototype.intersect=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},ke.prototype.subtract=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},ke.prototype.merge=function(){return this.union.apply(this,arguments)},ke.prototype.mergeWith=function(t){var e=un.call(arguments,1);return this.union.apply(this,e)},ke.prototype.sort=function(t){return ze(Ee(this,t))},ke.prototype.sortBy=function(t,e){return ze(Ee(this,e,t))},ke.prototype.wasAltered=function(){return this._map.wasAltered()},ke.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},ke.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},ke.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},ke.isSet=Fe;var $n="@@__IMMUTABLE_SET__@@",tr=ke.prototype;tr[$n]=!0,tr[pn]=tr.remove,tr.mergeDeep=tr.merge,tr.mergeDeepWith=tr.mergeWith,tr.withMutations=zn.withMutations,tr.asMutable=zn.asMutable,tr.asImmutable=zn.asImmutable,tr.__empty=qe,tr.__make=We;var er;t(ze,ke),ze.of=function(){return this(arguments)},ze.fromKeys=function(t){return this(n(t).keySeq())},ze.prototype.toString=function(){return this.__toString("OrderedSet {","}")},ze.isOrderedSet=Be;var nr=ze.prototype;nr[fn]=!0,nr.__empty=Qe,nr.__make=He;var rr;t(Ve,nt),Ve.of=function(){return this(arguments)},Ve.prototype.toString=function(){return this.__toString("Stack [","]")},Ve.prototype.get=function(t,e){var n=this._head;for(t=y(this,t);n&&t--;)n=n.next;return n?n.value:e},Ve.prototype.peek=function(){return this._head&&this._head.value},Ve.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ke(t,e)},Ve.prototype.pushAll=function(t){if(t=r(t),0===t.size)return this;lt(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ke(e,n)},Ve.prototype.pop=function(){return this.slice(1)},Ve.prototype.unshift=function(){return this.push.apply(this,arguments)},Ve.prototype.unshiftAll=function(t){return this.pushAll(t)},Ve.prototype.shift=function(){return this.pop.apply(this,arguments)},Ve.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ye()},Ve.prototype.slice=function(t,e){if(_(t,e,this.size))return this;var n=g(t,this.size),r=m(e,this.size);if(r!==this.size)return nt.prototype.slice.call(this,t,e);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Ke(i,o)},Ve.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ke(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ve.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&t(r.value,n++,this)!==!1;)r=r.next;return n},Ve.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new b(function(){if(r){var e=r.value;return r=r.next,w(t,n++,e)}return T()})},Ve.isStack=Ge;var ir="@@__IMMUTABLE_STACK__@@",or=Ve.prototype;or[ir]=!0,or.withMutations=zn.withMutations,or.asMutable=zn.asMutable,or.asImmutable=zn.asImmutable,or.wasAltered=zn.wasAltered;var ar;e.Iterator=b,Je(e,{toArray:function(){lt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new re(this,!0)},toMap:function(){return ht(this.toKeyedSeq())},toObject:function(){lt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Zt(this.toKeyedSeq())},toOrderedSet:function(){return ze(a(this)?this.valueSeq():this)},toSet:function(){return ke(a(this)?this.valueSeq():this)},toSetSeq:function(){return new oe(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ve(a(this)?this.valueSeq():this)},toList:function(){return Ut(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=un.call(arguments,0);return Se(this,ve(this,t))},includes:function(t){return this.some(function(e){return Y(e,t)})},entries:function(){return this.__iterator(wn)},every:function(t,e){lt(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return Se(this,le(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return lt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){lt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(En)},map:function(t,e){return Se(this,ue(this,t,e))},reduce:function(t,e,n){lt(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,a){i?(i=!1,r=e):r=t.call(n,r,e,o,a)}),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Se(this,ce(this,!0))},slice:function(t,e){return Se(this,pe(this,t,e,!0))},some:function(t,e){return!this.every($e(t),e)},sort:function(t){return Se(this,Ee(this,t))},values:function(){return this.__iterator(bn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return d(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return he(this,t,e)},equals:function(t){return J(this,t)},entrySeq:function(){var t=this;if(t._cache)return new D(t._cache);var e=t.toSeq().map(Ze).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter($e(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(v)},flatMap:function(t,e){return Se(this,ge(this,t,e))},flatten:function(t){return Se(this,_e(this,t,!0))},fromEntrySeq:function(){return new ae(this)},get:function(t,e){return this.find(function(e,n){return Y(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=Ne(t);!(n=i.next()).done;){var o=n.value;if(r=r&&r.get?r.get(o,_n):_n,r===_n)return e}return r},groupBy:function(t,e){return fe(this,t,e)},has:function(t){return this.get(t,_n)!==_n},hasIn:function(t){return this.getIn(t,_n)!==_n},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return Y(e,t)})},keySeq:function(){return this.toSeq().map(Xe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return be(this,t)},maxBy:function(t,e){return be(this,e,t)},min:function(t){return be(this,t?tn(t):rn)},minBy:function(t,e){return be(this,e?tn(e):rn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Se(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Se(this,ye(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile($e(t),e)},sortBy:function(t,e){return Se(this,Ee(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Se(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Se(this,de(this,t,e))},takeUntil:function(t,e){return this.takeWhile($e(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var sr=e.prototype;sr[cn]=!0,sr[Cn]=sr.values,sr.__toJS=sr.toArray,sr.__toStringMapper=en,sr.inspect=sr.toSource=function(){return this.toString()},sr.chain=sr.flatMap,sr.contains=sr.includes,Je(n,{flip:function(){return Se(this,se(this))},mapEntries:function(t,e){var n=this,r=0;return Se(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Se(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var ur=n.prototype;ur[ln]=!0,ur[Cn]=sr.entries,ur.__toJS=sr.toObject,ur.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+en(t)},Je(r,{toKeyedSeq:function(){return new re(this,!1)},filter:function(t,e){return Se(this,le(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Se(this,ce(this,!1))},slice:function(t,e){return Se(this,pe(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=g(t,t<0?this.count():this.size);var r=this.slice(0,t);return Se(this,1===n?r:r.concat(p(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Se(this,_e(this,t,!1))},get:function(t,e){return t=y(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=y(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Se(this,me(this,t))},interleave:function(){var t=[this].concat(p(arguments)),e=Te(this.toSeq(),N.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Se(this,n)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Se(this,ye(this,t,e,!1))},zip:function(){var t=[this].concat(p(arguments));return Se(this,Te(this,nn,t))},zipWith:function(t){var e=p(arguments);return e[0]=this,Se(this,Te(this,t,e))}}),r.prototype[hn]=!0,r.prototype[fn]=!0,Je(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=sr.includes,i.prototype.contains=i.prototype.includes,Je(P,n.prototype),Je(N,r.prototype),Je(x,i.prototype),Je(et,n.prototype),Je(nt,r.prototype),Je(rt,i.prototype);var cr={Iterable:e,Seq:R,Collection:tt,Map:ht,OrderedMap:Zt,List:Ut,Stack:Ve,Set:ke,OrderedSet:ze,Record:xe,Range:$,Repeat:X,is:Y,fromJS:Q};return cr})},969:function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function i(t){return o(t)&&f.call(t)==s}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null!=t&&(i(t)?p.test(l.call(t)):n(t)&&u.test(t))}var s="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,l=Function.prototype.toString,h=c.hasOwnProperty,f=c.toString,p=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},971:function(t,e){function n(t){return i(t)&&d.call(t,"callee")&&(!v.call(t,"callee")||y.call(t)==l)}function r(t){return null!=t&&a(t.length)&&!o(t)}function i(t){return u(t)&&r(t)}function o(t){var e=s(t)?y.call(t):"";return e==h||e==f}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return!!t&&"object"==typeof t}var c=9007199254740991,l="[object Arguments]",h="[object Function]",f="[object GeneratorFunction]",p=Object.prototype,d=p.hasOwnProperty,y=p.toString,v=p.propertyIsEnumerable;t.exports=n},972:function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=_}function o(t){return a(t)&&d.call(t)==c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null!=t&&(o(t)?y.test(f.call(t)):n(t)&&l.test(t))}var u="[object Array]",c="[object Function]",l=/^\[object .+?Constructor\]$/,h=Object.prototype,f=Function.prototype.toString,p=h.hasOwnProperty,d=h.toString,y=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=r(Array,"isArray"),_=9007199254740991,g=v||function(t){return n(t)&&i(t.length)&&d.call(t)==u};t.exports=g},975:function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&a(g(t))}function o(t,e){return t="number"==typeof t||p.test(t)?+t:-1,e=null==e?_:e,t>-1&&t%1==0&&t<e}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=_}function s(t){for(var e=c(t),n=e.length,r=n&&t.length,i=!!r&&a(r)&&(f(t)||h(t)),s=-1,u=[];++s<n;){var l=e[s];(i&&o(l,r)||y.call(t,l))&&u.push(l)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(f(t)||h(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,s=Array(e),c=e>0;++r<e;)s[r]=r+"";for(var l in t)c&&o(l,e)||"constructor"==l&&(i||!y.call(t,l))||s.push(l);return s}var l=n(969),h=n(971),f=n(972),p=/^\d+$/,d=Object.prototype,y=d.hasOwnProperty,v=l(Object,"keys"),_=9007199254740991,g=r("length"),m=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&i(t)?s(t):u(t)?v(t):[]}:s;t.exports=m},65:function(t,e,n){function r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var i=n(86),o=n(68),a=4294967295;r.prototype=i(o.prototype),r.prototype.constructor=r,t.exports=r},104:function(t,e,n){function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}var i=n(86),o=n(68);r.prototype=i(o.prototype),r.prototype.constructor=r,t.exports=r},41:function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}t.exports=n},211:function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}t.exports=n},105:function(t,e,n){function r(t,e){var n=null==t?0:t.length;return!!n&&i(t,e,0)>-1}var i=n(168);t.exports=r},212:function(t,e){function n(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}t.exports=n},136:function(t,e){function n(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}t.exports=n},214:function(t,e,n){var r=n(170),i=r("length");t.exports=i},215:function(t,e){function n(t){return t.split("")}t.exports=n},107:function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=n(23),o=n(29);t.exports=r},216:function(t,e,n){function r(t,e){return t&&i(e,o(e),t)}var i=n(23),o=n(175);t.exports=r},55:function(t,e,n){function r(t,e,n,R,P,N){var x,M=e&C,j=e&A,F=e&I;if(n&&(x=P?n(t,R,P,N):n(t)),void 0!==x)return x;if(!w(t))return t;var U=m(t);if(U){if(x=v(t),!M)return l(t,x)}else{var W=y(t),q=W==D||W==L;if(E(t))return c(t,M);if(W==k||W==O||q&&!P){if(x=j||q?{}:g(t),!M)return j?f(t,u(x,t)):h(t,s(x,t))}else{if(!tt[W])return P?t:{};x=_(t,W,M)}}N||(N=new i);var z=N.get(t);if(z)return z;if(N.set(t,x),T(t))return t.forEach(function(i){x.add(r(i,e,n,i,t,N))}),x;if(b(t))return t.forEach(function(i,o){x.set(o,r(i,e,n,o,t,N))}),x;var B=F?j?d:p:j?keysIn:S,H=U?void 0:B(t);return o(H||t,function(i,o){H&&(o=i,i=t[o]),a(x,o,r(i,e,n,o,t,N))}),x}var i=n(165),o=n(41),a=n(106),s=n(107),u=n(216),c=n(346),l=n(42),h=n(235),f=n(236),p=n(349),d=n(141),y=n(24),v=n(248),_=n(249),g=n(353),m=n(2),E=n(148),b=n(95),w=n(7),T=n(283),S=n(29),C=1,A=2,I=4,O="[object Arguments]",R="[object Array]",P="[object Boolean]",N="[object Date]",x="[object Error]",D="[object Function]",L="[object GeneratorFunction]",M="[object Map]",j="[object Number]",k="[object Object]",F="[object RegExp]",U="[object Set]",W="[object String]",q="[object Symbol]",z="[object WeakMap]",B="[object ArrayBuffer]",H="[object DataView]",Q="[object Float32Array]",V="[object Float64Array]",G="[object Int8Array]",K="[object Int16Array]",Y="[object Int32Array]",J="[object Uint8Array]",X="[object Uint8ClampedArray]",Z="[object Uint16Array]",$="[object Uint32Array]",tt={};tt[O]=tt[R]=tt[B]=tt[H]=tt[P]=tt[N]=tt[Q]=tt[V]=tt[G]=tt[K]=tt[Y]=tt[M]=tt[j]=tt[k]=tt[F]=tt[U]=tt[W]=tt[q]=tt[J]=tt[X]=tt[Z]=tt[$]=!0,tt[x]=tt[D]=tt[z]=!1,t.exports=r},217:function(t,e,n){function r(t,e,n,r){var h=-1,f=o,p=!0,d=t.length,y=[],v=e.length;if(!d)return y;n&&(e=s(e,u(n))),r?(f=a,p=!1):e.length>=l&&(f=c,p=!1,e=new i(e));t:for(;++h<d;){var _=t[h],g=null==n?_:n(_);if(_=r||0!==_?_:0,p&&g===g){for(var m=v;m--;)if(e[m]===g)continue t;y.push(_)}else f(e,g,r)||y.push(_)}return y}var i=n(339),o=n(105),a=n(212),s=n(19),u=n(69),c=n(345),l=200;t.exports=r},20:function(t,e,n){var r=n(91),i=n(238),o=i(r);t.exports=o},218:function(t,e,n){function r(t,e){var n=!0;return i(t,function(t,r,i){return n=!!e(t,r,i)}),n}var i=n(20);t.exports=r},219:function(t,e,n){function r(t,e){var n=[];return i(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}var i=n(20);t.exports=r},220:function(t,e){function n(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}t.exports=n},67:function(t,e,n){function r(t,e,n,a,s){var u=-1,c=t.length;for(n||(n=o),s||(s=[]);++u<c;){var l=t[u];e>0&&n(l)?e>1?r(l,e-1,n,a,s):i(s,l):a||(s[s.length]=l)}return s}var i=n(213),o=n(251);t.exports=r},91:function(t,e,n){function r(t,e){return t&&i(t,e,o)}var i=n(343),o=n(29);t.exports=r},221:function(t,e){function n(t,e){return null!=t&&i.call(t,e)}var r=Object.prototype,i=r.hasOwnProperty;t.exports=n},168:function(t,e,n){function r(t,e,n){return e===e?a(t,e,n):i(t,o,n)}var i=n(220),o=n(224),a=n(257);t.exports=r},223:function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(24),o=n(9),a="[object Map]";t.exports=r},224:function(t,e){function n(t){return t!==t}t.exports=n},225:function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(24),o=n(9),a="[object Set]";t.exports=r},68:function(t,e){function n(){}t.exports=n},169:function(t,e,n){function r(t,e){var n=-1,r=o(t)?Array(t.length):[];return i(t,function(t,i,o){r[++n]=e(t,i,o)}),r}var i=n(20),o=n(25);t.exports=r},226:function(t,e,n){function r(t,e){return i(t,e,function(e,n){return o(t,n)})}var i=n(344),o=n(358);t.exports=r},227:function(t,e,n){function r(t,e){for(var n=t?e.length:0,r=n-1;n--;){var a=e[n];if(n==r||a!==u){var u=a;o(a)?s.call(t,a,1):i(t,a)}}return t}var i=n(70),o=n(88),a=Array.prototype,s=a.splice;t.exports=r},228:function(t,e){function n(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}t.exports=n},110:function(t,e,n){var r=n(53),i=n(117),o=i?function(t,e){return i.set(t,e),t}:r;t.exports=o},93:function(t,e){function n(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}t.exports=n},229:function(t,e,n){function r(t,e){var n;return i(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}var i=n(20);t.exports=r},70:function(t,e,n){function r(t,e){return e=i(e,t),t=a(t,e),null==t||delete t[s(o(e))]}var i=n(87),o=n(56),a=n(254),s=n(75);t.exports=r},230:function(t,e,n){function r(t){return"function"==typeof t?t:i}var i=n(53);t.exports=r},231:function(t,e,n){function r(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:i(t,e,n)}var i=n(93);t.exports=r},232:function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var i=n(139);t.exports=r},233:function(t,e){function n(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=n},234:function(t,e,n){function r(t){return a?Object(a.call(t)):{}}var i=n(66),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;t.exports=r},111:function(t,e){function n(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,c=e.length,l=r(a-s,0),h=Array(c+l),f=!i;++u<c;)h[u]=e[u];for(;++o<s;)(f||o<a)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}var r=Math.max;t.exports=n},112:function(t,e){function n(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,c=-1,l=e.length,h=r(a-u,0),f=Array(h+l),p=!i;++o<h;)f[o]=t[o];for(var d=o;++c<l;)f[d+c]=e[c];for(;++s<u;)(p||o<a)&&(f[d+n[s]]=t[o++]);return f}var r=Math.max;t.exports=n},235:function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=n(23),o=n(246);t.exports=r},236:function(t,e,n){function r(t,e){return i(t,o(t),e)}var i=n(23),o=n(351);t.exports=r},237:function(t,e){function n(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}t.exports=n},238:function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&r(s[a],a,s)!==!1;);return n}}var i=n(25);t.exports=r},239:function(t,e,n){function r(t,e,n){function r(){var e=this&&this!==o&&this instanceof r?u:t;return e.apply(s?n:this,arguments)}var s=e&a,u=i(t);return r}var i=n(43),o=n(17),a=1;t.exports=r},240:function(t,e,n){function r(t){return function(e){e=s(e);var n=o(e)?a(e):void 0,r=n?n[0]:e.charAt(0),u=n?i(n,1).join(""):e.slice(1);return r[t]()+u}}var i=n(231),o=n(73),a=n(171),s=n(26);t.exports=r},43:function(t,e,n){function r(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=i(t.prototype),r=t.apply(n,e);return o(r)?r:n}}var i=n(86),o=n(7);t.exports=r},241:function(t,e,n){function r(t,e,n){function r(){for(var o=arguments.length,f=Array(o),p=o,d=u(r);p--;)f[p]=arguments[p];var y=o<3&&f[0]!==d&&f[o-1]!==d?[]:c(f,d);if(o-=y.length,o<n)return s(t,e,a,r.placeholder,void 0,f,y,void 0,void 0,n-o);var v=this&&this!==l&&this instanceof r?h:t;return i(v,this,f)}var h=o(t);return r}var i=n(85),o=n(43),a=n(113),s=n(114),u=n(116),c=n(74),l=n(17);t.exports=r},113:function(t,e,n){function r(t,e,n,m,E,b,w,T,S,C){function A(){for(var p=arguments.length,d=Array(p),y=p;y--;)d[y]=arguments[y];if(P)var v=c(A),_=a(d,v);if(m&&(d=i(d,m,E,P)),b&&(d=o(d,b,w,P)),p-=_,P&&p<C){var g=h(d,v);return u(t,e,r,A.placeholder,n,d,g,T,S,C-p)}var D=O?n:this,L=R?D[t]:t;return p=d.length,T?d=l(d,T):N&&p>1&&d.reverse(),I&&S<p&&(d.length=S),this&&this!==f&&this instanceof A&&(L=x||s(L)),L.apply(D,d)}var I=e&_,O=e&p,R=e&d,P=e&(y|v),N=e&g,x=R?void 0:s(t);return A}var i=n(111),o=n(112),a=n(237),s=n(43),u=n(114),c=n(116),l=n(256),h=n(74),f=n(17),p=1,d=2,y=8,v=16,_=128,g=512;t.exports=r},242:function(t,e,n){function r(t,e,n,r){function u(){for(var e=-1,o=arguments.length,s=-1,h=r.length,f=Array(h+o),p=this&&this!==a&&this instanceof u?l:t;++s<h;)f[s]=r[s];for(;o--;)f[s++]=arguments[++e];return i(p,c?n:this,f)}var c=e&s,l=o(t);return u}var i=n(85),o=n(43),a=n(17),s=1;t.exports=r},114:function(t,e,n){function r(t,e,n,r,p,d,y,v,_,g){var m=e&l,E=m?y:void 0,b=m?void 0:y,w=m?d:void 0,T=m?void 0:d;e|=m?h:f,e&=~(m?f:h),e&c||(e&=~(s|u));var S=[t,e,p,w,E,T,b,v,_,g],C=n.apply(void 0,S);return i(t)&&o(C,S),C.placeholder=r,a(C,t,e)}var i=n(252),o=n(118),a=n(119),s=1,u=2,c=4,l=8,h=32,f=64;t.exports=r},71:function(t,e,n){function r(t,e,n,r,w,T,S,C){var A=e&v;if(!A&&"function"!=typeof t)throw new TypeError(d);var I=r?r.length:0;if(I||(e&=~(m|E),r=w=void 0),S=void 0===S?S:b(p(S),0),C=void 0===C?C:p(C),I-=w?w.length:0,e&E){var O=r,R=w;r=w=void 0}var P=A?void 0:c(t),N=[t,e,n,r,w,O,R,T,S,C];if(P&&l(N,P),t=N[0],e=N[1],n=N[2],r=N[3],w=N[4],C=N[9]=void 0===N[9]?A?0:t.length:b(N[9]-I,0),!C&&e&(_|g)&&(e&=~(_|g)),e&&e!=y)x=e==_||e==g?a(t,e,C):e!=m&&e!=(y|m)||w.length?s.apply(void 0,N):u(t,e,n,r);else var x=o(t,e,n);var D=P?i:h;return f(D(x,N),t,e)}var i=n(110),o=n(239),a=n(241),s=n(113),u=n(242),c=n(115),l=n(253),h=n(118),f=n(119),p=n(60),d="Expected a function",y=1,v=2,_=8,g=16,m=32,E=64,b=Math.max;t.exports=r},243:function(t,e,n){function r(t,e,n,a,s,u){return o(t)&&o(e)&&(u.set(e,t),i(t,e,void 0,r,u),u.delete(e)),t}var i=n(138),o=n(7);t.exports=r},244:function(t,e,n){function r(t){return i(t)?void 0:t}var i=n(54);t.exports=r},72:function(t,e,n){function r(t){return a(o(t,void 0,i),t+"")}var i=n(272),o=n(355),a=n(145);t.exports=r},115:function(t,e,n){var r=n(117),i=n(287),o=r?function(t){return r.get(t)}:i;t.exports=o},245:function(t,e,n){function r(t){for(var e=t.name+"",n=i[e],r=a.call(i,e)?n.length:0;r--;){var o=n[r],s=o.func;if(null==s||s==t)return o.name}return e}var i=n(255),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},116:function(t,e){function n(t){var e=t;return e.placeholder}t.exports=n},247:function(t,e){function n(t){var e=t.match(r);return e?e[1].split(i):[]}var r=/\{\n\/\* \[wrapped with (.+)\] \*/,i=/,? & /;t.exports=n},73:function(t,e){function n(t){return l.test(t)}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\ufe0e\\ufe0f",c="\\u200d",l=RegExp("["+c+r+s+u+"]");t.exports=n},248:function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&i.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,i=r.hasOwnProperty;t.exports=n},249:function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case _:return i(t);case c:case l:return new r(+t);case g:return o(t,n);case m:case E:case b:case w:case T:case S:case C:case A:case I:return u(t,n);case h:return new r;case f:case y:return new r(t);case p:return a(t);case d:return new r;case v:return s(t)}}var i=n(139),o=n(232),a=n(233),s=n(234),u=n(347),c="[object Boolean]",l="[object Date]",h="[object Map]",f="[object Number]",p="[object RegExp]",d="[object Set]",y="[object String]",v="[object Symbol]",_="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",E="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",T="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",A="[object Uint16Array]",I="[object Uint32Array]";t.exports=r},250:function(t,e){function n(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(r,"{\n/* [wrapped with "+e+"] */\n")}var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=n},251:function(t,e,n){function r(t){return a(t)||o(t)||!!(s&&t&&t[s])}var i=n(66),o=n(147),a=n(2),s=i?i.isConcatSpreadable:void 0;t.exports=r},252:function(t,e,n){function r(t){var e=a(t),n=s[e];if("function"!=typeof n||!(e in i.prototype))return!1;if(t===n)return!0;var r=o(n);return!!r&&t===r[0]}var i=n(65),o=n(115),a=n(245),s=n(296);t.exports=r},253:function(t,e,n){function r(t,e){var n=t[1],r=e[1],y=n|r,v=y<(u|c|f),_=r==f&&n==h||r==f&&n==p&&t[7].length<=e[8]||r==(f|p)&&e[7].length<=e[8]&&n==h;if(!v&&!_)return t;r&u&&(t[2]=e[2],
y|=n&u?0:l);var g=e[3];if(g){var m=t[3];t[3]=m?i(m,g,e[4]):g,t[4]=m?a(t[3],s):e[4]}return g=e[5],g&&(m=t[5],t[5]=m?o(m,g,e[6]):g,t[6]=m?a(t[5],s):e[6]),g=e[7],g&&(t[7]=g),r&f&&(t[8]=null==t[8]?e[8]:d(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=y,t}var i=n(111),o=n(112),a=n(74),s="__lodash_placeholder__",u=1,c=2,l=4,h=8,f=128,p=256,d=Math.min;t.exports=r},117:function(t,e,n){var r=n(340),i=r&&new r;t.exports=i},254:function(t,e,n){function r(t,e){return e.length<2?t:i(t,o(e,0,-1))}var i=n(167),o=n(93);t.exports=r},255:function(t,e){var n={};t.exports=n},256:function(t,e,n){function r(t,e){for(var n=t.length,r=a(e.length,n),s=i(t);r--;){var u=e[r];t[r]=o(u,n)?s[u]:void 0}return t}var i=n(42),o=n(88),a=Math.min;t.exports=r},74:function(t,e){function n(t,e){for(var n=-1,i=t.length,o=0,a=[];++n<i;){var s=t[n];s!==e&&s!==r||(t[n]=r,a[o++]=n)}return a}var r="__lodash_placeholder__";t.exports=n},118:function(t,e,n){var r=n(110),i=n(356),o=i(r);t.exports=o},119:function(t,e,n){function r(t,e,n){var r=e+"";return a(t,o(r,s(i(r),n)))}var i=n(247),o=n(250),a=n(145),s=n(261);t.exports=r},257:function(t,e){function n(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}t.exports=n},258:function(t,e,n){function r(t){return o(t)?a(t):i(t)}var i=n(214),o=n(73),a=n(259);t.exports=r},171:function(t,e,n){function r(t){return o(t)?a(t):i(t)}var i=n(215),o=n(73),a=n(260);t.exports=r},259:function(t,e){function n(t){for(var e=w.lastIndex=0;w.test(t);)++e;return e}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\ufe0e\\ufe0f",c="["+r+"]",l="["+s+"]",h="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+h+")",p="[^"+r+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",_=f+"?",g="["+u+"]?",m="(?:"+v+"(?:"+[p,d,y].join("|")+")"+g+_+")*",E=g+_+m,b="(?:"+[p+l+"?",l,d,y,c].join("|")+")",w=RegExp(h+"(?="+h+")|"+b+E,"g");t.exports=n},260:function(t,e){function n(t){return t.match(w)||[]}var r="\\ud800-\\udfff",i="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=i+o+a,u="\\ufe0e\\ufe0f",c="["+r+"]",l="["+s+"]",h="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+h+")",p="[^"+r+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",_=f+"?",g="["+u+"]?",m="(?:"+v+"(?:"+[p,d,y].join("|")+")"+g+_+")*",E=g+_+m,b="(?:"+[p+l+"?",l,d,y,c].join("|")+")",w=RegExp(h+"(?="+h+")|"+b+E,"g");t.exports=n},261:function(t,e,n){function r(t,e){return i(y,function(n){var r="_."+n[0];e&n[1]&&!o(t,r)&&t.push(r)}),t.sort()}var i=n(41),o=n(105),a=1,s=2,u=8,c=16,l=32,h=64,f=128,p=256,d=512,y=[["ary",f],["bind",a],["bindKey",s],["curry",u],["curryRight",c],["flip",d],["partial",l],["partialRight",h],["rearg",p]];t.exports=r},262:function(t,e,n){function r(t){if(t instanceof i)return t.clone();var e=new o(t.__wrapped__,t.__chain__);return e.__actions__=a(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var i=n(65),o=n(104),a=n(42);t.exports=r},263:function(t,e,n){function r(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,i(t,o,void 0,void 0,void 0,void 0,e)}var i=n(71),o=128;t.exports=r},264:function(t,e,n){var r=n(106),i=n(23),o=n(140),a=n(25),s=n(143),u=n(29),c=Object.prototype,l=c.hasOwnProperty,h=o(function(t,e){if(s(e)||a(e))return void i(e,u(e),t);for(var n in e)l.call(e,n)&&r(t,n,e[n])});t.exports=h},146:function(t,e,n){function r(t){return o(i(t).toLowerCase())}var i=n(26),o=n(295);t.exports=r},265:function(t,e,n){function r(t){return i(t,o)}var i=n(55),o=4;t.exports=r},266:function(t,e){function n(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}t.exports=n},172:function(t,e,n){function r(t,e,n){e=n?void 0:e;var a=i(t,o,void 0,void 0,void 0,void 0,void 0,e);return a.placeholder=r.placeholder,a}var i=n(71),o=8;r.placeholder={},t.exports=r},267:function(t,e,n){var r=n(85),i=n(92),o=n(243),a=n(286),s=i(function(t){return t.push(void 0,o),r(a,void 0,t)});t.exports=s},268:function(t,e,n){var r=n(217),i=n(67),o=n(92),a=n(174),s=n(56),u=o(function(t,e){var n=s(e);return a(n)&&(n=void 0),a(t)?r(t,i(e,1,a,!0),void 0,n):[]});t.exports=u},173:function(t,e,n){function r(t,e,n){var r=s(t)?i:o;return n&&u(t,e,n)&&(e=void 0),r(t,a(e,3))}var i=n(211),o=n(218),a=n(14),s=n(2),u=n(94);t.exports=r},270:function(t,e,n){function r(t,e){var n=s(t)?i:o;return n(t,a(e,3))}var i=n(166),o=n(219),a=n(14),s=n(2);t.exports=r},271:function(t,e,n){function r(t,e){return i(o(t,e),1)}var i=n(67),o=n(34);t.exports=r},272:function(t,e,n){function r(t){var e=null==t?0:t.length;return e?i(t,1):[]}var i=n(67);t.exports=r},76:function(t,e,n){function r(t,e){var n=s(t)?i:o;return n(t,a(e))}var i=n(41),o=n(20),a=n(230),s=n(2);t.exports=r},273:function(t,e,n){function r(t,e){return 2==e?function(e,n){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}function i(t,e){return 2==e?function(e,n){return t(e,n)}:function(e){return t(e)}}function o(t){for(var e=t?t.length:0,n=Array(e);e--;)n[e]=t[e];return n}function a(t){return function(e){return t({},e)}}function s(t,e){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var o=i[e],a=i.slice(0,e);return o&&f.apply(a,o),e!=r&&f.apply(a,i.slice(e+1)),t.apply(this,a)}}function u(t,e){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=e.apply(void 0,r);return t.apply(void 0,r),i}}}function c(t,e,n,f){function p(t,e){if(I.cap){var n=l.iterateeRearg[t];if(n)return b(e,n);var r=!C&&l.iterateeAry[t];if(r)return E(e,r)}return e}function d(t,e,n){return O||I.curry&&n>1?k(e,n):e}function y(t,e,n){if(I.fixed&&(R||!l.skipFixed[t])){var r=l.methodSpread[t],i=r&&r.start;return void 0===i?L(e,n):s(e,i)}return e}function v(t,e,n){return I.rearg&&n>1&&(P||!l.skipRearg[t])?H(e,l.methodRearg[t]||l.aryRearg[n]):e}function _(t,e){e=V(e);for(var n=-1,r=e.length,i=r-1,o=j(Object(t)),a=o;null!=a&&++n<r;){var s=e[n],u=a[s];null==u||q(u)||W(u)||z(u)||(a[s]=j(n==i?u:Object(u))),a=a[s]}return o}function g(t){return Y.runInContext.convert(t)(void 0)}function m(t,e){var n=l.aliasToReal[t]||t,r=l.remap[n]||n,i=f;return function(t){var o=C?x:D,a=C?x[r]:e,s=M(M({},i),t);return c(o,n,a,s)}}function E(t,e){return w(t,function(t){return"function"==typeof t?i(t,e):t})}function b(t,e){return w(t,function(t){var n=e.length;return r(H(i(t,n),e),n)})}function w(t,e){return function(){var n=arguments.length;if(!n)return t();for(var r=Array(n);n--;)r[n]=arguments[n];var i=I.rearg?0:n-1;return r[i]=e(r[i]),t.apply(void 0,r)}}function T(t,e){var n,r=l.aliasToReal[t]||t,i=e,s=K[r];return s?i=s(e):I.immutable&&(l.mutate.array[r]?i=u(e,o):l.mutate.object[r]?i=u(e,a(e)):l.mutate.set[r]&&(i=u(e,_))),F(G,function(t){return F(l.aryMethod[t],function(e){if(r==e){var o=l.methodSpread[r],a=o&&o.afterRearg;return n=a?y(r,v(r,i,t),t):v(r,y(r,i,t),t),n=p(r,n),n=d(r,n,t),!1}}),!n}),n||(n=i),n==e&&(n=O?k(n,1):function(){return e.apply(this,arguments)}),n.convert=m(r,e),l.placeholder[r]&&(S=!0,n.placeholder=e.placeholder=N),n}var S,C="function"==typeof e,A=e===Object(e);if(A&&(f=n,n=e,e=void 0),null==n)throw new TypeError;f||(f={});var I={cap:!("cap"in f)||f.cap,curry:!("curry"in f)||f.curry,fixed:!("fixed"in f)||f.fixed,immutable:!("immutable"in f)||f.immutable,rearg:!("rearg"in f)||f.rearg},O="curry"in f&&f.curry,R="fixed"in f&&f.fixed,P="rearg"in f&&f.rearg,N=C?n:h,x=C?n.runInContext():void 0,D=C?n:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},L=D.ary,M=D.assign,j=D.clone,k=D.curry,F=D.forEach,U=D.isArray,W=D.isError,q=D.isFunction,z=D.isWeakMap,B=D.keys,H=D.rearg,Q=D.toInteger,V=D.toPath,G=B(l.aryMethod),K={castArray:function(t){return function(){var e=arguments[0];return U(e)?t(o(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[0],n=arguments[1],r=t(e,n),o=r.length;return I.cap&&"number"==typeof n?(n=n>2?n-2:1,o&&o<=n?r:i(r,n)):r}},mixin:function(t){return function(e){var n=this;if(!q(n))return t(n,Object(e));var r=[];return F(B(e),function(t){q(e[t])&&r.push([t,n.prototype[t]])}),t(n,Object(e)),F(r,function(t){var e=t[1];q(e)?n.prototype[t[0]]=e:delete n.prototype[t[0]]}),n}},nthArg:function(t){return function(e){var n=e<0?1:Q(e)+1;return k(t(e),n)}},rearg:function(t){return function(e,n){var r=n?n.length:0;return k(t(e,n),r)}},runInContext:function(e){return function(n){return c(t,e(n),f)}}};if(!A)return T(e,n);var Y=n,J=[];return F(G,function(t){F(l.aryMethod[t],function(t){var e=Y[l.remap[t]||t];e&&J.push([t,T(t,e)])})}),F(B(Y),function(t){var e=Y[t];if("function"==typeof e){for(var n=J.length;n--;)if(J[n][0]==t)return;e.convert=m(t,e),J.push([t,e])}}),F(J,function(t){Y[t[0]]=t[1]}),Y.convert=g,S&&(Y.placeholder=N),F(B(Y),function(t){F(l.realToAlias[t]||[],function(e){Y[e]=Y[t]})}),Y}var l=n(274),h=n(44),f=Array.prototype.push;t.exports=c},274:function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.placeholder={bind:!0,bindKey:!0,curry:!0,curryRight:!0,partial:!0,partialRight:!0},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,n=e.aliasToReal,r={};for(var i in n){var o=n[i];t.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},275:function(t,e,n){t.exports={ary:n(263),assign:n(107),clone:n(265),curry:n(172),forEach:n(41),isArray:n(2),isError:n(280),isFunction:n(6),isWeakMap:n(284),iteratee:n(285),keys:n(108),rearg:n(288),toInteger:n(60),toPath:n(293)}},276:function(t,e,n){var r=n(77),i=r("assign",n(264));i.placeholder=n(44),t.exports=i},77:function(t,e,n){function r(t,e,n){return i(o,t,e,n)}var i=n(273),o=n(275);t.exports=r},44:function(t,e){t.exports={}},277:function(t,e,n){var r=n(77),i=r("setWith",n(291));i.placeholder=n(44),t.exports=i},278:function(t,e,n){var r=n(77),i=r("unset",n(294));i.placeholder=n(44),t.exports=i},479:function(t,e){function n(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}t.exports=n},45:function(t,e,n){function r(t,e){return null!=t&&o(t,e,i)}var i=n(221),o=n(352);t.exports=r},279:function(t,e,n){function r(t){return t===!0||t===!1||o(t)&&i(t)==a}var i=n(27),o=n(9),a="[object Boolean]";t.exports=r},120:function(t,e,n){function r(t,e){return i(t,e)}var i=n(222);t.exports=r},280:function(t,e,n){function r(t){if(!o(t))return!1;var e=i(t);return e==u||e==s||"string"==typeof t.message&&"string"==typeof t.name&&!a(t)}var i=n(27),o=n(9),a=n(54),s="[object DOMException]",u="[object Error]";t.exports=r},95:function(t,e,n){var r=n(223),i=n(69),o=n(144),a=o&&o.isMap,s=a?i(a):r;t.exports=s},281:function(t,e,n){function r(t){return i(t)&&t!=+t}var i=n(282);t.exports=r},282:function(t,e,n){function r(t){return"number"==typeof t||o(t)&&i(t)==a}var i=n(27),o=n(9),a="[object Number]";t.exports=r},283:function(t,e,n){var r=n(225),i=n(69),o=n(144),a=o&&o.isSet,s=a?i(a):r;t.exports=s},12:function(t,e,n){function r(t){return"string"==typeof t||!o(t)&&a(t)&&i(t)==s}var i=n(27),o=n(2),a=n(9),s="[object String]";t.exports=r},284:function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(24),o=n(9),a="[object WeakMap]";t.exports=r},285:function(t,e,n){function r(t){return o("function"==typeof t?t:i(t,a))}var i=n(55),o=n(14),a=1;t.exports=r},56:function(t,e){function n(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}t.exports=n},34:function(t,e,n){function r(t,e){var n=s(t)?i:a;return n(t,o(e,3))}var i=n(19),o=n(14),a=n(169),s=n(2);t.exports=r},46:function(t,e,n){function r(t,e){var n={};return e=a(e,3),o(t,function(t,r,o){i(n,r,e(t,r,o))}),n}var i=n(137),o=n(91),a=n(14);t.exports=r},286:function(t,e,n){var r=n(138),i=n(140),o=i(function(t,e,n,i){r(t,e,n,i)});t.exports=o},287:function(t,e){function n(){}t.exports=n},121:function(t,e,n){var r=n(19),i=n(55),o=n(70),a=n(87),s=n(23),u=n(244),c=n(72),l=n(141),h=1,f=2,p=4,d=c(function(t,e){var n={};if(null==t)return n;var c=!1;e=r(e,function(e){return e=a(e,t),c||(c=e.length>1),e}),s(t,l(t),n),c&&(n=i(n,h|f|p,u));for(var d=e.length;d--;)o(n,e[d]);return n});t.exports=d},57:function(t,e,n){var r=n(226),i=n(72),o=i(function(t,e){return null==t?{}:r(t,e)});t.exports=o},288:function(t,e,n){var r=n(71),i=n(72),o=256,a=i(function(t,e){return r(t,o,void 0,void 0,void 0,e)});t.exports=a},176:function(t,e,n){function r(t,e,n){var r=u(t)?i:s,c=arguments.length<3;return r(t,a(e,4),n,c,o)}var i=n(136),o=n(20),a=n(14),s=n(228),u=n(2);t.exports=r},289:function(t,e,n){function r(t,e){var n=[];if(!t||!t.length)return n;var r=-1,a=[],s=t.length;for(e=i(e,3);++r<s;){var u=t[r];e(u,r,t)&&(n.push(u),a.push(r))}return o(t,a),n}var i=n(14),o=n(227);t.exports=r},290:function(t,e,n){function r(){var t=arguments,e=i(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var i=n(26);t.exports=r},58:function(t,e,n){function r(t,e,n){return null==t?t:i(t,e,n)}var i=n(109);t.exports=r},291:function(t,e,n){function r(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:i(t,e,n,r)}var i=n(109);t.exports=r},59:function(t,e,n){function r(t){if(null==t)return 0;if(a(t))return s(t)?u(t):t.length;var e=o(t);return e==c||e==l?t.size:i(t).length}var i=n(108),o=n(24),a=n(25),s=n(12),u=n(258),c="[object Map]",l="[object Set]";t.exports=r},122:function(t,e,n){function r(t,e,n){var r=s(t)?i:a;return n&&u(t,e,n)&&(e=void 0),r(t,o(e,3))}var i=n(341),o=n(14),a=n(229),s=n(2),u=n(94);t.exports=r},60:function(t,e,n){function r(t){var e=i(t),n=e%1;return e===e?n?e-n:e:0}var i=n(292);t.exports=r},293:function(t,e,n){function r(t){return a(t)?i(t,c):s(t)?[t]:o(u(l(t)))}var i=n(19),o=n(42),a=n(2),s=n(96),u=n(357),c=n(75),l=n(26);t.exports=r},294:function(t,e,n){function r(t,e){return null==t||i(t,e)}var i=n(70);t.exports=r},485:function(t,e,n){function r(t){if(!t||!t.length)return[];var e=0;return t=i(t,function(t){if(u(t))return e=c(t.length,e),!0}),s(e,function(e){return o(t,a(e))})}var i=n(166),o=n(19),a=n(170),s=n(469),u=n(174),c=Math.max;t.exports=r},295:function(t,e,n){var r=n(240),i=r("toUpperCase");t.exports=i},296:function(t,e,n){function r(t){if(u(t)&&!s(t)&&!(t instanceof i)){if(t instanceof o)return t;if(h.call(t,"__wrapped__"))return c(t)}return new o(t)}var i=n(65),o=n(104),a=n(68),s=n(2),u=n(9),c=n(262),l=Object.prototype,h=l.hasOwnProperty;r.prototype=a.prototype,r.prototype.constructor=r,t.exports=r},488:function(t,e,n){var r=n(92),i=n(485),o=r(i);t.exports=o},1144:function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0,e.Helmet=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),h=r(l),f=n(3),p=r(f),d=n(1193),y=r(d),v=n(873),_=r(v),g=n(1145),m=n(655),E=function(t){var e,n;return n=e=function(e){function n(){return o(this,n),a(this,e.apply(this,arguments))}return s(n,e),n.prototype.shouldComponentUpdate=function(t){return!(0,_.default)(this.props,t)},n.prototype.mapNestedChildrenToProps=function(t,e){if(!e)return null;switch(t.type){case m.TAG_NAMES.SCRIPT:case m.TAG_NAMES.NOSCRIPT:return{innerHTML:e};case m.TAG_NAMES.STYLE:return{cssText:e}}throw new Error("<"+t.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(t){var e,n=t.child,r=t.arrayTypeChildren,i=t.newChildProps,o=t.nestedChildren;return u({},r,(e={},e[n.type]=[].concat(r[n.type]||[],[u({},i,this.mapNestedChildrenToProps(n,o))]),e))},n.prototype.mapObjectTypeChildren=function(t){var e,n,r=t.child,i=t.newProps,o=t.newChildProps,a=t.nestedChildren;switch(r.type){case m.TAG_NAMES.TITLE:return u({},i,(e={},e[r.type]=a,e.titleAttributes=u({},o),e));case m.TAG_NAMES.BODY:return u({},i,{bodyAttributes:u({},o)});case m.TAG_NAMES.HTML:return u({},i,{htmlAttributes:u({},o)})}return u({},i,(n={},n[r.type]=u({},o),n))},n.prototype.mapArrayTypeChildrenToProps=function(t,e){var n=u({},e);return Object.keys(t).forEach(function(e){var r;n=u({},n,(r={},r[e]=t[e],r))}),n},n.prototype.warnOnInvalidChildren=function(t,e){return!0},n.prototype.mapChildrenToProps=function(t,e){var n=this,r={};return h.default.Children.forEach(t,function(t){if(t&&t.props){var o=t.props,a=o.children,s=i(o,["children"]),u=(0,g.convertReactPropstoHtmlAttributes)(s);switch(n.warnOnInvalidChildren(t,a),t.type){case m.TAG_NAMES.LINK:case m.TAG_NAMES.META:case m.TAG_NAMES.NOSCRIPT:case m.TAG_NAMES.SCRIPT:case m.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:t,arrayTypeChildren:r,newChildProps:u,nestedChildren:a});break;default:e=n.mapObjectTypeChildren({child:t,newProps:e,newChildProps:u,nestedChildren:a})}}}),e=this.mapArrayTypeChildrenToProps(r,e)},n.prototype.render=function(){var e=this.props,n=e.children,r=i(e,["children"]),o=u({},r);return n&&(o=this.mapChildrenToProps(n,o)),h.default.createElement(t,o)},c(n,null,[{key:"canUseDOM",set:function(e){t.canUseDOM=e}}]),n}(h.default.Component),e.propTypes={base:p.default.object,bodyAttributes:p.default.object,children:p.default.oneOfType([p.default.arrayOf(p.default.node),p.default.node]),defaultTitle:p.default.string,defer:p.default.bool,encodeSpecialCharacters:p.default.bool,htmlAttributes:p.default.object,link:p.default.arrayOf(p.default.object),meta:p.default.arrayOf(p.default.object),noscript:p.default.arrayOf(p.default.object),onChangeClientState:p.default.func,script:p.default.arrayOf(p.default.object),style:p.default.arrayOf(p.default.object),title:p.default.string,titleAttributes:p.default.object,titleTemplate:p.default.string},e.defaultProps={defer:!0,encodeSpecialCharacters:!0},e.peek=t.peek,e.rewind=function(){var e=t.rewind();return e||(e=(0,g.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},n},b=function(){return null},w=(0,y.default)(g.reducePropsToState,g.handleClientStateChange,g.mapStateOnServer)(b),T=E(w);T.renderStatic=T.rewind,e.Helmet=T,e.default=T},655:function(t,e){e.__esModule=!0;var n=(e.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},e.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"}),r=(e.VALID_TAG_NAMES=Object.keys(n).map(function(t){return n[t]}),e.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},e.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});e.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},e.HTML_TAG_MAP=Object.keys(r).reduce(function(t,e){return t[r[e]]=e,t},{}),e.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],e.HELMET_ATTRIBUTE="data-react-helmet"},1145:function(t,e,n){(function(t){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.warn=e.requestAnimationFrame=e.reducePropsToState=e.mapStateOnServer=e.handleClientStateChange=e.convertReactPropstoHtmlAttributes=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(1),s=r(a),u=n(16),c=r(u),l=n(655),h=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},f=function(t){var e=_(t,l.TAG_NAMES.TITLE),n=_(t,l.HELMET_PROPS.TITLE_TEMPLATE);if(n&&e)return n.replace(/%s/g,function(){return e});var r=_(t,l.HELMET_PROPS.DEFAULT_TITLE);return e||r||void 0},p=function(t){return _(t,l.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},d=function(t,e){return e.filter(function(e){return"undefined"!=typeof e[t]}).map(function(e){return e[t]}).reduce(function(t,e){return o({},t,e)},{})},y=function(t,e){return e.filter(function(t){return"undefined"!=typeof t[l.TAG_NAMES.BASE]}).map(function(t){return t[l.TAG_NAMES.BASE]}).reverse().reduce(function(e,n){if(!e.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i],a=o.toLowerCase();if(t.indexOf(a)!==-1&&n[a])return e.concat(n)}return e},[])},v=function(t,e,n){var r={};return n.filter(function(e){return!!Array.isArray(e[t])||("undefined"!=typeof e[t]&&T("Helmet: "+t+' should be of type "Array". Instead found type "'+i(e[t])+'"'),!1)}).map(function(e){return e[t]}).reverse().reduce(function(t,n){var i={};n.filter(function(t){for(var n=void 0,o=Object.keys(t),a=0;a<o.length;a++){var s=o[a],u=s.toLowerCase();e.indexOf(u)===-1||n===l.TAG_PROPERTIES.REL&&"canonical"===t[n].toLowerCase()||u===l.TAG_PROPERTIES.REL&&"stylesheet"===t[u].toLowerCase()||(n=u),e.indexOf(s)===-1||s!==l.TAG_PROPERTIES.INNER_HTML&&s!==l.TAG_PROPERTIES.CSS_TEXT&&s!==l.TAG_PROPERTIES.ITEM_PROP||(n=s)}if(!n||!t[n])return!1;var c=t[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][c]&&(i[n][c]=!0,!0)}).reverse().forEach(function(e){return t.push(e)});for(var o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=(0,c.default)({},r[s],i[s]);r[s]=u}return t},[]).reverse()},_=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.hasOwnProperty(e))return r[e]}return null},g=function(t){return{baseTag:y([l.TAG_PROPERTIES.HREF],t),bodyAttributes:d(l.ATTRIBUTE_NAMES.BODY,t),defer:_(t,l.HELMET_PROPS.DEFER),encode:_(t,l.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:d(l.ATTRIBUTE_NAMES.HTML,t),linkTags:v(l.TAG_NAMES.LINK,[l.TAG_PROPERTIES.REL,l.TAG_PROPERTIES.HREF],t),metaTags:v(l.TAG_NAMES.META,[l.TAG_PROPERTIES.NAME,l.TAG_PROPERTIES.CHARSET,l.TAG_PROPERTIES.HTTPEQUIV,l.TAG_PROPERTIES.PROPERTY,l.TAG_PROPERTIES.ITEM_PROP],t),noscriptTags:v(l.TAG_NAMES.NOSCRIPT,[l.TAG_PROPERTIES.INNER_HTML],t),onChangeClientState:p(t),scriptTags:v(l.TAG_NAMES.SCRIPT,[l.TAG_PROPERTIES.SRC,l.TAG_PROPERTIES.INNER_HTML],t),styleTags:v(l.TAG_NAMES.STYLE,[l.TAG_PROPERTIES.CSS_TEXT],t),title:f(t),titleAttributes:d(l.ATTRIBUTE_NAMES.TITLE,t)}},m=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout(function(){m(e)},0)}}(),E=function(t){return clearTimeout(t)},b="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||m:t.requestAnimationFrame||m,w="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||E:t.cancelAnimationFrame||E,T=function(t){return console&&"function"==typeof console.warn&&console.warn(t)},S=null,C=function(t){S&&w(S),t.defer?S=b(function(){A(t,function(){S=null})}):(A(t),S=null)},A=function(t,e){var n=t.baseTag,r=t.bodyAttributes,i=t.htmlAttributes,o=t.linkTags,a=t.metaTags,s=t.noscriptTags,u=t.onChangeClientState,c=t.scriptTags,h=t.styleTags,f=t.title,p=t.titleAttributes;R(l.TAG_NAMES.BODY,r),R(l.TAG_NAMES.HTML,i),O(f,p);var d={baseTag:P(l.TAG_NAMES.BASE,n),linkTags:P(l.TAG_NAMES.LINK,o),metaTags:P(l.TAG_NAMES.META,a),noscriptTags:P(l.TAG_NAMES.NOSCRIPT,s),scriptTags:P(l.TAG_NAMES.SCRIPT,c),styleTags:P(l.TAG_NAMES.STYLE,h)},y={},v={};Object.keys(d).forEach(function(t){var e=d[t],n=e.newTags,r=e.oldTags;n.length&&(y[t]=n),r.length&&(v[t]=d[t].oldTags)}),e&&e(),u(t,y,v)},I=function(t){return Array.isArray(t)?t.join(""):t},O=function(t,e){"undefined"!=typeof t&&document.title!==t&&(document.title=I(t)),R(l.TAG_NAMES.TITLE,e)},R=function(t,e){var n=document.getElementsByTagName(t)[0];if(n){for(var r=n.getAttribute(l.HELMET_ATTRIBUTE),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(e),s=0;s<a.length;s++){var u=a[s],c=e[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),i.indexOf(u)===-1&&i.push(u);var h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(var f=o.length-1;f>=0;f--)n.removeAttribute(o[f]);i.length===o.length?n.removeAttribute(l.HELMET_ATTRIBUTE):n.getAttribute(l.HELMET_ATTRIBUTE)!==a.join(",")&&n.setAttribute(l.HELMET_ATTRIBUTE,a.join(","))}},P=function(t,e){var n=document.head||document.querySelector(l.TAG_NAMES.HEAD),r=n.querySelectorAll(t+"["+l.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;
return e&&e.length&&e.forEach(function(e){var n=document.createElement(t);for(var r in e)if(e.hasOwnProperty(r))if(r===l.TAG_PROPERTIES.INNER_HTML)n.innerHTML=e.innerHTML;else if(r===l.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=e.cssText:n.appendChild(document.createTextNode(e.cssText));else{var s="undefined"==typeof e[r]?"":e[r];n.setAttribute(r,s)}n.setAttribute(l.HELMET_ATTRIBUTE,"true"),i.some(function(t,e){return a=e,n.isEqualNode(t)})?i.splice(a,1):o.push(n)}),i.forEach(function(t){return t.parentNode.removeChild(t)}),o.forEach(function(t){return n.appendChild(t)}),{oldTags:i,newTags:o}},N=function(t){return Object.keys(t).reduce(function(e,n){var r="undefined"!=typeof t[n]?n+'="'+t[n]+'"':""+n;return e?e+" "+r:r},"")},x=function(t,e,n,r){var i=N(n),o=I(e);return i?"<"+t+" "+l.HELMET_ATTRIBUTE+'="true" '+i+">"+h(o,r)+"</"+t+">":"<"+t+" "+l.HELMET_ATTRIBUTE+'="true">'+h(o,r)+"</"+t+">"},D=function(t,e,n){return e.reduce(function(e,r){var i=Object.keys(r).filter(function(t){return!(t===l.TAG_PROPERTIES.INNER_HTML||t===l.TAG_PROPERTIES.CSS_TEXT)}).reduce(function(t,e){var i="undefined"==typeof r[e]?e:e+'="'+h(r[e],n)+'"';return t?t+" "+i:i},""),o=r.innerHTML||r.cssText||"",a=l.SELF_CLOSING_TAGS.indexOf(t)===-1;return e+"<"+t+" "+l.HELMET_ATTRIBUTE+'="true" '+i+(a?"/>":">"+o+"</"+t+">")},"")},L=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce(function(e,n){return e[l.REACT_TAG_MAP[n]||n]=t[n],e},e)},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce(function(e,n){return e[l.HTML_TAG_MAP[n]||n]=t[n],e},e)},j=function(t,e,n){var r,i=(r={key:e},r[l.HELMET_ATTRIBUTE]=!0,r),o=L(n,i);return[s.default.createElement(l.TAG_NAMES.TITLE,o,e)]},k=function(t,e){return e.map(function(e,n){var r,i=(r={key:n},r[l.HELMET_ATTRIBUTE]=!0,r);return Object.keys(e).forEach(function(t){var n=l.REACT_TAG_MAP[t]||t;if(n===l.TAG_PROPERTIES.INNER_HTML||n===l.TAG_PROPERTIES.CSS_TEXT){var r=e.innerHTML||e.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=e[t]}),s.default.createElement(t,i)})},F=function(t,e,n){switch(t){case l.TAG_NAMES.TITLE:return{toComponent:function(){return j(t,e.title,e.titleAttributes,n)},toString:function(){return x(t,e.title,e.titleAttributes,n)}};case l.ATTRIBUTE_NAMES.BODY:case l.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return L(e)},toString:function(){return N(e)}};default:return{toComponent:function(){return k(t,e)},toString:function(){return D(t,e,n)}}}},U=function(t){var e=t.baseTag,n=t.bodyAttributes,r=t.encode,i=t.htmlAttributes,o=t.linkTags,a=t.metaTags,s=t.noscriptTags,u=t.scriptTags,c=t.styleTags,h=t.title,f=void 0===h?"":h,p=t.titleAttributes;return{base:F(l.TAG_NAMES.BASE,e,r),bodyAttributes:F(l.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:F(l.ATTRIBUTE_NAMES.HTML,i,r),link:F(l.TAG_NAMES.LINK,o,r),meta:F(l.TAG_NAMES.META,a,r),noscript:F(l.TAG_NAMES.NOSCRIPT,s,r),script:F(l.TAG_NAMES.SCRIPT,u,r),style:F(l.TAG_NAMES.STYLE,c,r),title:F(l.TAG_NAMES.TITLE,{title:f,titleAttributes:p},r)}};e.convertReactPropstoHtmlAttributes=M,e.handleClientStateChange=C,e.mapStateOnServer=U,e.reducePropsToState=g,e.requestAnimationFrame=b,e.warn=T}).call(e,function(){return this}())},301:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){var n=e._.config,r=n.onProfileListenerError,i=n.logErrors;return function(t){if(i&&console.error("Error with profile listener: "+(t.message||""),t),(0,p.default)(r)){var n=r(t,e);if((0,p.default)(n.then))return n}return Promise.reject(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.signInWithPhoneNumber=e.linkWithCredential=e.reloadAuth=e.updateEmail=e.updateAuth=e.updateProfile=e.verifyPasswordResetCode=e.confirmPasswordReset=e.resetPassword=e.createUser=e.logout=e.login=e.init=e.handleRedirectResult=e.createUserProfile=e.watchUserProfile=e.handleProfileWatchResponse=e.unWatchUserProfile=void 0;var a=n(57),s=r(a),u=n(121),c=r(u),l=n(76),h=r(l),f=n(6),p=r(f),d=n(12),y=r(d),v=n(2),_=r(v),g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=n(8),E=n(126),b=n(80),w=n(47),T=function(t,e){return t({type:m.actionTypes.LOGIN_ERROR,authError:e})},S=e.unWatchUserProfile=function(t){var e=t._,n=e.authUid,r=e.config,i=r.userProfile,o=r.useFirestoreForProfile;t._.profileWatch&&(o&&t.firestore?t._.profileWatch():t.database().ref().child(i+"/"+n).off("value",t._.profileWatch),t._.profileWatch=null)},C=function(t){return t&&t.val?t.val():t&&t.data&&t.exists?t.data():null},A=e.handleProfileWatchResponse=function(t,e,n){var r=e._.config,i=r.profileParamsToPopulate,o=r.autoPopulateProfile,a=r.useFirestoreForProfile,s=r.logErrors,u=C(n);!i||a||!(0,_.default)(i)&&!(0,y.default)(i)?(a&&i&&console.warn("Profile population is not yet supported for Firestore"),t({type:m.actionTypes.SET_PROFILE,profile:u})):(0,w.promisesForPopulate)(e,n.key,u,i).then(function(e){if((0,h.default)(e,function(e,n){t({type:m.actionTypes.SET,path:n,data:e,timestamp:Date.now(),requesting:!1,requested:!0})}),o){var r=(0,w.getPopulateObjs)(i),a=n.val();t({type:m.actionTypes.SET_PROFILE,profile:(0,E.populate)({profile:a,data:e},"profile",r)})}else t({type:m.actionTypes.SET_PROFILE,profile:u})}).catch(function(e){s&&console.error("RRF: Error retrieving data for profile population. Firebase:",e),t({type:m.actionTypes.UNAUTHORIZED_ERROR,authError:"Error during profile population: "+e.message}),t({type:m.actionTypes.SET_PROFILE,profile:u})})},I=e.watchUserProfile=function(t,e){var n=e._,r=n.authUid,i=n.config,a=i.userProfile,s=i.useFirestoreForProfile;if(S(e),a)if(s&&e.firestore)e._.profileWatch=e.firestore().collection(a).doc(r).onSnapshot(function(n){return A(t,e,n)},o(t,e));else{if(!e.database)throw new Error("Real Time Database or Firestore must be included to enable user profile");e._.profileWatch=e.database().ref().child(a+"/"+r).on("value",function(n){return A(t,e,n)},o(t,e))}},O=e.createUserProfile=function(t,e,n,r){var i=e._.config;if(!i.userProfile||!e.database&&!e.firestore)return Promise.resolve(n);if((0,p.default)(i.profileFactory))try{r=i.profileFactory(n,r)}catch(t){return console.error("Error occured within profileFactory function:",t.message||t),Promise.reject(t)}return i.useFirestoreForProfile?e.firestore().collection(i.userProfile).doc(n.uid||n.user.uid).get().then(function(t){if(!i.updateProfileOnLogin&&t.exists)return t.data();var e=r;if(!e){var o=n.uid?n.toJSON?n.toJSON():n:n.user.toJSON?n.user.toJSON():n.user;e=g({},(0,c.default)(o,i.keysToRemoveFromAuth),{avatarUrl:o.photoURL})}return(0,_.default)(e.providerData)&&(e.providerData=e.providerData.map(function(t){return(0,s.default)(t,i.keysToPreserveFromProviderData)})),t.ref.set(e,{merge:!0}).then(function(){return e})}).catch(function(e){return t({type:m.actionTypes.UNAUTHORIZED_ERROR,authError:e}),Promise.reject(e)}):e.database().ref().child(i.userProfile+"/"+(n.user?n.user.uid:n.uid)).once("value").then(function(t){return i.updateProfileOnLogin||null===t.val()?t.ref.update(r).then(function(){return r}):t.val()}).catch(function(n){return t({type:m.actionTypes.UNAUTHORIZED_ERROR,authError:n}),(0,p.default)(i.onProfileWriteError)&&i.onProfileWriteError(n,e),Promise.reject(n)})},R=function(t,e,n){var r=e._.config;n?(e._.authUid=n.uid,r.presence&&(0,b.setupPresence)(t,e),t({type:m.actionTypes.LOGIN,auth:n,preserve:r.preserveOnLogin}),I(t,e),(0,p.default)(r.onAuthStateChanged)&&r.onAuthStateChanged(n,e,t)):((0,p.default)(r.onAuthStateChanged)&&e._.config.onAuthStateChanged(n,e,t),t({type:m.actionTypes.AUTH_EMPTY_CHANGE,preserve:r.preserveOnEmptyAuthChange}))},P=e.handleRedirectResult=function(t,e,n){if("function"==typeof e._.config.onRedirectResult&&e._.config.onRedirectResult(n,e,t),n&&n.user){var r=n.user;return e._.authUid=r.uid,I(t,e),t({type:m.actionTypes.LOGIN,auth:r,preserve:e._.config.preserveOnLogin}),O(t,e,r,{email:r.email,displayName:r.providerData[0].displayName||r.email,avatarUrl:r.providerData[0].photoURL,providerData:r.providerData})}},N=e.init=function(t,e){e.auth&&(t({type:m.actionTypes.AUTHENTICATION_INIT_STARTED}),e.auth().onAuthStateChanged(function(n){return R(t,e,n)}),e._.config.enableRedirectHandling&&(0,p.default)(e.auth().getRedirectResult)&&"undefined"!=typeof window&&window.location&&window.location.protocol&&window.location.protocol.indexOf("http")!==-1&&e.auth().getRedirectResult().then(function(n){return P(t,e,n)}).catch(function(e){return T(t,e),Promise.reject(e)}),e.auth().currentUser,t({type:m.actionTypes.AUTHENTICATION_INIT_FINISHED}))},x=e.login=function(t,e,n){var r;e._.config.resetBeforeLogin&&T(t,null);var o=(0,b.getLoginMethodAndParams)(e,n),a=o.method,s=o.params;return(r=e.auth())[a].apply(r,i(s)).then(function(r){if(!r)return Promise.resolve(null);if(["signInWithEmailAndPassword","signInAndRetrieveDataWithEmailAndPassword"].includes(a))return{user:r};if(["signInWithCustomToken","signInAndRetrieveDataWithCustomToken"].includes(a))return e._.config.updateProfileOnLogin?O(t,e,r,n.profile):{user:r};if("signInWithPhoneNumber"===a)return g({},r,{confirm:function(n){return r.confirm(n).then(function(n){var r=n.user,i=n.additionalUserInfo;return O(t,e,r,{phoneNumber:r.providerData[0].phoneNumber,providerData:r.providerData}).then(function(t){return{profile:t,user:r,additionalUserInfo:i}})})}});var i=r.user||r;return O(t,e,i,n.profile||{email:i.email,displayName:i.providerData[0].displayName||i.email,avatarUrl:i.providerData[0].photoURL,providerData:i.providerData}).then(function(t){return g({profile:t},r)})}).catch(function(e){return T(t,e),Promise.reject(e)})},D=e.logout=function(t,e){return e.auth().signOut().then(function(){return t({type:m.actionTypes.LOGOUT,preserve:e._.config.preserveOnLogout}),e._.authUid=null,S(e),e})},L=e.createUser=function(t,e,n,r){var i=n.email,o=n.password,a=n.signIn;if(T(t,null),!i||!o){var s=new Error("Email and Password are required to create user");return T(t,s),Promise.reject(s)}return e.auth().createUserWithEmailAndPassword(i,o).then(function(n){return e.auth().currentUser||a&&a===!1?O(t,e,n,r||{email:i}):x(t,e,{email:i,password:o}).then(function(){return O(t,e,n,r||{email:i})}).catch(function(e){if(e)switch(e.code){case"auth/user-not-found":T(t,new Error("The specified user account does not exist."));break;default:T(t,e)}return Promise.reject(e)})}).catch(function(e){return T(t,e),Promise.reject(e)})},M=e.resetPassword=function(t,e,n){return T(t,null),e.auth().sendPasswordResetEmail(n).catch(function(e){if(e){switch(e.code){case"auth/user-not-found":T(t,new Error("The specified user account does not exist."));break;default:T(t,e)}return Promise.reject(e)}})},j=e.confirmPasswordReset=function(t,e,n,r){return T(t,null),e.auth().confirmPasswordReset(n,r).catch(function(e){if(e){switch(e.code){case"auth/expired-action-code":T(t,new Error("The action code has expired."));break;case"auth/invalid-action-code":T(t,new Error("The action code is invalid."));break;case"auth/user-disabled":T(t,new Error("The user is disabled."));break;case"auth/user-not-found":T(t,new Error("The user is not found."));break;case"auth/weak-password":T(t,new Error("The password is not strong enough."));break;default:T(t,e)}return Promise.reject(e)}})},k=e.verifyPasswordResetCode=function(t,e,n){return T(t,null),e.auth().verifyPasswordResetCode(n).catch(function(e){return e&&T(t,e),Promise.reject(e)})},F=e.updateProfile=function(t,e,n){var r=e._.config;t({type:m.actionTypes.PROFILE_UPDATE_START,payload:n});var i=r.useFirestoreForProfile?b.updateProfileOnFirestore:b.updateProfileOnRTDB;return i(e,n).then(function(e){return t({type:m.actionTypes.PROFILE_UPDATE_SUCCESS,payload:r.useFirestoreForProfile?e.data():e.val()}),e}).catch(function(e){return t({type:m.actionTypes.PROFILE_UPDATE_ERROR,error:e}),Promise.reject(e)})},U=e.updateAuth=function(t,e,n,r){if(t({type:m.actionTypes.AUTH_UPDATE_START,payload:n}),!e.auth().currentUser){var i=new Error("User must be logged in to update auth.");return t({type:m.actionTypes.AUTH_UPDATE_ERROR,payload:i}),Promise.reject(i)}return e.auth().currentUser.updateProfile(n).then(function(i){return t({type:m.actionTypes.AUTH_UPDATE_SUCCESS,auth:e.auth().currentUser}),r?F(t,e,n):i}).catch(function(e){return t({type:m.actionTypes.AUTH_UPDATE_ERROR,error:e}),Promise.reject(e)})},W=e.updateEmail=function(t,e,n,r){if(t({type:m.actionTypes.EMAIL_UPDATE_START,payload:n}),!e.auth().currentUser){var i=new Error("User must be logged in to update email.");return t({type:m.actionTypes.EMAIL_UPDATE_ERROR,error:i}),Promise.reject(i)}return e.auth().currentUser.updateEmail(n).then(function(i){return t({type:m.actionTypes.EMAIL_UPDATE_SUCCESS,payload:n}),r?F(t,e,{email:n}):i}).catch(function(e){return t({type:m.actionTypes.EMAIL_UPDATE_ERROR,error:e}),Promise.reject(e)})},q=e.reloadAuth=function(t,e){if(t({type:m.actionTypes.AUTH_RELOAD_START}),!e.auth().currentUser){var n=new Error("User must be logged in to reload auth.");return t({type:m.actionTypes.AUTH_RELOAD_ERROR,error:n}),Promise.reject(n)}return e.auth().currentUser.reload().then(function(){var n=e.auth().currentUser;return t({type:m.actionTypes.AUTH_RELOAD_SUCCESS,payload:n}),n}).catch(function(e){return t({type:m.actionTypes.AUTH_RELOAD_ERROR,error:e}),Promise.reject(e)})},z=(e.linkWithCredential=function(t,e,n){if(t({type:m.actionTypes.AUTH_LINK_START}),!e.auth().currentUser){var r=new Error("User must be logged in to link with credential.");return t({type:m.actionTypes.AUTH_LINK_ERROR,error:r}),Promise.reject(r)}return e.auth().currentUser.linkWithCredential(n).then(function(e){return t({type:m.actionTypes.AUTH_LINK_SUCCESS,payload:e}),e}).catch(function(e){return t({type:m.actionTypes.AUTH_LINK_ERROR,error:e}),Promise.reject(e)})},e.signInWithPhoneNumber=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return x(e,t,g({phoneNumber:n,applicationVerifier:r},i))});e.default={dispatchLoginError:T,unWatchUserProfile:S,watchUserProfile:I,init:N,createUserProfile:O,login:x,logout:D,createUser:L,resetPassword:M,confirmPasswordReset:j,verifyPasswordResetCode:k,updateAuth:U,updateProfile:F,updateEmail:W,reloadAuth:q,signInWithPhoneNumber:z}},123:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.storageActions=e.queryActions=e.authActions=void 0;var i=n(301),o=r(i),a=n(124),s=r(a),u=n(302),c=r(u);e.authActions=o,e.queryActions=s,e.storageActions=c,e.default={authActions:o,queryActions:s,storageActions:c}},124:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.remove=e.unWatchEvents=e.watchEvents=e.unWatchEvent=e.watchEvent=void 0;var i=n(2),o=r(i),a=n(8),s=n(128),u=e.watchEvent=function(t,e,n){if(!t.database||"function"!=typeof t.database)throw new Error("Firebase database is required to create watchers");var r=n.type,i=n.path,o=n.populates,u=n.queryParams,c=n.queryId,l=n.isQuery,h=n.storeAs,f=t._.config.logErrors,p=h?i+"@"+h:i,d=c||(0,s.getQueryIdFromPath)(i),y=(0,s.getWatcherCount)(t,r,p,d);if(y>0&&d&&(0,s.unsetWatcher)(t,e,r,i,d),(0,s.setWatcher)(t,e,r,p,d),"first_child"===r)return t.database().ref().child(i).orderByKey().limitToFirst(1).once("value").then(function(t){return null===t.val()&&e({type:a.actionTypes.NO_VALUE,path:h||i}),t}).catch(function(t){return e({type:a.actionTypes.ERROR,path:h||i,payload:t}),Promise.reject(t)});var v=t.database().ref().child(i);return l&&(v=(0,s.applyParamsToQuery)(u,v)),e({type:a.actionTypes.START,path:h||i}),"once"===r?v.once("value").then(function(n){return null===n.val()?e({type:a.actionTypes.NO_VALUE,path:h||i}):o?(0,s.populateAndDispatch)(t,e,{path:i,storeAs:h,snapshot:n,data:n.val(),populates:o}):e({type:a.actionTypes.SET,path:h||i,data:n.val(),ordered:(0,s.orderedFromSnapshot)(n)})}).catch(function(t){return e({type:a.actionTypes.UNAUTHORIZED_ERROR,payload:t}),Promise.reject(t)}):void v.on(r,function(n){var u="child_removed"===r?void 0:n.val(),c=h||"value"===r?i:i+"/"+n.key;if(!o){var l="child_added"===r?[{key:n.key,value:n.val()}]:(0,s.orderedFromSnapshot)(n);return e({type:a.actionTypes.SET,path:h||c,data:u,ordered:l})}return(0,s.populateAndDispatch)(t,e,{path:i,storeAs:h,snapshot:n,data:n.val(),populates:o})},function(t){f&&console.log("RRF: Error retrieving data for path: "+i+", storeAs: "+h+". Firebase:",t),e({type:a.actionTypes.ERROR,storeAs:h,path:i,payload:t})})},c=e.unWatchEvent=function(t,e,n){var r=n.type,i=n.path,o=n.storeAs,a=n.queryId,u=o?i+"@"+o:i;(0,s.unsetWatcher)(t,e,r,u,a)},l=e.watchEvents=function(t,e,n){if(!(0,o.default)(n))throw new Error("Events config must be an Array");return n.map(function(n){return u(t,e,n)})},h=e.unWatchEvents=function(t,e,n){return n.forEach(function(n){return c(t,e,n)})},f=e.remove=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.dispatchAction,o=void 0===i||i,s=t._.config.dispatchRemoveAction;return t.database().ref(n).remove().then(function(){return s&&o&&e({type:a.actionTypes.REMOVE,path:n}),n}).catch(function(t){return e({type:a.actionTypes.ERROR,payload:t}),Promise.reject(t)})};e.default={watchEvents:l,unWatchEvents:h,remove:f}},302:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}Object.defineProperty(e,"__esModule",{value:!0}),e.deleteFile=e.uploadFiles=e.uploadFile=void 0;var o=n(6),a=r(o),s=n(34),u=r(s),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=n(8),h=n(127),f=n(309),p=l.actionTypes.FILE_UPLOAD_START,d=l.actionTypes.FILE_UPLOAD_ERROR,y=l.actionTypes.FILE_UPLOAD_COMPLETE,v=l.actionTypes.FILE_DELETE_START,_=l.actionTypes.FILE_DELETE_ERROR,g=l.actionTypes.FILE_DELETE_COMPLETE,m=e.uploadFile=function(t,e,n){if(!e.storage)throw new Error("Firebase storage is required to upload files");var r=n||{},i=r.path,o=r.file,s=r.dbPath,u=r.options,l=void 0===u?{progress:!1}:u,h=e._.config.logErrors,v=(0,a.default)(l.name)?l.name(o,e,n):l.name,_=v||o.name,g=c({},n,{filename:_});t({type:p,payload:c({},n,{filename:_})});var m=function(){return l.progress?(0,f.uploadFileWithProgress)(t,e,{path:i,file:o,filename:_,meta:g}):e.storage().ref(i+"/"+_).put(o)};return m().then(function(r){return s&&e.database?(0,f.writeMetadataToDb)({firebase:e,uploadTaskSnapshot:r,dbPath:s,options:l}).then(function(e){return t({type:y,meta:c({},n,{filename:_}),payload:e}),e}):(t({type:y,meta:c({},n,{filename:_}),payload:{uploadTaskSnapshot:r,uploadTaskSnaphot:r}}),{uploadTaskSnapshot:r,uploadTaskSnaphot:r})}).catch(function(e){return h&&console.error&&console.error("RRF: Error uploading file: "+(e.message||e),e),t({type:d,path:i,payload:e}),Promise.reject(e)})},E=function(t,e,n){var r=n.files,o=i(n,["files"]);return Promise.all((0,u.default)(r,function(n){return m(t,e,c({file:n},o))}))};e.uploadFiles=E;e.deleteFile=function(t,e,n){var r=n.path,i=n.dbPath;return(0,h.wrapInDispatch)(t,{method:f.deleteFile,args:[e,{path:r,dbPath:i}],types:[v,g,_]})}},8:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.actionsPrefix="@@reactReduxFirebase",r=e.actionTypes={START:n+"/START",SET:n+"/SET",REMOVE:n+"/REMOVE",MERGE:n+"/MERGE",SET_PROFILE:n+"/SET_PROFILE",LOGIN:n+"/LOGIN",LOGOUT:n+"/LOGOUT",LOGIN_ERROR:n+"/LOGIN_ERROR",NO_VALUE:n+"/NO_VALUE",UNAUTHORIZED_ERROR:n+"/UNAUTHORIZED_ERROR",ERROR:n+"/ERROR",CLEAR_ERRORS:n+"/CLEAR_ERRORS",SET_LISTENER:n+"/SET_LISTENER",UNSET_LISTENER:n+"/UNSET_LISTENER",AUTHENTICATION_INIT_STARTED:n+"/AUTHENTICATION_INIT_STARTED",AUTHENTICATION_INIT_FINISHED:n+"/AUTHENTICATION_INIT_FINISHED",SESSION_START:n+"/SESSION_START",SESSION_END:n+"/SESSION_END",FILE_UPLOAD_START:n+"/FILE_UPLOAD_START",FILE_UPLOAD_ERROR:n+"/FILE_UPLOAD_ERROR",FILE_UPLOAD_PROGRESS:n+"/FILE_UPLOAD_PROGRESS",FILE_UPLOAD_COMPLETE:n+"/FILE_UPLOAD_COMPLETE",FILE_DELETE_START:n+"/FILE_DELETE_START",FILE_DELETE_ERROR:n+"/FILE_DELETE_ERROR",FILE_DELETE_COMPLETE:n+"/FILE_DELETE_COMPLETE",AUTH_UPDATE_START:n+"/AUTH_UPDATE_START",AUTH_UPDATE_SUCCESS:n+"/AUTH_UPDATE_SUCCESS",AUTH_UPDATE_ERROR:n+"/AUTH_UPDATE_ERROR",PROFILE_UPDATE_START:n+"/PROFILE_UPDATE_START",PROFILE_UPDATE_SUCCESS:n+"/PROFILE_UPDATE_SUCCESS",PROFILE_UPDATE_ERROR:n+"/PROFILE_UPDATE_ERROR",EMAIL_UPDATE_START:n+"/EMAIL_UPDATE_START",EMAIL_UPDATE_SUCCESS:n+"/EMAIL_UPDATE_SUCCESS",EMAIL_UPDATE_ERROR:n+"/EMAIL_UPDATE_ERROR",AUTH_RELOAD_START:n+"/AUTH_RELOAD_START",AUTH_RELOAD_ERROR:n+"/AUTH_RELOAD_ERROR",AUTH_RELOAD_SUCCESS:n+"/AUTH_RELOAD_SUCCESS",AUTH_LINK_START:n+"/AUTH_LINK_START",AUTH_LINK_ERROR:n+"/AUTH_LINK_ERROR",AUTH_LINK_SUCCESS:n+"/AUTH_LINK_SUCCESS",AUTH_EMPTY_CHANGE:n+"/AUTH_EMPTY_CHANGE"},i=e.defaultConfig={userProfile:null,presence:null,sessions:"sessions",enableLogging:!1,logErrors:!0,preserveOnLogout:null,preserveOnEmptyAuthChange:null,resetBeforeLogin:!0,updateProfileOnLogin:!0,enableRedirectHandling:!0,autoPopulateProfile:!1,setProfilePopulateResults:!1,dispatchOnUnsetListener:!0,dispatchRemoveAction:!1,enableEmptyAuthChanges:!0,firebaseStateName:"firebase",attachAuthIsReady:!1,keysToRemoveFromAuth:["appName","apiKey","authDomain","redirectEventId","stsTokenManager","uid"],keysToPreserveFromProviderData:["email","phoneNumber","photoURL","providerId","uid"]};e.supportedAuthProviders=["google","github","twitter","facebook"],e.topLevelPaths=["auth","profile","ordered","data"];e.default={actionTypes:r,defaultConfig:i}},125:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.createFirebaseInstance=void 0;var o=n(7),a=r(o),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=n(32),c=n(127),l=n(123);e.createFirebaseInstance=function(t,e,n){e.enableLogging&&t.database&&"function"==typeof t.database.enableLogging&&t.database.enableLogging(e.enableLogging);var r={watchers:{},listeners:{},callbacks:{},queries:{},config:e,authUid:null};Object.defineProperty(t,"_",{value:r,writable:!0,enumerable:!0,configurable:!0});var o=function(e,n,r,o){if((0,a.default)(r)){var u="update"===e?"updated":"created",c=s({},r,i({},u+"At",t.database.ServerValue.TIMESTAMP));return t.auth().currentUser&&(c[u+"By"]=t.auth().currentUser.uid),t.database().ref(n)[e](c,o)}return t.database().ref(n)[e](r,o)},h=function(e,n,r){return t.database().ref(e).set(n,r)},f=function(t,e,n){return o("set",t,e,n)},p=function(e,n,r){return t.database().ref(e).push(n,r)},d=function(t,e,n){return o("push",t,e,n)},y=function(e,n,r){return t.database().ref(e).update(n,r)},v=function(t,e,n){return o("update",t,e,n)},_=function(e,r,i){return l.queryActions.remove(t,n,e,i).then(function(){return"function"==typeof r&&r(),e})},g=function(e,n,r){return t.database().ref(e).transaction(function(t){return null===t?n:void 0}).then(function(t){var e=t.committed,n=t.snapshot;if(!e){var i=new Error("Path already exists.");return r&&r(i),Promise.reject(i)}return r&&r(n),n})},m=function(e,r,i,o){return l.storageActions.uploadFile(n,t,{path:e,file:r,dbPath:i,options:o})},E=function(e,r,i,o){return l.storageActions.uploadFiles(n,t,{path:e,files:r,dbPath:i,options:o})},b=function(e,r){return l.storageActions.deleteFile(n,t,{path:e,dbPath:r})},w=function(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return l.queryActions.watchEvent(t,n,s({type:e,path:r,storeAs:i},o))},T=function(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return l.queryActions.unWatchEvent(t,n,s({type:e,path:r,queryId:i},o))},S=function(e,r){var i=(0,u.createCallable)(e),o=i(r,t),a=(0,u.getEventsFromInput)(o);return Promise.all(a.map(function(e){return l.queryActions.watchEvent(t,n,e)}))},C=function(e){return l.authActions.login(n,t,e)},A=function(){return l.authActions.logout(n,t)},I=function(e,r){return l.authActions.createUser(n,t,e,r)},O=function(e){return l.authActions.resetPassword(n,t,e)},R=function(e,r){return l.authActions.confirmPasswordReset(n,t,e,r)},P=function(e){return l.authActions.verifyPasswordResetCode(n,t,e)},N=function(e,r){return l.authActions.updateProfile(n,t,e,r)},x=function(e,r){return l.authActions.updateAuth(n,t,e,r)},D=function(e,r){return l.authActions.updateEmail(n,t,e,r)},L=function(){return l.authActions.reloadAuth(n,t)},M=function(e){return l.authActions.linkWithCredential(n,t,e)},j=(0,c.mapWithFirebaseAndDispatch)(t,n,{signInWithPhoneNumber:l.authActions.signInWithPhoneNumber}),k=s({ref:function(e){return t.database().ref(e)},set:h,setWithMeta:f,uniqueSet:g,push:p,pushWithMeta:d,remove:_,update:y,updateWithMeta:v,login:C,logout:A,updateAuth:x,updateEmail:D,updateProfile:N,uploadFile:m,uploadFiles:E,deleteFile:b,createUser:I,resetPassword:O,confirmPasswordReset:R,verifyPasswordResetCode:P,watchEvent:w,unWatchEvent:T,reloadAuth:L,linkWithCredential:M,promiseEvents:S},j);return s(t,k,{helpers:k})}},303:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFirebase=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(125),o=n(80),a=n(8),s=n(123),u=void 0;e.default=function(t,e){return function(n){return function(c,l,h){var f=n(c,l,h);if(!t.SDK_VERSION&&!t.firebase_&&!t.database)throw new Error("v2.0.0-beta and higher require passing a firebase app instance or a firebase library instance. View the migration guide for details.");var p=r({},a.defaultConfig,e);return u=(0,i.createFirebaseInstance)(t.firebase_||t,p,f.dispatch),s.authActions.init(f.dispatch,u),f.firebase=u,p.attachAuthIsReady&&(f.firebaseAuthIsReady=(0,o.createAuthIsReady)(f,p)),f}}};e.getFirebase=function(){if(!u)throw new Error("Firebase instance does not yet exist. Check your compose function.");return u}},304:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createFirebaseConnect=void 0;var u=n(268),c=r(u),l=n(120),h=r(l),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=n(1),y=r(d),v=n(3),_=r(v),g=n(31),m=r(g),E=n(124),b=n(32),w=e.createFirebaseConnect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(n){var r=function(r){function i(){var e,n,r,s;o(this,i);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return n=r=a(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(c))),r.firebaseEvents=[],r.firebase=null,r.prevData=null,r.store=r.context[t],s=n,a(r,s)}return s(i,r),p(i,[{key:"componentWillMount",value:function(){var t=this.store,n=t.firebase,r=t.dispatch,i=(0,b.createCallable)(e);this.prevData=i(this.props,this.store);var o=n.ref,a=n.helpers,s=n.storage,u=n.database,c=n.auth;this.firebase=f({ref:o,storage:s,database:u,auth:c},a),this._firebaseEvents=(0,b.getEventsFromInput)(this.prevData),(0,E.watchEvents)(n,r,this._firebaseEvents)}},{key:"componentWillUnmount",value:function(){var t=this.store,e=t.firebase,n=t.dispatch;(0,E.unWatchEvents)(e,n,this._firebaseEvents)}},{key:"componentWillReceiveProps",value:function(t){var n=this.store,r=n.firebase,i=n.dispatch,o=(0,b.createCallable)(e),a=o(t,this.store);if(!(0,h.default)(a,this.prevData)){var s=(0,c.default)(a,this.prevData,h.default),u=(0,c.default)(this.prevData,a,h.default);this.prevData=a,(0,E.unWatchEvents)(r,i,(0,b.getEventsFromInput)(u)),this._firebaseEvents=(0,b.getEventsFromInput)(a),(0,E.watchEvents)(r,i,(0,b.getEventsFromInput)(s))}}},{key:"render",value:function(){return y.default.createElement(n,f({},this.props,this.state,{firebase:this.firebase}))}}]),i}(d.Component);return r.displayName="FirebaseConnect("+(0,b.getDisplayName)(n)+")",r.wrappedComponent=n,r.contextTypes=i({},t,_.default.object.isRequired),(0,m.default)(r,n)}}};e.default=w()},305:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createFirestoreConnect=void 0;var u=n(120),c=r(u),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(1),p=r(f),d=n(3),y=r(d),v=n(31),_=r(v),g=n(32),m=e.createFirestoreConnect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(n){var r=function(r){function i(){var e,n,r,s;o(this,i);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return n=r=a(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(c))),r.prevData=null,r.store=r.context[t],s=n,a(r,s)}return s(i,r),h(i,[{key:"componentWillMount",value:function(){var t=this.store,n=t.firebase,r=t.firestore;if(n.firestore&&r){var i=(0,g.createCallable)(e);this.prevData=i(this.props,this.store),r.setListeners(this.prevData)}}},{key:"componentWillUnmount",value:function(){var t=this.store,e=t.firebase,n=t.firestore;e.firestore&&this.prevData&&n.unsetListeners(this.prevData)}},{key:"componentWillReceiveProps",value:function(t){var n=this.store,r=n.firebase,i=n.firestore,o=(0,g.createCallable)(e),a=o(t,this.store);r.firestore&&!(0,c.default)(a,this.prevData)&&(i.unsetListeners(this.prevData),
this.prevData=a,i.setListeners(a))}},{key:"render",value:function(){var t=this.store,e=t.firebase,r=t.firestore;return p.default.createElement(n,l({},this.props,this.state,{firebase:l({},e,e.helpers),firestore:r}))}}]),i}(f.Component);return r.wrappedComponent=n,r.displayName=(0,g.wrapDisplayName)(n,"FirestoreConnect"),r.contextTypes=i({},t,y.default.object.isRequired),(0,_.default)(r,n)}}};e.default=m()},126:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.populate=e.fixPath=e.isEmpty=e.isLoaded=e.getVal=void 0;var a=n(6),s=r(a),u=n(2),c=r(u),l=n(122),h=r(l),f=n(266),p=r(f),d=n(12),y=r(d),v=n(267),_=r(v),g=n(176),m=r(g),E=n(173),b=r(E),w=n(46),T=r(w),S=n(34),C=r(S),A=n(56),I=r(A),O=n(45),R=r(O),P=n(28),N=r(P),x=n(58),D=r(x),L=n(59),M=r(L),j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k=n(8),F=n(47),U=n(81),W=(e.getVal=function(t,e,n){if(!t)return n;var r=(0,U.getDotStrPath)(e),i=(0,N.default)(t,r,n);return i},e.isLoaded=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e||!e.length||(0,b.default)(e,function(t){return void 0!==t&&(0,N.default)(t,"isLoaded")!==!1})},e.isEmpty=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,h.default)(e,function(t){return!(t&&(0,M.default)(t))||t.isEmpty===!0})},e.fixPath=function(t){return("/"===t.substring(0,1)?"":"/")+t},function(t,e,n){return(0,T.default)(e,function(e,r){var i=e;(e===!0||n.populateByKey)&&(i=r);var a=(0,p.default)(n.root.split("/")).join("."),s=[a,i];n.childParam&&s.push(n.childParam);var u=s.join(".");return(0,N.default)(t.data,u)?n.keyProp?j(o({},n.keyProp,i),(0,N.default)(t.data,u)):(0,N.default)(t.data,u):e===!0||n.populateByKey?e:i})}),q=function(t,e,n){var r=(0,N.default)(e,n.child);if(!e||!r)return null;if((0,y.default)(r)){var i=(0,p.default)(n.root.split("/")).join("."),a=[i,r];n.childParam&&a.push(n.childParam);var s=a.join("."),u=(0,N.default)(t.data,s);return u?(0,D.default)({},n.childAlias||n.child,n.keyProp?j(o({},n.keyProp,r),u):u):e}return(0,D.default)({},n.childAlias||n.child,W(t,r,n))};e.populate=function(t,e,n,r){var o=(0,p.default)(e.split("/")),a=k.topLevelPaths.indexOf(o[0])===-1?["data"].concat(i(o)):o,u=a.join("."),l=(0,N.default)(t,u,r);if(!t||l===r)return r;if(null===l)return null;var f=(0,F.getPopulateObjs)((0,s.default)(n)?n((0,I.default)(a),l):n);if((0,c.default)(l)){var d=function(t){return function(e){return(0,h.default)(t,function(t){return(0,R.default)(t,e)})}},y=(0,h.default)(f,function(t){return d(l)(["value",t.child])});return y?l.map(function(e){var n=e.key,r=e.value,i=f.map(function(e){return q(t,r,e)}).reduce(function(t,e){return(0,_.default)(e,t)},r);return{key:n,value:i}}):l}var v=(0,h.default)(f,function(t){return(0,R.default)(l,t.child)});return v?f.map(function(e){return q(t,l,e)}).reduce(function(t,e){return(0,_.default)(e,t)},l):a.indexOf("profile")!==-1?l:(0,T.default)(l,function(e,r){var i="ordered"===a[0]?e.key:r,o=(0,F.getPopulateObjs)((0,s.default)(n)?n(i,e):n),u=(0,h.default)(o,function(t){return(0,R.default)(e,t.child)});return u?(0,m.default)((0,C.default)(o,function(n){return q(t,e,n)}),function(t,e){return(0,_.default)(e,t)},e):e})}},150:function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(125),s=n(304),u=i(s),c=n(305),l=i(c),h=n(310),f=i(h),p=n(311),d=i(p),y=n(303),v=i(y),_=n(306),g=i(_),m=n(8),E=i(m),b=n(80),w=n(126),T=r(w);e.default=o({firebase:u.default,createFirebaseInstance:a.createFirebaseInstance,firebaseConnect:u.default,createFirebaseConnect:s.createFirebaseConnect,firestoreConnect:l.default,createFirestoreConnect:c.createFirestoreConnect,withFirebase:f.default,createWithFirebase:h.createWithFirebase,withFirestore:d.default,createWithFirestore:p.createWithFirestore,reducer:g.default,firebaseReducer:g.default,firebaseStateReducer:g.default,reduxReactFirebase:v.default,reactReduxFirebase:v.default,reduxFirebase:v.default,constants:E.default,actionTypes:m.actionTypes,getFirebase:y.getFirebase,authIsReady:b.authIsReady,helpers:T},T),t.exports=e.default},306:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(81),i=n(307);e.default=(0,r.combineReducers)({requesting:i.requestingReducer,requested:i.requestedReducer,timestamps:i.timestampsReducer,data:i.dataReducer,ordered:i.orderedReducer,auth:i.authReducer,authError:i.authErrorReducer,profile:i.profileReducer,listeners:i.listenersReducer,isInitializing:i.isInitializingReducer,errors:i.errorsReducer}),t.exports=e.default},307:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.orderedReducer=e.dataReducer=e.listenersReducer=e.errorsReducer=e.profileReducer=e.authErrorReducer=e.authReducer=e.timestampsReducer=e.requestedReducer=e.requestingReducer=e.isInitializingReducer=void 0;var a=n(276),s=r(a),u=n(277),c=r(u),l=n(7),h=r(l),f=n(2),p=r(f),d=n(28),y=r(d),v=n(121),_=r(v),g=n(57),m=r(g),E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=n(8),w=n(81),T=b.actionTypes.START,S=b.actionTypes.SET,C=b.actionTypes.SET_PROFILE,A=b.actionTypes.MERGE,I=b.actionTypes.LOGIN,O=b.actionTypes.LOGOUT,R=b.actionTypes.LOGIN_ERROR,P=b.actionTypes.CLEAR_ERRORS,N=b.actionTypes.REMOVE,x=b.actionTypes.NO_VALUE,D=b.actionTypes.SET_LISTENER,L=b.actionTypes.UNSET_LISTENER,M=b.actionTypes.AUTHENTICATION_INIT_STARTED,j=b.actionTypes.AUTHENTICATION_INIT_FINISHED,k=b.actionTypes.AUTH_EMPTY_CHANGE,F=b.actionTypes.AUTH_LINK_SUCCESS,U=b.actionTypes.UNAUTHORIZED_ERROR,W=b.actionTypes.AUTH_UPDATE_SUCCESS,q=b.actionTypes.AUTH_RELOAD_SUCCESS,z=b.actionTypes.PROFILE_UPDATE_SUCCESS,B=(e.isInitializingReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1];switch(e.type){case M:return!0;case j:return!1;default:return t}},e.requestingReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=e.type,r=e.path;switch(n){case T:return E({},t,o({},(0,w.getSlashStrPath)(r),!0));case x:case S:return E({},t,o({},(0,w.getSlashStrPath)(r),!1));default:return t}},e.requestedReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=e.type,r=e.path;switch(n){case T:return E({},t,o({},(0,w.getSlashStrPath)(r),!1));case x:case S:return E({},t,o({},(0,w.getSlashStrPath)(r),!0));default:return t}},e.timestampsReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=e.type,r=e.path;switch(n){case T:case x:case S:return E({},t,o({},(0,w.getSlashStrPath)(r),Date.now()));default:return t}},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data";return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case S:return(0,c.default)(Object,(0,w.getDotStrPath)(n.path),n[t],e);case A:var r=(0,y.default)(e,(0,w.getDotStrPath)(n.path),{}),i=(0,s.default)(r,n[t]);return(0,c.default)(Object,(0,w.getDotStrPath)(n.path),i,e);case x:return(0,c.default)(Object,(0,w.getDotStrPath)(n.path),null,e);case N:return"data"===t?(0,w.recursiveUnset)((0,w.getDotStrPath)(n.path),e):e;case O:if(n.preserve){if((0,p.default)(n.preserve))return(0,m.default)(e,n.preserve);if((0,h.default)(n.preserve))return n.preserve[t]?(0,w.preserveValuesFromState)(e,n.preserve[t],{}):{};throw new Error("Invalid preserve parameter. It must be an Object or an Array")}return{};default:return e}}}),H=(e.authReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoaded:!1,isEmpty:!0},e=arguments[1];switch(e.type){case I:case W:if(!e.auth)return{isEmpty:!0,isLoaded:!0};var n=e.auth.toJSON?e.auth.toJSON():e.auth;return e.preserve&&e.preserve.auth?(0,w.preserveValuesFromState)(t,e.preserve.auth,E({},n,{isEmpty:!1,isLoaded:!0})):E({},n,{isEmpty:!1,isLoaded:!0});case F:case q:return e.payload?E({},e.payload.toJSON?e.payload.toJSON():e.payload,{isEmpty:!1,isLoaded:!0}):{isEmpty:!0,isLoaded:!0};case R:case k:case O:return e.preserve&&e.preserve.auth?(0,w.preserveValuesFromState)(t,e.preserve.auth,{isLoaded:!0,isEmpty:!0}):{isLoaded:!0,isEmpty:!0};default:return t}},e.authErrorReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1];switch(e.type){case I:case O:return null;case R:case U:return e.authError;default:return t}},e.profileReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoaded:!1,isEmpty:!0},e=arguments[1];switch(e.type){case C:return e.profile?E({},e.profile,{isEmpty:!1,isLoaded:!0}):E({},t,{isEmpty:!0,isLoaded:!0});case z:return E({},t,e.payload);case I:return e.preserve&&e.preserve.profile?(0,w.preserveValuesFromState)(t,e.preserve.profile,{isLoaded:!0,isEmpty:!0}):{isEmpty:!0,isLoaded:!1};case O:case k:return e.preserve&&e.preserve.profile?(0,w.preserveValuesFromState)(t,e.preserve.profile,{isLoaded:!0,isEmpty:!0}):{isLoaded:!0,isEmpty:!0};default:return t}},e.errorsReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case R:case U:if(!(0,p.default)(t))throw new Error("Errors state must be an array");return[].concat(i(t),[e.authError]);case O:case P:if(e.preserve&&e.preserve.errors){if("function"!=typeof e.preserve.errors)throw new Error("Preserve for the errors state currently only supports functions");return t.filter(e.preserve.errors)}return[];default:return t}},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=e.type,r=e.path,i=e.payload;switch(n){case D:return E({},t,o({},i.id,{id:i.id,path:r}));case L:return(0,_.default)(t,[i.id]);default:return t}}),Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=e.type,r=(e.path,e.payload);switch(n){case D:return[].concat(i(t),[r.id]);case L:return t.filter(function(t){return t!==r.id});default:return t}};e.listenersReducer=(0,w.combineReducers)({byId:H,allIds:Q}),e.dataReducer=B(),e.orderedReducer=B("ordered")},127:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.mapWithFirebaseAndDispatch=e.wrapInDispatch=void 0;var a=n(46),s=r(a),u=n(7),c=r(u),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=(e.wrapInDispatch=function(t,e){var n=(e.ref,e.meta),r=e.method,i=e.args,a=void 0===i?[]:i,s=e.types,u=h(s,3),l=u[0],f=u[1],p=u[2];return t({type:(0,c.default)(l)?l.type:l,meta:n,payload:(0,c.default)(l)?l.payload:{args:a}}),r.apply(void 0,o(a)).then(function(e){return t({type:(0,c.default)(f)?f.type:f,meta:n,payload:(0,c.default)(f)?f.payload:e}),e}).catch(function(e){return t({type:p,meta:n,payload:e}),Promise.reject(e)})},function(t,e,n){return function(r){return function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return r.apply(t,n?[e,t].concat(o):[t,e].concat(o))}}});e.mapWithFirebaseAndDispatch=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=f(t,e);return l({},(0,s.default)(n,o),r.reduce(function(t,e){var n=e.action,r=e.name;return l({},t,i({},r,o(n)))},{}))}},80:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(e.database&&e.database.ServerValue){var n=e.database().ref(),r=e._,i=r.config,o=i.presence,s=i.sessions,u=r.authUid,c=n.child(".info/connected"),l=n.child((0,a.default)(o)?o(e.auth().currentUser,e):o).child(u),h=(0,a.default)(s)?s(e.auth().currentUser,e):s;h&&(h=n.child(s)),c.on("value",function(n){if(n.val()){if(h){t({type:p.actionTypes.SESSION_START,payload:u});var r=h.push({startedAt:e.database.ServerValue.TIMESTAMP,user:u});(0,a.default)(r.setPriority)&&r.setPriority(u),r.child("endedAt").onDisconnect().set(e.database.ServerValue.TIMESTAMP,function(){t({type:p.actionTypes.SESSION_END})})}l.set(!0),l.onDisconnect().remove()}})}}Object.defineProperty(e,"__esModule",{value:!0}),e.updateProfileOnFirestore=e.updateProfileOnRTDB=e.createAuthIsReady=e.authIsReady=e.getLoginMethodAndParams=void 0;var o=n(6),a=r(o),s=n(12),u=r(s),c=n(2),l=r(c),h=n(146),f=r(h);e.setupPresence=i;var p=n(8),d=function(t,e,n){var r=(0,f.default)(e)+"AuthProvider",i=new t.auth[r],o=t._.config.customAuthParameters;return o&&o[e]&&i.setCustomParameters(o[e]),"twitter"!==e.toLowerCase()&&(0,a.default)(i.addScope)?(i.addScope("email"),n&&((0,l.default)(n)&&n.forEach(function(t){i.addScope(t)}),(0,u.default)(n)&&i.addScope(n)),i):i},y=(e.getLoginMethodAndParams=function(t,e){var n=e.email,r=e.password,i=e.provider,o=e.type,a=e.token,s=e.scopes,u=e.phoneNumber,c=e.applicationVerifier,l=e.credential;if(l)return{method:"signInWithCredential",params:[l]};if(i){if(p.supportedAuthProviders.indexOf(i.toLowerCase())===-1)throw new Error(i+" is not a valid Auth Provider");if(a)throw new Error("provider with token no longer supported, use credential parameter instead");var h=d(t,i,s);return"popup"===o?{method:"signInWithPopup",params:[h]}:{method:"signInWithRedirect",params:[h]}}if(a){var f=t.auth().signInAndRetrieveDataWithCustomToken;return f?{method:"signInAndRetrieveDataWithCustomToken",params:[a]}:{method:"signInWithCustomToken",params:[a]}}if(u){if(!c)throw new Error("Application verifier is required for phone authentication");return{method:"signInWithPhoneNumber",params:[u,c]}}var y=t.auth().signInAndRetrieveDataWithEmailAndPassword;return y?{method:"signInAndRetrieveDataWithEmailAndPassword",params:[n,r]}:{method:"signInWithEmailAndPassword",params:[n,r]}},function(t,e){var n=t.getState(),r=e?n[e]:n,i=r&&r.auth;if(!i)throw new Error("The Firebase auth state could not be found in the store under the attribute '"+(e?e+".":"")+"auth'. Make sure your react-redux-firebase reducer is correctly set in the store");return r.auth.isLoaded}),v=e.authIsReady=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"firebase";return new Promise(function(n){if(y(t,e))n();else var r=t.subscribe(function(){y(t,e)&&(r(),n())})})};e.createAuthIsReady=function(t,e){return(0,a.default)(e.authIsReady)?e.authIsReady(t,e):v(t,e.firebaseStateName)},e.updateProfileOnRTDB=function(t,e){var n=t.database,r=t._,i=r.config,o=r.authUid,a=n().ref(i.userProfile+"/"+o);return a.update(e).then(function(){return a.once("value")})},e.updateProfileOnFirestore=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.useSet,i=void 0===r||r,o=n.merge,a=void 0===o||o,s=t.firestore,u=t._,c=u.config,l=u.authUid,h=s().doc(c.userProfile+"/"+l),f=i?h.set(e,{merge:a}):h.update(e);return f.then(function(){return h.get()})}},308:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getEventsFromInput=e.pathStrToObj=void 0;var i=n(289),o=r(i),a=n(12),s=r(a),u=n(7),c=r(u),l=n(2),h=r(l),f=n(271),p=r(f),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y=n(47),v=n(128),_=e.pathStrToObj=function(t){var e={path:t,type:"value",isQuery:!1},n=(0,v.getQueryIdFromPath)(t);if(n){var r=t.split("#");e=d({},e,{queryId:n,isQuery:!0,path:r[0],queryParams:r[1].split("&")}),(0,y.getPopulates)(r[1].split("&"))&&(e.populates=(0,y.getPopulates)(r[1].split("&")),e.queryParams=(0,o.default)(r[1].split("&"),function(t){return t.indexOf("populate")===-1}))}return e},g=e.getEventsFromInput=function(t){return(0,p.default)(t,function(t){if((0,s.default)(t))return[_(t)];if((0,h.default)(t))return[{type:"first_child",path:t[0]},{type:"child_added",path:t[0]},{type:"child_removed",path:t[0]},{type:"child_moved",path:t[0]},{type:"child_changed",path:t[0]}];if((0,c.default)(t)){if(!t.path)throw new Error("Path is a required parameter within definition object");var e=t.path;return t.storeAs&&(e+="@"+t.storeAs),t.queryParams&&(e+="#"+t.queryParams.join("&")),t=d({},_(e),t),[t]}throw new Error("Invalid Path Definition: "+t+". Only strings, objects, and arrays accepted.")})};e.default={getEventsFromInput:g}},32:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.stringToDate=e.wrapDisplayName=e.getDisplayName=e.createCallable=e.getEventsFromInput=void 0;var i=n(6),o=r(i),a=n(308);Object.defineProperty(e,"getEventsFromInput",{enumerable:!0,get:function(){return a.getEventsFromInput}});var s=(e.createCallable=function(t){return(0,o.default)(t)?t:function(){return t}},e.getDisplayName=function(t){if("string"==typeof t)return t;if(t)return t.displayName||t.name||"Component"});e.wrapDisplayName=function(t,e){return e+"("+s(t)+")"},e.stringToDate=function(t){try{return new Date(JSON.parse(t))}catch(e){return console.error("Error parsing string to date:",e.message||e),t}}},47:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.promisesForPopulate=e.populateList=e.getPopulateChild=e.getPopulates=e.getPopulateObjs=e.getChildType=e.getPopulateObj=void 0;var i=n(122),o=r(i),a=n(45),s=r(a),u=n(58),c=r(u),l=n(76),h=r(l),f=n(28),p=r(f),d=n(34),y=r(d),v=n(7),_=r(v),g=n(6),m=r(g),E=n(2),b=r(E),w=n(12),T=r(w),S=n(270),C=r(S),A=e.getPopulateObj=function(t){if(!(0,T.default)(t))return t;var e=t.split(":");return{child:e[0],root:e[1]}},I=(e.getChildType=function(t){return(0,T.default)(t)?"string":(0,b.default)(t)?"array":(0,_.default)(t)?"object":"other"},e.getPopulateObjs=function(t){return(0,b.default)(t)?t.map(function(t){return(0,_.default)(t)?t:A(t)}):t}),O=(e.getPopulates=function(t){var e=(0,C.default)(t,function(t){return t.indexOf("populate")!==-1||(0,_.default)(t)&&t.populates}).map(function(t){return t.split("=")[1]});return e.length?e.map(A):null},e.getPopulateChild=function(t,e,n){return t.database().ref().child(e.root+"/"+n).once("value").then(function(t){return t.val()})}),R=e.populateList=function(t,e,n,r){return r[n.root]||(0,c.default)(r,n.root,{}),Promise.all((0,y.default)(e,function(e,i){var o=e===!0||n.populateByKey?i:e;return O(t,n,o).then(function(t){return t?(0,c.default)(r,n.root+"."+o,t):r})}))},P=e.promisesForPopulate=function(t,e,n,r){var i=[],a={},u=I((0,m.default)(r)?r(e,n):r),l=(0,o.default)(u,function(t){return(0,s.default)(n,t.child)});return l?(0,h.default)(u,function(e){return(0,T.default)((0,p.default)(n,e.child))?i.push(O(t,e,(0,p.default)(n,e.child)).then(function(t){t&&(0,c.default)(a,e.root+"."+(0,p.default)(n,e.child),t)})):i.push(R(t,(0,p.default)(n,e.child),e,a))}):(0,h.default)(n,function(e,n){var o=A((0,m.default)(r)?r(n,e):r);(0,h.default)(o,function(n){var r=(0,p.default)(e,n.child);if(r)return(0,T.default)(r)?i.push(O(t,n,r).then(function(t){return t&&(0,c.default)(a,n.root+"."+r,t),a})):(0,b.default)(r)||(0,_.default)(r)?i.push(R(t,r,n,a)):void 0})}),Promise.all(i).then(function(){return a})};e.default={promisesForPopulate:P}},128:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.populateAndDispatch=e.orderedFromSnapshot=e.applyParamsToQuery=e.unsetWatcher=e.getWatcherCount=e.setWatcher=e.getQueryIdFromPath=e.getWatchPath=void 0;var i=n(12),o=r(i),a=n(59),s=r(a),u=n(76),c=r(u),l=n(281),h=r(l),f=n(8),p=n(47),d=function(t){var e=Number(t);return(0,h.default)(e)?t:e},y=e.getWatchPath=function(t,e){if(!t||""===t||!e)throw new Error("Event and path are required");return t+":"+("/"===e.substring(0,1)?"":"/")+e},v=e.getQueryIdFromPath=function(t,e){if(!(0,o.default)(t))throw new Error("Query path must be a string");var n=t,r=t.split("#");t=r[0];var i=r.length>1,a=i?r[1].split("&"):[],s=i?a.map(function(t){var e=t.split("=");if("queryId"===e[0])return e[1]}).filter(function(t){return t}):void 0;return s&&s.length>0?e?e+":/"+s:s[0]:i?n:void 0},_=(e.setWatcher=function(t,e,n,r,i){var o=i||v(r,n)||y(n,r);return t._.watchers[o]?t._.watchers[o]++:t._.watchers[o]=1,e({type:f.actionTypes.SET_LISTENER,path:r,payload:{id:o}}),t._.watchers[o]},e.getWatcherCount=function(t,e,n,r){var i=r||v(n,e)||y(e,n);return t._.watchers[i]},e.unsetWatcher=function(t,e,n,r,i){var o=i||v(r,n)||y(n,r);r=r.split("#")[0];var a=t._.watchers;a[o]<=1?(delete a[o],"first_child"!==n&&"once"!==n&&t.database().ref().child(r).off(n)):a[o]&&a[o]--,e({type:f.actionTypes.UNSET_LISTENER,path:r,payload:{id:o}})},e.applyParamsToQuery=function(t,e){var n=!1;return t&&t.forEach(function(t){switch(t=t.split("="),t[0]){case"orderByValue":e=e.orderByValue(),n=!0;break;case"orderByPriority":e=e.orderByPriority(),n=!0;break;case"orderByKey":e=e.orderByKey(),n=!0;break;case"orderByChild":e=e.orderByChild(t[1]);break;case"limitToFirst":e=e.limitToFirst(parseInt(t[1],10));break;case"limitToLast":e=e.limitToLast(parseInt(t[1],10));break;case"notParsed":n=!0;break;case"parsed":n=!1;break;case"equalTo":var r=n?t[1]:d(t[1]);r="null"===r?null:r,r="false"!==r&&r,r="true"===r||r,e=3===t.length?e.equalTo(r,t[2]):e.equalTo(r);break;case"startAt":var i=n?t[1]:d(t[1]);i="null"===i?null:i,e=3===t.length?e.startAt(i,t[2]):e.startAt(i);break;case"endAt":var o=n?t[1]:d(t[1]);o="null"===o?null:o,e=3===t.length?e.endAt(o,t[2]):e.endAt(o)}}),e},e.orderedFromSnapshot=function(t){if(t.hasChildren&&!t.hasChildren())return null;var e=[];return t.forEach&&t.forEach(function(t){e.push({key:t.key,value:t.val()})}),(0,s.default)(e)?e:null});e.populateAndDispatch=function(t,e,n){var r=n.data,i=n.populates,o=n.snapshot,a=n.path,s=n.storeAs;return(0,p.promisesForPopulate)(t,o.key,r,i).then(function(t){return(0,c.default)(t,function(t,n){e({type:f.actionTypes.MERGE,path:n,data:t})}),e({type:f.actionTypes.SET,path:s||a,data:r,ordered:_(o)}),t}).catch(function(t){return e({type:f.actionTypes.ERROR,payload:t}),Promise.reject(t)})}},81:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t?t.split(/\//).filter(function(t){return!!t}):[]}function o(t){return i(t).join("/")}function a(t){return i(t).join(".")}Object.defineProperty(e,"__esModule",{value:!0}),e.recursiveUnset=e.preserveValuesFromState=e.combineReducers=void 0;var s=n(278),u=r(s),c=n(2),l=r(c),h=n(57),f=r(h),p=n(279),d=r(p),y=n(6),v=r(y),_=n(59),g=r(_),m=n(290),E=r(m),b=n(28),w=r(b),T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.pathToArr=i,e.getSlashStrPath=o,e.getDotStrPath=a;e.combineReducers=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return Object.keys(t).reduce(function(r,i){return r[i]=t[i](e[i],n),r},{})}},e.preserveValuesFromState=function(t,e,n){if((0,v.default)(e))return e(t,n);if((0,d.default)(e)&&e)return n?T({},t,n):t;if((0,l.default)(e))return(0,f.default)(t,e);throw new Error("Invalid preserve parameter. It must be an Object or an Array")},e.recursiveUnset=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return n;if((0,g.default)((0,w.default)(n,e))>0&&r)return n;var i=(0,u.default)(e,n),o=e.match(/\./)?(0,E.default)(e,/\.[^.]*$/,""):"";return t(o,i,!0)}},309:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=e.path,r=e.dbPath;return t.storage().ref(n).delete().then(function(){if(!r||!t.database&&!t.firestore)return{path:n};var e=function(){return t._.config.useFirestoreForStorageMeta?t.firestore().doc(r).delete():t.database().ref(r).remove()};return e().then(function(){return{path:n,dbPath:r}})})}function o(t){var e=t.fileData,n=t.firebase,r=t.uploadTaskSnapshot;return function(t){var i=n._.config.useFirestoreForStorageMeta,o={snapshot:t,key:t.key||t.id,File:e,metaDataSnapshot:t,uploadTaskSnapshot:r,uploadTaskSnaphot:r,createdAt:i?n.firestore.FieldValue.serverTimestamp():n.database.ServerValue.TIMESTAMP};if(t.id&&(o.id=t.id),t.downloadURLs&&t.downloadURLs[0])o.downloadURL=t.downloadURLs[0];else if(r.ref&&"function"==typeof r.ref.getDownloadURL)return r.ref.getDownloadURL().then(function(t){return l({},o,{downloadURL:t})});return o}}function a(t){var e=t.firebase,n=t.uploadTaskSnapshot,r=t.dbPath,i=t.options,a=e._.config,s=a.fileMetadataFactory,u=a.useFirestoreForStorageMeta,l=i.metadataFactory,h=l||s,f=(0,c.default)(h)?h(n,e,n.metadata):n.metadata,p=o({fileData:f,firebase:e,uploadTaskSnapshot:n}),d=function(t){return u?e.firestore().collection(r).add(t):e.database().ref(r).push(t)};return d(f).then(p)}function s(t,e,n){var r=n.path,i=n.file,o=n.filename,a=n.meta,s=e.storage().ref(r+"/"+o).put(i),u=s.on(e.storage.TaskEvent.STATE_CHANGED,{next:function(e){t({type:p,meta:a,payload:{snapshot:e,percent:Math.floor(e.bytesTransferred/e.totalBytes*100)}})},error:function(e){t({type:f,meta:a,payload:e}),u()},complete:function(){u()}});return s}Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),c=r(u),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.deleteFile=i,e.writeMetadataToDb=a,e.uploadFileWithProgress=s;var h=n(8),f=h.actionTypes.FILE_UPLOAD_ERROR,p=h.actionTypes.FILE_UPLOAD_PROGRESS},310:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createWithFirebase=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),h=r(l),f=n(3),p=r(f),d=n(31),y=r(d),v=n(32),_=e.createWithFirebase=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(e){var n=function(n){function r(){var e,n,i,s;o(this,r);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return n=i=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(c))),i.store=i.context[t],s=n,a(i,s)}return s(r,n),c(r,[{key:"render",value:function(){return h.default.createElement(e,u({},this.props,this.state,{dispatch:this.store.dispatch,firebase:this.store.firebase}))}}]),r}(l.Component);return n.wrappedComponent=e,n.displayName=(0,v.wrapDisplayName)(e,"withFirebase"),n.contextTypes=i({},t,p.default.object.isRequired),(0,y.default)(n,e)}};e.default=_()},311:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createWithFirestore=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),h=r(l),f=n(3),p=r(f),d=n(31),y=r(d),v=n(32),_=e.createWithFirestore=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(e){var n=function(n){function r(){var e,n,i,s;o(this,r);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return n=i=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(c))),i.store=i.context[t],s=n,a(i,s)}return s(r,n),c(r,[{key:"render",value:function(){return h.default.createElement(e,u({},this.props,{dispatch:this.store.dispatch,firestore:this.store.firestore,firebase:this.store.firebase}))}}]),r}(l.Component);return n.wrappedComponent=e,n.displayName=(0,v.wrapDisplayName)(e,"withFirestore"),n.contextTypes=i({},t,p.default.object.isRequired),(0,y.default)(n,e)}};e.default=_()},1193:function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n){function r(t){return t.displayName||t.name||"Component"}if("function"!=typeof t)throw new Error("Expected reducePropsToState to be a function.");
if("function"!=typeof e)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!=typeof n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(s){function f(){d=t(p.map(function(t){return t.props})),y.canUseDOM?e(d):n&&(d=n(d))}if("function"!=typeof s)throw new Error("Expected WrappedComponent to be a React component.");var p=[],d=void 0,y=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.peek=function(){return d},e.rewind=function(){if(e.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var t=d;return d=void 0,p=[],t},e.prototype.shouldComponentUpdate=function(t){return!h(t,this.props)},e.prototype.componentWillMount=function(){p.push(this),f()},e.prototype.componentDidUpdate=function(){f()},e.prototype.componentWillUnmount=function(){var t=p.indexOf(this);p.splice(t,1),f()},e.prototype.render=function(){return c.createElement(s,this.props)},e}(u.Component);return y.displayName="SideEffect("+r(s)+")",y.canUseDOM=l.canUseDOM,y}}var u=n(1),c=r(u),l=r(n(429)),h=r(n(1237));t.exports=s},533:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(103),o=r(i),a=n(536);e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.Map,n=Object.keys(t);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e(),i=arguments[1];return r.withMutations(function(e){n.forEach(function(n){var r=t[n],o=e.get(n),s=r(o,i);(0,a.validateNextState)(s,n,i),e.set(n,s)})})}},t.exports=e.default},534:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.combineReducers=void 0;var i=n(533),o=r(i);e.combineReducers=o.default},316:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&"@@redux/INIT"===t.type?"initialState argument passed to createStore":"previous state received by the reducer"},t.exports=e.default},535:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(103),o=r(i),a=n(316),s=r(a);e.default=function(t,e,n){var r=Object.keys(e);if(!r.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var i=(0,s.default)(n);if(o.default.isImmutable?!o.default.isImmutable(t):!o.default.Iterable.isIterable(t))return"The "+i+' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: "'+r.join('", "')+'".';var a=t.toSeq().keySeq().toArray().filter(function(t){return!e.hasOwnProperty(t)});return a.length>0?"Unexpected "+(1===a.length?"property":"properties")+' "'+a.join('", "')+'" found in '+i+'. Expected to find one of the known reducer property names instead: "'+r.join('", "')+'". Unexpected properties will be ignored.':null},t.exports=e.default},536:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.validateNextState=e.getUnexpectedInvocationParameterMessage=e.getStateName=void 0;var i=n(316),o=r(i),a=n(535),s=r(a),u=n(537),c=r(u);e.getStateName=o.default,e.getUnexpectedInvocationParameterMessage=s.default,e.validateNextState=c.default},537:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw new Error('Reducer "'+e+'" returned undefined when handling "'+n.type+'" action. To ignore an action, you must explicitly return the previous state.')},t.exports=e.default},377:function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";var r=n(7);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";var r=n(2);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";e.a="redux-responsive/CALCULATE_RESPONSIVE_STATE"},function(t,e,n){t.exports=n(12)},,function(t,e,n){"use strict";var r=n(11);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.calculateInitialState,i=void 0===e||e;return function(t){return function(){var e=t.apply(void 0,arguments);return"undefined"!=typeof window&&"undefined"!=typeof window.matchMedia&&n.i(r.a)({store:e,window:window,calculateInitialState:i}),e}}}},function(t,e,n){"use strict";function r(t){var e=Object.keys(t).sort(function(e,n){var r=t[e],i=t[n];return"number"==typeof r&&"string"==typeof i?-1:"number"==typeof i&&"string"==typeof r?1:r>=i?1:-1});return v(t,function(t,n,r){var i=e.indexOf(r);i!==-1&&(t[r]=i)})}function i(t,e){var n=e[t];return v(e,function(t,r,i){"number"==typeof r&&e[i]?t[i]=n<e[i]:t[i]=!1})}function o(t,e){return v(e,function(n,r,i){"number"==typeof r&&e[i]?n[i]=i===t:n[i]=!1})}function a(t,e){var n=e[t];return v(e,function(t,r,i){"number"==typeof r?t[i]=n>e[i]:t[i]=!1})}function s(t,e,n){return"undefined"==typeof t?n:Object.keys(e).reduce(function(n,r){return t(e[r]).matches?r:n},n)}function u(t){if("undefined"==typeof t)return y;var e={portrait:"(orientation: portrait)",landscape:"(orientation: landscape)"};return Object.keys(e).reduce(function(n,r){return t(e[r]).matches?r:n},y)}var c=n(3),l=n.n(c),h=n(2),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p={extraSmall:480,small:768,medium:992,large:1200},d="infinity",y=null,v=function(t,e){var n={};return Object.keys(t).forEach(function(r){return e(n,t[r],r)}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.initialMediaType,c=e.infinity,y=void 0===c?d:c,v=e.extraFields,_=void 0===v?function(){return{}}:v;t||(t=p),t[y]=1/0;var g=l.a.asObject(t),m=r(t);return function(e,r){var c=r.type,l=r.matchMedia;if(c===h.a||"undefined"==typeof e){var p=!e&&n?n:s(l,g,y),d=u(l),v={_responsiveState:!0,lessThan:i(p,m),greaterThan:a(p,m),is:o(p,t),mediaType:p,orientation:d,breakpoints:t};return f({},v,_(v))}return e}}},function(t,e,n){"use strict";var r=n(1);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.innerWidth,n=t.innerHeight,i=t.matchMedia;return{type:r.a,innerWidth:e,innerHeight:n,matchMedia:i}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"createResponsiveStateReducer",function(){return s}),n.d(e,"createResponsiveStoreEnhancer",function(){return u}),n.d(e,"responsiveStateReducer",function(){return c}),n.d(e,"responsiveStoreEnhancer",function(){return l});var r=n(6),i=n(5),o=n(1);n.d(e,"CALCULATE_RESPONSIVE_STATE",function(){return o.a});var a=n(0);n.d(e,"calculateResponsiveState",function(){return a.a});var s=r.a,u=i.a,c=s(),l=u()},,function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){return"function"==typeof t.getIn?t.getIn(e):e.reduce(function(t,e){return t[e]},t)}function o(t){return"function"==typeof t.keys?Array.from(t.keys()):Object.keys(t)}function a(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,a=[],s=[a],c=function(){var a=s.shift();if(a.length>n)return"continue";var u=i(t,a);if(u){if(u[e])return{v:a};s.push.apply(s,r(o(u).map(function(t){return a.concat(t)})))}};s.length>0;){var l=c();switch(l){case"continue":continue;default:if("object"===("undefined"==typeof l?"undefined":u(l)))return l.v}}return!1}function s(t){var e=t.getState(),n=a(e,"_responsiveState");if(!n)throw new Error("Could not find responsive state reducer. If you are still running into trouble, please open a ticket on github.");return i(e,n).breakpoints}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=s},function(t,e,n){"use strict";var r=n(3),i=n.n(r),o=n(0),a=n(10);e.a=function(t){var e=t.store,r=t.window,s=t.calculateInitialState,u=function(){return e.dispatch(n.i(o.a)(r))},c=i.a.asObject(n.i(a.a)(e));Object.keys(c).forEach(function(t){var e=r.matchMedia(c[t]);e.addListener(function(t){t.matches&&u()})}),r.addEventListener("orientationchange",u),s&&u()}},function(t,e,n){var r,i,o={asArray:function(t){var e=this.getBreakPoints(t),n=this.getCustomQueries(t);return this._translate(this._makeSteps(this._toSortedArray(e))).concat(this._objToArr(n))},asObject:function(t){return this._arrToObj(this.asArray(t))},getBreakPoints:function(t){return Object.keys(t).reduce(function(e,n){return"number"==typeof t[n]&&(e[n]=t[n]),e},{})},getCustomQueries:function(t){return Object.keys(t).reduce(function(e,n){return"string"==typeof t[n]&&(e[n]=t[n]),e},{})},_toSortedArray:function(t){return Object.keys(t).map(function(e){return[e,t[e]]}).sort(function(t,e){return t[1]-e[1]})},_makeSteps:function(t){return t[t.length-1][1]===1/0?t:t.concat([1/0])},_translate:function(t){return t.map(function(e,n){return 0===n?[e[0],"screen and (max-width: "+e[1]+"px)"]:n===t.length-1?[e[0]||"default","screen and (min-width: "+(t[n-1][1]+1)+"px)"]:[e[0],"screen and (min-width: "+(t[n-1][1]+1)+"px) and (max-width: "+e[1]+"px)"]})},_objToArr:function(t){return Object.keys(t).map(function(e){return[e,t[e]]})},_arrToObj:function(t){return t.reduce(function(t,e){return t[e[0]]=e[1],t},{})}};"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=o:(r=[],i=function(){return o}.apply(e,r),!(void 0!==i&&(t.exports=i)))}])})},910:function(t,e){},539:function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return y[d]=r,p(d),d++}function i(t){delete y[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(v)setTimeout(a,0,t);else{var e=y[t];if(e){v=!0;try{o(e)}finally{i(t),v=!1}}}}function s(){p=function(t){e.nextTick(function(){a(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),p=function(n){t.postMessage(e+n,"*")}}function l(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;a(e)},p=function(e){t.port2.postMessage(e)}}function h(){var t=_.documentElement;p=function(e){var n=_.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function f(){p=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var p,d=1,y={},v=!1,_=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?s():u()?c():t.MessageChannel?l():_&&"onreadystatechange"in _.createElement("script")?h():f(),g.setImmediate=r,g.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(36))},1237:function(t,e,n){"use strict";var r=n(975);t.exports=function(t,e,n,i){var o=n?n.call(i,t,e):void 0;if(void 0!==o)return!!o;if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var a=r(t),s=r(e),u=a.length;if(u!==s.length)return!1;i=i||null;for(var c=Object.prototype.hasOwnProperty.bind(e),l=0;l<u;l++){var h=a[l];if(!c(h))return!1;var f=t[h],p=e[h],d=n?n.call(i,f,p,h):void 0;if(d===!1||void 0===d&&f!==p)return!1}return!0}},378:function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i="undefined"!=typeof t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(539),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},184:function(t,e,n){var r,i;(function(n){var o,a,s,u,c,l,h,f,p,d,y,v,_,g,m,E,b,w,T;!function(o){function a(t,e){return t!==s&&("function"==typeof Object.create?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(n,r){return t[n]=e?e(n,r):r}}var s="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:{};r=[e],i=function(t){o(a(s,a(t)))}.apply(e,r),!(void 0!==i&&(t.exports=i))}(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};o=function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},u=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=function(t,e){return function(n,r){e(n,r,t)}},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},f=function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},p=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},d=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},y=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},v=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t},_=function(t){return this instanceof _?(this.v=t,this):new _(t)},g=function(t,e,n){function r(t){l[t]&&(c[t]=function(e){return new Promise(function(n,r){h.push([t,e,n,r])>1||i(t,e)})})}function i(t,e){try{o(l[t](e))}catch(t){u(h[0][3],t)}}function o(t){t.value instanceof _?Promise.resolve(t.value.v).then(a,s):u(h[0][2],t)}function a(t){i("next",t)}function s(t){i("throw",t)}function u(t,e){t(e),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(t,e||[]),h=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c},m=function(t){function e(e,i){t[e]&&(n[e]=function(n){return(r=!r)?{value:_(t[e](n)),done:"return"===e}:i?i(n):n})}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n},E=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof d?d(t):t[Symbol.iterator]()},b=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},w=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},T=function(t){return t&&t.__esModule?t:{default:t}},t("__extends",o),t("__assign",a),t("__rest",s),t("__decorate",u),t("__param",c),t("__metadata",l),t("__awaiter",h),t("__generator",f),t("__exportStar",p),t("__values",d),t("__read",y),t("__spread",v),t("__await",_),t("__asyncGenerator",g),t("__asyncDelegator",m),t("__asyncValues",E),t("__makeTemplateObject",b),t("__importStar",w),t("__importDefault",T)})}).call(e,function(){return this}())},1328:function(t,e,n){var r;!function(){function i(t,e,n){return t.call.apply(t.bind,arguments)}function o(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function a(t,e,n){return a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o,a.apply(null,arguments)}function s(t,e){this.a=t,this.o=e||t,this.c=this.o.document}function u(t,e,n,r){if(e=t.c.createElement(e),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r&&e.appendChild(t.c.createTextNode(r)),e}function c(t,e,n){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,n){e=e||[],n=n||[];for(var r=t.className.split(/\s+/),i=0;i<e.length;i+=1){for(var o=!1,a=0;a<r.length;a+=1)if(e[i]===r[a]){o=!0;break}o||r.push(e[i])}for(e=[],i=0;i<r.length;i+=1){for(o=!1,a=0;a<n.length;a+=1)if(r[i]===n[a]){o=!0;break}o||e.push(r[i])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var n=t.className.split(/\s+/),r=0,i=n.length;r<i;r++)if(n[r]==e)return!0;return!1}function p(t){return t.o.location.hostname||t.a.location.hostname}function d(t,e,n){function r(){s&&i&&o&&(s(a),s=null)}e=u(t,"link",{rel:"stylesheet",href:e,media:"all"});var i=!1,o=!0,a=null,s=n||null;ot?(e.onload=function(){i=!0,r()},e.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),r()}):setTimeout(function(){i=!0,r()},0),c(t,"head",e)}function y(t,e,n,r){var i=t.c.getElementsByTagName("head")[0];if(i){var o=u(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},r||5e3),o}return null}function v(){this.a=0,this.c=null}function _(t){return t.a++,function(){t.a--,m(t)}}function g(t,e){t.c=e,m(t)}function m(t){0==t.a&&t.c&&(t.c(),t.c=null)}function E(t){this.a=t||"-"}function b(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function w(t){return C(t)+" "+(t.f+"00")+" 300px "+T(t.c)}function T(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var r=t[n].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?e.push("'"+r+"'"):e.push(r)}return e.join(",")}function S(t){return t.a+t.f}function C(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function A(t){var e=4,n="n",r=null;return t&&((r=t.match(/(normal|oblique|italic)/i))&&r[1]&&(n=r[1].substr(0,1).toLowerCase()),(r=t.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?e=7:/[1-9]00/.test(r[1])&&(e=parseInt(r[1].substr(0,1),10)))),n+e}function I(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new E("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function O(t){t.g&&h(t.f,[t.a.c("wf","loading")]),P(t,"loading")}function R(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),n=[],r=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),h(t.f,n,r)}P(t,"inactive")}function P(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,S(n)):t.h[e]())}function N(){this.c={}}function x(t,e,n){var r,i=[];for(r in e)if(e.hasOwnProperty(r)){var o=t.c[r];o&&i.push(o(e[r],n))}return i}function D(t,e){this.c=t,this.f=e,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function L(t){c(t.c,"body",t.a)}function M(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+T(t.c)+";"+("font-style:"+C(t)+";font-weight:"+(t.f+"00")+";")}function j(t,e,n,r,i,o){this.g=t,this.j=e,this.a=r,this.c=n,this.f=i||3e3,this.h=o||void 0}function k(t,e,n,r,i,o,a){this.v=t,this.B=e,this.c=n,this.a=r,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new D(this.c,this.s),this.h=new D(this.c,this.s),this.j=new D(this.c,this.s),this.m=new D(this.c,this.s),t=new b(this.a.c+",serif",S(this.a)),t=M(t),this.g.a.style.cssText=t,t=new b(this.a.c+",sans-serif",S(this.a)),t=M(t),this.h.a.style.cssText=t,t=new b("serif",S(this.a)),t=M(t),this.j.a.style.cssText=t,t=new b("sans-serif",S(this.a)),t=M(t),this.m.a.style.cssText=t,L(this.g),L(this.h),L(this.j),L(this.m)}function F(){if(null===st){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);st=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return st}function U(t,e,n){for(var r in at)if(at.hasOwnProperty(r)&&e===t.f[at[r]]&&n===t.f[at[r]])return!0;return!1}function W(t){var e,n=t.g.a.offsetWidth,r=t.h.a.offsetWidth;(e=n===t.f.serif&&r===t.f["sans-serif"])||(e=F()&&U(t,n,r)),e?it()-t.A>=t.w?F()&&U(t,n,r)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?z(t,t.v):z(t,t.B):q(t):z(t,t.v)}function q(t){setTimeout(a(function(){W(this)},t),50)}function z(t,e){setTimeout(a(function(){l(this.g.a),l(this.h.a),l(this.j.a),l(this.m.a),e(this.a)},t),0)}function B(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}function H(t){0==--t.f&&t.j&&(t.m?(t=t.a,t.g&&h(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),P(t,"active")):R(t.a))}function Q(t){this.j=t,this.a=new N,this.h=0,this.f=this.g=!0}function V(t,e,n,r,i){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=i||null,s=r||null||{};if(0===n.length&&o)R(e.a);else{e.f+=n.length,o&&(e.j=o);var u,c=[];for(u=0;u<n.length;u++){var l=n[u],f=s[l.c],p=e.a,d=l;if(p.g&&h(p.f,[p.a.c("wf",d.c,S(d).toString(),"loading")]),P(p,"fontloading",d),p=null,null===ut)if(window.FontFace){var d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),y=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);ut=d?42<parseInt(d[1],10):!y}else ut=!1;p=ut?new j(a(e.g,e),a(e.h,e),e.c,l,e.s,f):new k(a(e.g,e),a(e.h,e),e.c,l,e.s,t,f),c.push(p)}for(u=0;u<c.length;u++)c[u].start()}},0)}function G(t,e,n){var r=[],i=n.timeout;O(e);var r=x(t.a,n,t.c),o=new B(t.c,e,i);for(t.h=r.length,e=0,n=r.length;e<n;e++)r[e].load(function(e,n,r){V(t,o,e,n,r)})}function K(t,e){this.c=t,this.a=e}function Y(t,e){this.c=t,this.a=e}function J(t,e){t?this.c=t:this.c=ct,this.a=[],this.f=[],this.g=e||""}function X(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r].split(":");3==i.length&&t.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),t.a.push(i.join(o))}}function Z(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],r=0;r<e;r++)n.push(t.a[r].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function $(t){this.f=t,this.a=[],this.c={}}function tt(t){for(var e=t.f.length,n=0;n<e;n++){var r=t.f[n].split(":"),i=r[0].replace(/\+/g," "),o=["n4"];if(2<=r.length){var a,s=r[1];if(a=[],s)for(var s=s.split(","),u=s.length,c=0;c<u;c++){var l;if(l=s[c],l.match(/^[\w-]+$/)){var h=pt.exec(l.toLowerCase());if(null==h)l="";else{if(l=h[2],l=null==l||""==l?"n":ft[l],h=h[1],null==h||""==h)h="4";else var f=ht[h],h=f?f:isNaN(h)?"4":h.substr(0,1);l=[l,h].join("")}}else l="";l&&a.push(l)}0<a.length&&(o=a),3==r.length&&(r=r[2],a=[],r=r?r.split(","):a,0<r.length&&(r=lt[r[0]])&&(t.c[i]=r))}for(t.c[i]||(r=lt[i])&&(t.c[i]=r),r=0;r<o.length;r+=1)t.a.push(new b(i,o[r]))}}function et(t,e){this.c=t,this.a=e}function nt(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.f=e,this.a=[]}var it=Date.now||function(){return+new Date},ot=!!window.FontFace;E.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},j.prototype.start=function(){var t=this.c.o.document,e=this,n=it(),r=new Promise(function(r,i){function o(){it()-n>=e.f?i():t.fonts.load(w(e.a),e.h).then(function(t){1<=t.length?r():setTimeout(o,25)},function(){i()})}o()}),i=null,o=new Promise(function(t,n){i=setTimeout(n,e.f)});Promise.race([o,r]).then(function(){i&&(clearTimeout(i),i=null),e.g(e.a)},function(){e.j(e.a)})};var at={D:"serif",C:"sans-serif"},st=null;k.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=it(),W(this)};var ut=null;B.prototype.g=function(t){var e=this.a;e.g&&h(e.f,[e.a.c("wf",t.c,S(t).toString(),"active")],[e.a.c("wf",t.c,S(t).toString(),"loading"),e.a.c("wf",t.c,S(t).toString(),"inactive")]),P(e,"fontactive",t),this.m=!0,H(this)},B.prototype.h=function(t){var e=this.a;if(e.g){var n=f(e.f,e.a.c("wf",t.c,S(t).toString(),"active")),r=[],i=[e.a.c("wf",t.c,S(t).toString(),"loading")];n||r.push(e.a.c("wf",t.c,S(t).toString(),"inactive")),h(e.f,r,i)}P(e,"fontinactive",t),H(this)},Q.prototype.load=function(t){this.c=new s(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,G(this,new I(this.c,t),t)},K.prototype.load=function(t){function e(){if(o["__mti_fntLst"+r]){var n,i=o["__mti_fntLst"+r](),a=[];if(i)for(var s=0;s<i.length;s++){var u=i[s].fontfamily;void 0!=i[s].fontStyle&&void 0!=i[s].fontWeight?(n=i[s].fontStyle+i[s].fontWeight,a.push(new b(u,n))):a.push(new b(u))}t(a)}else setTimeout(function(){e()},50)}var n=this,r=n.a.projectId,i=n.a.version;if(r){var o=n.c.o;y(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(i?"?v="+i:""),function(i){i?t([]):(o["__MonotypeConfiguration__"+r]=function(){return n.a},e())}).id="__MonotypeAPIScript__"+r}else t([])},Y.prototype.load=function(t){var e,n,r=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},a=new v;for(e=0,n=r.length;e<n;e++)d(this.c,r[e],_(a));var s=[];for(e=0,n=i.length;e<n;e++)if(r=i[e].split(":"),r[1])for(var u=r[1].split(","),c=0;c<u.length;c+=1)s.push(new b(r[0],u[c]));else s.push(new b(r[0]));g(a,function(){t(s,o)})};var ct="https://fonts.googleapis.com/css",lt={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ht={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ft={i:"i",italic:"i",n:"n",normal:"n"},pt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,dt={Arimo:!0,Cousine:!0,Tinos:!0};et.prototype.load=function(t){var e=new v,n=this.c,r=new J(this.a.api,this.a.text),i=this.a.families;X(r,i);var o=new $(i);tt(o),d(n,Z(r),_(e)),g(e,function(){t(o.a,o.c,dt)})},nt.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var r=[],i=0;i<e.length;i+=2)for(var o=e[i],a=e[i+1],s=0;s<a.length;s++)r.push(new b(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(r)}},2e3):t([])},rt.prototype.load=function(t){var e=this.f.id,n=this.c.o,r=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var i=0,o=n.fonts.length;i<o;++i){var a=n.fonts[i];r.a.push(new b(a.name,A("font-weight:"+a.weight+";font-style:"+a.style)))}t(r.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+p(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var yt=new Q(window);yt.a.c.custom=function(t,e){return new Y(e,t)},yt.a.c.fontdeck=function(t,e){return new rt(e,t)},yt.a.c.monotype=function(t,e){return new K(e,t)},yt.a.c.typekit=function(t,e){return new nt(e,t)},yt.a.c.google=function(t,e){return new et(e,t)};var vt={load:a(yt.load,yt)};r=function(){return vt}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}()},544:function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return _.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){
var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(_.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(_.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(_.arrayBuffer&&_.blob&&m(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!E(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return b.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function y(t){var e=new i,n=t.replace(/\r?\n[\t ]+/g," ");return n.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var _={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(_.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},E=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},_.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];v.redirect=function(t,e){if(w.indexOf(e)===-1)throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=v,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new v(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&_.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},189:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}e.__esModule=!0;var o=n(1),a=r(o),s=n(3),u=r(s),c=n(4),l=r(c),h=n(30),f=r(h),p=function(t){var e=t.children,n=t.border,r=t.borderColor,o=t.bg,s=t.is,u=i(t,["children","border","borderColor","bg","is"]);return a.default.createElement(l.default,u,a.default.createElement(l.default,{position:"relative",pt:"100%"},a.default.createElement(f.default,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",w:1,borderRadius:"50%",border:n,borderColor:r,bg:o,is:s},a.default.createElement(l.default,{top:"50%",transform:"translateY(-50%)",position:"absolute",w:1,textAlign:"center"},e))))};p.propTypes={children:u.default.node,border:u.default.string,borderColor:u.default.string,bg:u.default.string,is:u.default.oneOfType([u.default.string,u.default.func])},e.default=p,t.exports=e.default},711:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return t.raw=e,t}var o=i(["\n  html, body {\n    width: 100%;\n    height: 100%;\n  }\n\n  body {\n    font-family: ",";\n    color: ",";\n    font-size: 14px;\n    ","\n  }\n\n\n  #___gatsby {\n    height: 100%;\n  }\n"],["\n  html, body {\n    width: 100%;\n    height: 100%;\n  }\n\n  body {\n    font-family: ",";\n    color: ",";\n    font-size: 14px;\n    ","\n  }\n\n\n  #___gatsby {\n    height: 100%;\n  }\n"]),a=i(["\n      font-size: 16px;\n    "],["\n      font-size: 16px;\n    "]),s=n(13),u=n(33),c=r(u),l=n(713),h=r(l);(0,s.injectGlobal)(o,c.default.font,c.default.colors.text,h.default.sm(a))},712:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(1),a=r(o),s=n(13);n(910),n(711);var u=n(33),c=r(u),l=n(4),h=r(l),f=n(38),p=r(f);if("undefined"!=typeof window){var d=n(1328);d.load({google:{families:["Dosis:200,400,700","Montserrat"]}})}e.default=function(t){return a.default.createElement(s.ThemeProvider,{theme:c.default},a.default.createElement(h.default,{height:"100%"},a.default.createElement(h.default,i({height:"100%"},t)),a.default.createElement(h.default,{position:"absolute",top:"-9999px",left:"-9999px"},a.default.createElement(p.default.dosis,{fontWeight:200},"1"),a.default.createElement(p.default.dosis,{fontWeight:400},"1"),a.default.createElement(p.default.dosis,{fontWeight:700},"1"))))},t.exports=e.default},713:function(t,e,n){"use strict";function r(t,e){return t.raw=e,t}e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=r(["\n    @media (min-width: ","px) {\n      ","\n    }\n  "],["\n    @media (min-width: ","px) {\n      ","\n    }\n  "]),a=n(13),s=n(33),u=["xs","sm","md","lg"];e.default=s.breakpoints.reduce(function(t,e,n){var r;return i(t,(r={},r[u[n]]=function(){return(0,a.css)(o,e,a.css.apply(void 0,arguments))},r))},{}),t.exports=e.default},1309:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MzAgMjAwIj4NCiAgPHRpdGxlPmZvb3Rlci1idWJibGU8L3RpdGxlPg0KICA8Zz4NCiAgICA8cGF0aCBkPSJNMzgxLjUxLDIuNzVoLTMzM0E0NS40NCw0NS40NCwwLDAsMCwzLjE4LDQ4LjA2djg0LjJhNDUuNDQsNDUuNDQsMCwwLDAsNDUuMzEsNDUuMzFIMjU2LjcxYzEuNjIsNSwyLDEyLjQ0LTUuODksMTkuMzIsMCwwLDE4LjE5LTMuNjUsMjEuMzUtMTkuMzJIMzgxLjUxYTQ1LjQ0LDQ1LjQ0LDAsMCwwLDQ1LjMxLTQ1LjMxVjQ4LjA2QTQ1LjQ0LDQ1LjQ0LDAsMCwwLDM4MS41MSwyLjc1WiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4NCiAgICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3MyA3OC4yNSkiIGZvbnQtc2l6ZT0iMjMuMDEiIGZpbGw9IiNmZmYiIGZvbnQtZmFtaWx5PSInUGluZ0ZhbmcgVEMnLCdIZWlUaSBUQycsJ01pY3Jvc29mdCBKaGVuZ0hlaScsc2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAuMWVtIj7lsIfnkIbmgKfnmoTmlbjmk5og5pyJ6Laj5Zyw5ZGI54++PHRzcGFuIHg9IjAiIHk9IjM4LjM2Ij7orpPmhJ/mgKfnmoTlhaflrrkg5a6i6KeA5Zyw5YKz6YGUPC90c3Bhbj48L3RleHQ+DQogIDwvZz4NCjwvc3ZnPg0K"},738:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(1),o=r(i),a=n(371),s=n(82),u=r(s),c=n(62),l=r(c),h=n(4),f=r(h),p=n(189),d=r(p),y=n(38),v=r(y),_=n(35),g=r(_),m=n(90),E=r(m),b=n(37),w=r(b),T=n(1310),S=r(T),C=n(1309),A=r(C),I=[{Icon:a.FaFacebookF,href:"https://www.facebook.com/ReLAB.cc/"},{Icon:a.FaVimeoV,href:"https://vimeo.com/relab"},{Icon:a.FaBehance,href:"https://www.behance.net/Re-LAB"}],O=function(){return o.default.createElement(w.default,{w:"100%",src:A.default,ratio:200/430})},R=function(t){var e=t.browser;return o.default.createElement(f.default,{bg:"blue",px:"1em"},o.default.createElement(l.default,{py:"3em"},!e.greaterThan.xs&&o.default.createElement(f.default,{px:"2em",mb:"2em"},o.default.createElement(O,null)),o.default.createElement(g.default,{justify:"center"},o.default.createElement(f.default,null,o.default.createElement(f.default,{w:"40%",ml:"-0.5em"},o.default.createElement(E.default,{to:"/"},o.default.createElement(w.default,{src:S.default,ratio:42/130}))),o.default.createElement(f.default,{color:"white"},o.default.createElement(f.default,{pb:"1em",pt:"2em"},o.default.createElement(E.default,{color:"white",fontWeight:"normal",hoverColor:"white",href:"mailto:hi@relab.cc"},"hi@relab.cc")),o.default.createElement(v.default,null,"106台北市敦化南路一段160巷58號3F"),o.default.createElement(v.default,null,"3F., No.58, Ln. 160,Sec. 1, Dunhua S. Rd., Da'an Dist. Taipei City 106, Taiwan."),o.default.createElement(g.default,{pt:"1.5em"},I.map(function(t,e){var n=t.Icon,r=t.href;return o.default.createElement(f.default,{mr:"1em",key:e},o.default.createElement(E.default,{href:r,target:"_blank"},o.default.createElement(d.default,{f:"1.25em",w:"2.5em",border:"1px solid",borderColor:"white",color:"white"},o.default.createElement(n,null))))})),o.default.createElement(v.default,{py:"1em"},"Copyright © 2018. All rights reserved."))),e.greaterThan.xs&&o.default.createElement(f.default,{w:"30%",ml:"4em",my:"auto"},o.default.createElement(O,null)))))};e.default=(0,u.default)(R),t.exports=e.default},1310:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMzAgNDIiPjxkZWZzPjxzdHlsZT4uYXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNMzcsMjMuNjlsLTMuMTYtNy01LjI2LDUuNTQsMi44OC40OWExMi41NiwxMi41NiwwLDEsMS01LjkxLTEyLjUsMS4zNywxLjM3LDAsMCwwLC43NS4yMkExLjM2LDEuMzYsMCwwLDAsMjcsOGwtLjA2LDBhMTUuMjcsMTUuMjcsMCwxLDAsNy4xNywxNS4yNloiLz48cGF0aCBjbGFzcz0iYSIgZD0iTTMyLjI3LDEzLjMxYTEuNjksMS42OSwwLDEsMS0xLjY5LTEuNywxLjY5LDEuNjksMCwwLDEsMS42OSwxLjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTkwLjc0LDI2LjkzVjEyLjUxaC0xLjZWMjYuNjljMCwzLDEuNTgsNC42OSw0LjMxLDQuNjlsLjU1LDBWMjkuOWwtLjU2LDBjLTItLjA2LTIuNjYtMS4zNC0yLjctMi45NSIvPjxwYXRoIGNsYXNzPSJhIiBkPSJNMTAyLjA4LDE3Ljc2YTYuOTEsNi45MSwwLDAsMCwwLDEzLjgxLDYuOCw2LjgsMCwwLDAsNS40NS0zLjJ2M0gxMDlsMC02Ljc0YTYuOTIsNi45MiwwLDAsMC02LjkzLTYuODltMCwxMi4yNGE1LjM0LDUuMzQsMCwxLDEsNS4zNC01LjM0QTUuMzQsNS4zNCwwLDAsMSwxMDIuMDgsMzAiLz48cmVjdCBjbGFzcz0iYSIgeD0iNzguNjgiIHk9IjIzLjkiIHdpZHRoPSI1LjkyIiBoZWlnaHQ9IjEuNzIiLz48cGF0aCBjbGFzcz0iYSIgZD0iTTExOS4zOSwxNy43NmE2LjA3LDYuMDcsMCwwLDAtNS4zNiwyLjlWMTIuODloLTEuNXYxOC41SDExNFYyOC41NGE2LjEyLDYuMTIsMCwwLDAsNS4zNiwzLDYuOTEsNi45MSwwLDAsMCwwLTEzLjgxbTAsMTIuMjRhNS4zNCw1LjM0LDAsMSwxLDUuMzQtNS4zNEE1LjM0LDUuMzQsMCwwLDEsMTE5LjM3LDMwIi8+PHBhdGggY2xhc3M9ImEiIGQ9Ik03NC41MSwyNC42MmE2LjkyLDYuOTIsMCwwLDAtMTMuODMsMCw2Ljg3LDYuODcsMCwwLDAsNi45LDYuOTJBNy4yMiw3LjIyLDAsMCwwLDc0LDI3Ljc5SDcyYTUuNDcsNS40NywwLDAsMS00LjQ0LDIuMTFjLTIuNjUsMC01LTEuNTgtNS4zMi00LjI4SDc0LjQxYTYuNjUsNi42NSwwLDAsMCwuMS0xWm0tNi45My01LjNhNS4zNSw1LjM1LDAsMCwxLDUuMjcsNC41MUg2Mi4zMWE1LjM0LDUuMzQsMCwwLDEsNS4yNy00LjUxIi8+PHBhdGggY2xhc3M9ImEiIGQ9Ik01OC43NSwxOC4zMmMwLTMuNDItMi4yOC02LjA1LTYuMTgtNi4xOEg0NlYzMS4zOWgxLjU5VjI0LjVoNC41YS40Ny40NywwLDAsMSwuMzguMThjLjE1LjI1LDAsLjA2LDQuMzIsNi43MUg1OC43bC00LjUzLTYuOTVjMC0uMDUtLjA2LS4xLDAtLjEyYTUuODksNS44OSwwLDAsMCw0LjU4LTZNNDcuNjMsMTMuNmg0LjQ4YzMuNzMuMDksNS4xMiwyLjIzLDUuMTIsNC43MSwwLDIuNjQtMS43NCw0LjU1LTUsNC42SDQ3LjY1WiIvPjwvc3ZnPgo="},759:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.query=void 0;var i=n(1),o=r(i),a=n(3),s=r(a),u=n(1144),c=r(u),l=n(372),h=n(738),f=r(h),p=n(4),d=r(p),y=n(712),v=r(y),_=n(766),g=r(_),m=function(t){var e=t.children,n=t.data;return o.default.createElement(l.Provider,{store:(0,g.default)()},o.default.createElement(d.default,{height:"100%"},o.default.createElement(c.default,null,o.default.createElement("title",null,n.site.siteMetadata.title),o.default.createElement("meta",{name:"description",content:"我們是一家資訊設計公司，讓你的資訊透過設計，打動人心。"}),o.default.createElement("meta",{name:"google-site-verification",content:"XipMl6VnRHFU_QK8_7cDItQ1xv-DrI17edh4SX2j00o"}),o.default.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),o.default.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),o.default.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),o.default.createElement("link",{rel:"manifest",href:"/site.webmanifest"}),o.default.createElement("link",{rel:"mask-icon",color:"#5bbad",href:"/safari-pinned-tab.svg"}),o.default.createElement("meta",{name:"msapplication-TileColor",content:"#da532c"}),o.default.createElement("meta",{name:"theme-color",content:"#ffffff"}),o.default.createElement("meta",{property:"og:url",content:"https://relab.cc"}),o.default.createElement("meta",{property:"og:title",content:"Re-lab"}),o.default.createElement("meta",{property:"og:description",content:"我們是一家資訊設計公司，讓你的資訊透過設計，打動人心。"}),o.default.createElement("meta",{property:"og:image",content:"https://relab.cc/fb.png"})),o.default.createElement(v.default,null,e(),o.default.createElement(f.default,null))))};m.propTypes={children:s.default.func,data:s.default.object},e.default=m;e.query="** extracted graphql fragment **"},464:function(t,e){t.exports={apiKey:"AIzaSyCMc6hv_lV4ji1U_oMivdyFSV4yREdqRz0",authDomain:"re-behance.firebaseapp.com",databaseURL:"https://re-behance.firebaseio.com",projectId:"re-behance",storageBucket:"re-behance.appspot.com",messagingSenderId:"638762406252"}},389:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.firebaseEnhancer=e.firebase=void 0;var i=n(150),o=n(431),a=r(o);n(432);var s=n(464),u=r(s),c=(0,i.reactReduxFirebase)(a.default,{enableLogging:!1});a.default.initializeApp(u.default),e.firebase=a.default,e.firebaseEnhancer=c},766:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[s.responsiveStoreEnhancer,u.firebaseEnhancer],n=o.compose,r=(0,o.createStore)((0,l.default)(),(0,a.fromJS)(t),n.apply(void 0,e));return r.injectedReducers={},r}e.__esModule=!0,e.default=i;var o=n(183),a=n(103),s=n(377),u=n(389),c=n(390),l=r(c);t.exports=e.default},390:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(0,a.combineReducers)(o({browser:(0,s.createResponsiveStateReducer)((0,l.default)((0,f.default)(d,p.breakpoints))),firebase:u.firebaseReducer},t))}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=i;var a=n(534),s=n(377),u=n(150),c=n(479),l=r(c),h=n(488),f=r(h),p=n(33),d=["xs","sm","md","lg","xl"];t.exports=e.default}});
//# sourceMappingURL=component---src-layouts-index-js-632f49a5bda8638504a8.js.map